import{ak as e,al as t,d as r,r as i,o as a,am as n,c as o,i as s,an as l,v as d,I as c,a as u,e as h,b as p,w as f,u as m,j as _,h as g,ad as v,ae as y,f as b,t as S,ao as w,ap as E,x,y as k,z as A}from"./index-6999ba88.js";function T(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var C,R={exports:{}};
/*!
 * artplayer.js v5.0.9
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2023 Harvey Zack
 * Released under the MIT License.
 */C=R,function(t,r,i,a,n){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},s="function"==typeof o[a]&&o[a],l=s.cache||{},d=T.bind(C);function c(e,r){if(!l[e]){if(!t[e]){var i="function"==typeof o[a]&&o[a];if(!r&&i)return i(e,!0);if(s)return s(e,!0);if(d&&"string"==typeof e)return d(e);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}h.resolve=function(r){var i=t[e][1][r];return null!=i?i:r},h.cache={};var u=l[e]=new c.Module(e);t[e][0].call(u.exports,h,u,u.exports,this)}return l[e].exports;function h(e){var t=h.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=t,c.cache=l,c.parent=s,c.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return o[a]}}),o[a]=c;for(var u=0;u<r.length;u++)c(r[u]);if(i){var h=c(i);C.exports=h}}({"5lTcX":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("bundle-text:./style/index.less"),n=i.interopDefault(a),o=e("option-validator"),s=i.interopDefault(o),l=e("./utils/emitter"),d=i.interopDefault(l),c=e("./utils"),u=e("./scheme"),h=i.interopDefault(u),p=e("./config"),f=i.interopDefault(p),m=e("./template"),_=i.interopDefault(m),g=e("./i18n"),v=i.interopDefault(g),y=e("./player"),b=i.interopDefault(y),S=e("./control"),w=i.interopDefault(S),E=e("./contextmenu"),x=i.interopDefault(E),k=e("./info"),A=i.interopDefault(k),T=e("./subtitle"),C=i.interopDefault(T),R=e("./events"),D=i.interopDefault(R),L=e("./hotkey"),I=i.interopDefault(L),P=e("./layer"),M=i.interopDefault(P),O=e("./loading"),B=i.interopDefault(O),j=e("./notice"),F=i.interopDefault(j),N=e("./mask"),U=i.interopDefault(N),V=e("./icons"),z=i.interopDefault(V),$=e("./setting"),H=i.interopDefault($),G=e("./storage"),q=i.interopDefault(G),W=e("./plugins"),Y=i.interopDefault(W);let K=0;const X=[];class Z extends d.default{constructor(e,t){super(),this.id=++K;const r=c.mergeDeep(Z.option,e);if(r.container=e.container,this.option=(0,s.default)(r,h.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new _.default(this),this.events=new D.default(this),this.storage=new q.default(this),this.icons=new z.default(this),this.i18n=new v.default(this),this.notice=new F.default(this),this.player=new b.default(this),this.layers=new M.default(this),this.controls=new w.default(this),this.contextmenu=new x.default(this),this.subtitle=new C.default(this),this.info=new A.default(this),this.loading=new B.default(this),this.hotkey=new I.default(this),this.mask=new U.default(this),this.setting=new H.default(this),this.plugins=new Y.default(this),"function"==typeof t&&this.on("ready",(()=>t.call(this,this))),Z.DEBUG){const e=e=>console.log(`[ART.${this.id}] -> ${e}`);e("Version@"+Z.version),e("Env@"+Z.env),e("Build@"+Z.build);for(let t=0;t<f.default.events.length;t++)this.on("video:"+f.default.events[t],(t=>e("Event@"+t.type)))}X.push(this)}static get instances(){return X}static get version(){return"5.0.9"}static get env(){return"production"}static get build(){return"2023-05-14 11:10:25"}static get config(){return f.default}static get utils(){return c}static get scheme(){return h.default}static get Emitter(){return d.default}static get validator(){return s.default}static get kindOf(){return s.default.kindOf}static get html(){return _.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0},subtitle:{url:"",type:"",style:{},escape:!0,encoding:"utf-8",onVttLoad:e=>e},moreVideoAttr:{controls:!1,preload:c.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(e=!0){this.events.destroy(),this.template.destroy(e),X.splice(X.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}if(r.default=Z,Z.DEBUG=!1,Z.CONTEXTMENU=!0,Z.NOTICE_TIME=2e3,Z.SETTING_WIDTH=250,Z.SETTING_ITEM_WIDTH=200,Z.SETTING_ITEM_HEIGHT=35,Z.RESIZE_TIME=200,Z.SCROLL_TIME=200,Z.SCROLL_GAP=50,Z.AUTO_PLAYBACK_MAX=10,Z.AUTO_PLAYBACK_MIN=5,Z.AUTO_PLAYBACK_TIMEOUT=3e3,Z.RECONNECT_TIME_MAX=5,Z.RECONNECT_SLEEP_TIME=1e3,Z.CONTROL_HIDE_TIME=3e3,Z.DBCLICK_TIME=300,Z.DBCLICK_FULLSCREEN=!0,Z.MOBILE_DBCLICK_PLAY=!0,Z.MOBILE_CLICK_PLAY=!1,Z.AUTO_ORIENTATION_TIME=200,Z.INFO_LOOP_TIME=1e3,Z.FAST_FORWARD_VALUE=3,Z.FAST_FORWARD_TIME=1e3,Z.TOUCH_MOVE_RATIO=.5,Z.VOLUME_STEP=.1,Z.SEEK_STEP=5,Z.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],Z.ASPECT_RATIO=["default","4:3","16:9"],Z.FLIP=["normal","horizontal","vertical"],Z.FULLSCREEN_WEB_IN_BODY=!1,"undefined"!=typeof document&&!document.getElementById("artplayer-style")){const e=c.createElement("style");e.id="artplayer-style",e.textContent=n.default,document.head.appendChild(e)}"undefined"!=typeof window&&(window.Artplayer=Z),console.log(`%c ArtPlayer %c ${Z.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(e,t,r){t.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#fff3;--art-hover-color:#ffffff80;--art-loaded-color:#fff3;--art-loop-color:#ffffffbf;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-loop-width:2px;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#00000080;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{width:100%;height:100%;zoom:1;text-align:left;direction:ltr;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;outline:0;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box;margin:0;padding:0}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{max-width:100%;vertical-align:top}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;width:100%;height:100%;cursor:pointer;position:absolute;inset:0}.art-poster{z-index:11;width:100%;height:100%;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;width:100%;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;width:100%;height:100%;pointer-events:none;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;width:100%;height:100%;pointer-events:none;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;width:100%;height:100%;pointer-events:none;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;width:100%;height:100%;pointer-events:none;justify-content:center;align-items:center;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;width:100%;height:100%;opacity:0;pointer-events:none;justify-content:flex-end;gap:var(--art-bottom-gap);padding:0 var(--art-padding);transition:opacity var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{height:50%;width:100%;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;width:100%;height:100%;width:0%;background-color:var(--art-hover-color);display:none;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;width:100%;height:100%;width:0%;background-color:var(--art-loaded-color);position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;width:100%;height:100%;width:0%;background-color:var(--art-theme);position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;width:100%;height:100%;pointer-events:none;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;width:100%;height:100%;pointer-events:auto;width:var(--art-highlight-width);transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);position:absolute;inset:0 auto 0 0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{width:100%;height:100%;pointer-events:none}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;bottom:10px;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom .art-progress .art-control-loop{z-index:0;width:100%;height:100%;pointer-events:none;display:none;position:absolute;inset:0}.art-bottom .art-progress .art-control-loop .art-loop-point{z-index:0;width:100%;height:100%;width:var(--art-loop-width);background-color:var(--art-loop-color);transform:translateX(calc(var(--art-loop-width)/-2))scaleY(1.5);position:absolute;inset:0 0 0 0%}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{height:100%;flex:1;justify-content:center;align-items:center;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{height:100%;width:100%;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{width:100%;cursor:pointer;flex:1;justify-content:center;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{width:2px;border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;width:100%;height:100%;background-color:var(--art-theme);position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;width:100%;height:100%;height:auto;padding:var(--art-padding);pointer-events:none;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);transform-origin:100% 100%;max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transform:scale(var(--art-settings-scale));transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{min-width:32px;height:24px;justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{height:3px;width:80px;appearance:none;background-color:#fff3;outline:none}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{width:100px;text-align:right}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{width:250px;text-overflow:ellipsis;white-space:nowrap;user-select:all;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;width:320px;height:180px;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;width:100%;height:100%;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-mini-progress-bar{z-index:0;width:100%;height:100%;height:var(--art-mini-progress-height);background-color:var(--art-theme);display:flex;position:absolute;inset:auto 0 0}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{width:15px;height:15px;fill:var(--art-theme)}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-bottom{display:none!important}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-lock .art-layer-mini-progress-bar{display:flex!important}.art-video-player.art-control-show .art-layer-mini-progress-bar{display:none}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{width:100%;flex-shrink:0;justify-content:center;align-items:center;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(e,t,r){t.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=Object.prototype.toString,r=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var a=e(r);if("boolean"===a)return"boolean";if("string"===a)return"string";if("number"===a)return"number";if("symbol"===a)return"symbol";if("function"===a)return"GeneratorFunction"===i(r)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(r))return"array";if(function(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}(r))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(r))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(r))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(r))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(r))return"regexp";switch(i(r)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(r))return"generator";switch(a=t.call(r)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return a.slice(8,-1).toLowerCase().replace(/\s/g,"")};function i(e){return e.constructor?e.constructor.name:null}function a(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return n(e,t,i),o(e,t,i),function(e,t,i){var s=r(t),l=r(e);if("object"===s){if("object"!==l)throw new Error("[Type Error]: '".concat(i.join("."),"' require 'object' type, but got '").concat(l,"'"));Object.keys(t).forEach((function(r){var s=e[r],l=t[r],d=i.slice();d.push(r),n(s,l,d),o(s,l,d),a(s,l,d)}))}if("array"===s){if("array"!==l)throw new Error("[Type Error]: '".concat(i.join("."),"' require 'array' type, but got '").concat(l,"'"));e.forEach((function(r,s){var l=e[s],d=t[s]||t[0],c=i.slice();c.push(s),n(l,d,c),o(l,d,c),a(l,d,c)}))}}(e,t,i),e}function n(e,t,i){if("string"===r(t)){var a=r(e);if("?"===t[0]&&(t=t.slice(1)+"|undefined"),!(-1<t.indexOf("|")?t.split("|").map((function(e){return e.toLowerCase().trim()})).filter(Boolean).some((function(e){return a===e})):t.toLowerCase().trim()===a))throw new Error("[Type Error]: '".concat(i.join("."),"' require '").concat(t,"' type, but got '").concat(a,"'"))}}function o(e,t,i){if("function"===r(t)){var a=t(e,r(e),i);if(!0!==a){var n=r(a);throw"string"===n?new Error(a):"error"===n?a:new Error("[Validator Error]: The scheme for '".concat(i.join("."),"' validator require return true, but got '").concat(a,"'"))}}}return a.kindOf=r,a}()},{}],"66mFZ":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{on(e,t,r){const i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:r}),this}once(e,t,r){const i=this;function a(...n){i.off(e,a),t.apply(r,n)}return a._=t,this.on(e,a,r)}emit(e,...t){const r=((this.e||(this.e={}))[e]||[]).slice();for(let i=0;i<r.length;i+=1)r[i].fn.apply(r[i].ctx,t);return this}off(e,t){const r=this.e||(this.e={}),i=r[e],a=[];if(i&&t)for(let n=0,o=i.length;n<o;n+=1)i[n].fn!==t&&i[n].fn._!==t&&a.push(i[n]);return a.length?r[e]=a:delete r[e],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach((function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"71aH7":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./dom");i.exportAll(a,r);var n=e("./error");i.exportAll(n,r);var o=e("./subtitle");i.exportAll(o,r);var s=e("./file");i.exportAll(s,r);var l=e("./property");i.exportAll(l,r);var d=e("./time");i.exportAll(d,r);var c=e("./format");i.exportAll(c,r);var u=e("./compatibility");i.exportAll(u,r)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"query",(()=>n)),i.export(r,"queryAll",(()=>o)),i.export(r,"addClass",(()=>s)),i.export(r,"removeClass",(()=>l)),i.export(r,"hasClass",(()=>d)),i.export(r,"append",(()=>c)),i.export(r,"remove",(()=>u)),i.export(r,"setStyle",(()=>h)),i.export(r,"setStyles",(()=>p)),i.export(r,"getStyle",(()=>f)),i.export(r,"sublings",(()=>m)),i.export(r,"inverseClass",(()=>_)),i.export(r,"tooltip",(()=>g)),i.export(r,"isInViewport",(()=>v)),i.export(r,"includeFromEvent",(()=>y)),i.export(r,"replaceElement",(()=>b)),i.export(r,"createElement",(()=>S)),i.export(r,"getIcon",(()=>w));var a=e("./compatibility");function n(e,t=document){return t.querySelector(e)}function o(e,t=document){return Array.from(t.querySelectorAll(e))}function s(e,t){return e.classList.add(t)}function l(e,t){return e.classList.remove(t)}function d(e,t){return e.classList.contains(t)}function c(e,t){return t instanceof Element?e.appendChild(t):e.insertAdjacentHTML("beforeend",String(t)),e.lastElementChild||e.lastChild}function u(e){return e.parentNode.removeChild(e)}function h(e,t,r){return e.style[t]=r,e}function p(e,t){for(const r in t)h(e,r,t[r]);return e}function f(e,t,r=!0){const i=window.getComputedStyle(e,null).getPropertyValue(t);return r?parseFloat(i):i}function m(e){return Array.from(e.parentElement.children).filter((t=>t!==e))}function _(e,t){m(e).forEach((e=>l(e,t))),s(e,t)}function g(e,t,r="top"){a.isMobile||(e.setAttribute("aria-label",t),s(e,"hint--rounded"),s(e,`hint--${r}`))}function v(e,t=0){const r=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth,n=r.top-t<=i&&r.top+r.height+t>=0,o=r.left-t<=a+t&&r.left+r.width+t>=0;return n&&o}function y(e,t){return e.composedPath&&e.composedPath().indexOf(t)>-1}function b(e,t){return t.parentNode.replaceChild(e,t),e}function S(e){return document.createElement(e)}function w(e="",t=""){const r=S("i");return s(r,"art-icon"),s(r,`art-icon-${e}`),c(r,t),r}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"userAgent",(()=>a)),i.export(r,"isSafari",(()=>n)),i.export(r,"isWechat",(()=>o)),i.export(r,"isIE",(()=>s)),i.export(r,"isAndroid",(()=>l)),i.export(r,"isIOS",(()=>d)),i.export(r,"isIOS13",(()=>c)),i.export(r,"isMobile",(()=>u));const a="undefined"!=typeof navigator?navigator.userAgent:"",n=/^((?!chrome|android).)*safari/i.test(a),o=/MicroMessenger/i.test(a),s=/MSIE|Trident/i.test(a),l=/android/i.test(a),d=/iPad|iPhone|iPod/i.test(a)&&!window.MSStream,c=d||a.includes("Macintosh")&&navigator.maxTouchPoints>=1,u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)||c},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ArtPlayerError",(()=>a)),i.export(r,"errorHandle",(()=>n));class a extends Error{constructor(e,t){super(e),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t||this.constructor),this.name="ArtPlayerError"}}function n(e,t){if(!e)throw new a(t);return e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return"WEBVTT \r\n\r\n".concat((t=e,t.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,((e,t,r)=>{let i=r.slice(0,3);return 1===r.length&&(i=r+"00"),2===r.length&&(i=r+"0"),`${t},${i}`}))).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n"));var t}function n(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function o(e){const t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function r(e=""){return e.split(/[:.]/).map(((e,t,r)=>{if(t===r.length-1){if(1===e.length)return`.${e}00`;if(2===e.length)return`.${e}0`}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===r.length-1?`.${e}`:`:${e}`})).join("")}return`WEBVTT\n\n${e.split(/\r?\n/).map((e=>{const i=e.match(t);return i?{start:r(i[1].trim()),end:r(i[2].trim()),text:i[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((e=>e.trim())).join("\n")}:null})).filter((e=>e)).map(((e,t)=>e?`${t+1}\n${e.start} --\x3e ${e.end}\n${e.text}`:"")).filter((e=>e.trim())).join("\n\n")}`}i.defineInteropFlag(r),i.export(r,"srtToVtt",(()=>a)),i.export(r,"vttToBlob",(()=>n)),i.export(r,"assToVtt",(()=>o))},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return e.includes("?")?a(e.split("?")[0]):e.includes("#")?a(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function n(e,t){const r=document.createElement("a");r.style.display="none",r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}i.defineInteropFlag(r),i.export(r,"getExt",(()=>a)),i.export(r,"download",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"def",(()=>a)),i.export(r,"has",(()=>o)),i.export(r,"get",(()=>s)),i.export(r,"mergeDeep",(()=>l));const a=Object.defineProperty,{hasOwnProperty:n}=Object.prototype;function o(e,t){return n.call(e,t)}function s(e,t){return Object.getOwnPropertyDescriptor(e,t)}function l(...e){const t=e=>e&&"object"==typeof e&&!Array.isArray(e);return e.reduce(((e,r)=>(Object.keys(r).forEach((i=>{const a=e[i],n=r[i];Array.isArray(a)&&Array.isArray(n)?e[i]=a.concat(...n):t(a)&&t(n)?e[i]=l(a,n):e[i]=n})),e)),{})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e=0){return new Promise((t=>setTimeout(t,e)))}function n(e,t){let r;return function(...i){clearTimeout(r),r=setTimeout((()=>(r=null,e.apply(this,i))),t)}}function o(e,t){let r=!1;return function(...i){r||(e.apply(this,i),r=!0,setTimeout((function(){r=!1}),t))}}i.defineInteropFlag(r),i.export(r,"sleep",(()=>a)),i.export(r,"debounce",(()=>n)),i.export(r,"throttle",(()=>o))},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t,r){return Math.max(Math.min(e,Math.max(t,r)),Math.min(t,r))}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return["string","number"].includes(typeof e)}function s(e){const t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*r);return(t>0?[t,r,i]:[r,i]).map((e=>e<10?`0${e}`:String(e))).join(":")}function l(e){return e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e)))}i.defineInteropFlag(r),i.export(r,"clamp",(()=>a)),i.export(r,"capitalize",(()=>n)),i.export(r,"isStringOrNumber",(()=>o)),i.export(r,"secondToTime",(()=>s)),i.export(r,"escape",(()=>l))},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ComponentOption",(()=>h));var a=e("../utils");const n="array",o="boolean",s="string",l="number",d="object",c="function";function u(e,t,r){return(0,a.errorHandle)(t===s||t===l||e instanceof Element,`${r.join(".")} require '${s}' or 'Element' type`)}const h={html:u,disable:`?${o}`,name:`?${s}`,index:`?${l}`,style:`?${d}`,click:`?${c}`,mounted:`?${c}`,tooltip:`?${s}|${l}`,width:`?${l}`,selector:`?${n}`,onSelect:`?${c}`,switch:`?${o}`,onSwitch:`?${c}`,range:`?${n}`,onRange:`?${c}`,onChange:`?${c}`};r.default={id:s,container:u,url:s,poster:s,type:s,theme:s,lang:s,volume:l,isLive:o,muted:o,autoplay:o,autoSize:o,autoMini:o,loop:o,flip:o,playbackRate:o,aspectRatio:o,screenshot:o,setting:o,hotkey:o,pip:o,mutex:o,backdrop:o,fullscreen:o,fullscreenWeb:o,subtitleOffset:o,miniProgressBar:o,useSSR:o,playsInline:o,lock:o,fastForward:o,autoPlayback:o,autoOrientation:o,airplay:o,plugins:[c],layers:[h],contextmenu:[h],settings:[h],controls:[{...h,position:(e,t,r)=>{const i=["top","left","right"];return(0,a.errorHandle)(i.includes(e),`${r.join(".")} only accept ${i.toString()} as parameters`)}}],quality:[{default:`?${o}`,html:s,url:s}],highlight:[{time:l,text:s}],thumbnails:{url:s,number:l,column:l,width:l,height:l},subtitle:{url:s,type:s,style:d,escape:o,encoding:s,onVttLoad:c},moreVideoAttr:d,i18n:d,icons:d,cssVar:d,customType:d}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("./utils");class a{constructor(e){this.art=e;const{option:t,constructor:r}=e;t.container instanceof Element?this.$container=t.container:(this.$container=(0,i.query)(t.container),(0,i.errorHandle)(this.$container,`No container element found by ${t.container}`));const a=this.$container.tagName.toLowerCase();(0,i.errorHandle)("div"===a,`Unsupported container element type, only support 'div' but got '${a}'`),(0,i.errorHandle)(r.instances.every((e=>e.template.$container!==this.$container)),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=e.id,this.$original=this.$container.cloneNode(!0),this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.0.9</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span> x <span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(e){return(0,i.query)(e,this.$container)}init(){const{option:e}=this.art;e.useSSR||(this.$container.innerHTML=a.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),e.backdrop&&(0,i.addClass)(this.$player,"art-backdrop"),i.isMobile&&(0,i.addClass)(this.$player,"art-mobile")}destroy(e){e?(0,i.replaceElement)(this.$original,this.$container):(0,i.addClass)(this.$player,"art-destroy")}}r.default=a},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils"),n=e("./zh-cn.json"),o=i.interopDefault(n),s=e("./zh-tw.json"),l=i.interopDefault(s),d=e("./pl.json"),c=i.interopDefault(d),u=e("./cs.json"),h=i.interopDefault(u),p=e("./es.json"),f=i.interopDefault(p),m=e("./fa.json"),_=i.interopDefault(m),g=e("./fr.json"),v=i.interopDefault(g),y=e("./id.json"),b=i.interopDefault(y),S=e("./ru.json"),w=i.interopDefault(S);r.default=class{constructor(e){this.art=e,this.languages={"zh-cn":o.default,"zh-tw":l.default,pl:c.default,cs:h.default,es:f.default,fa:_.default,fr:v.default,id:b.default,ru:w.default},this.update(e.option.i18n)}init(){const e=this.art.option.lang.toLowerCase();this.language=this.languages[e]||{}}get(e){return this.language[e]||e}update(e){this.languages=(0,a.mergeDeep)(this.languages,e),this.init()}}},{"../utils":"71aH7","./zh-cn.json":"lNQi5","./zh-tw.json":"eRpom","./pl.json":"iEpPa","./cs.json":"dBgp3","./es.json":"dNIrL","./fa.json":"7Plhe","./fr.json":"kGNjI","./id.json":"6MQTw","./ru.json":"7LASr","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lNQi5:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"统计信息","Close":"关闭","Video Load Failed":"加载失败","Volume":"音量","Play":"播放","Pause":"暂停","Rate":"速度","Mute":"静音","Video Flip":"画面翻转","Horizontal":"水平","Vertical":"垂直","Reconnect":"重新连接","Show Setting":"显示设置","Hide Setting":"隐藏设置","Screenshot":"截图","Play Speed":"播放速度","Aspect Ratio":"画面比例","Default":"默认","Normal":"正常","Open":"打开","Switch Video":"切换","Switch Subtitle":"切换字幕","Fullscreen":"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"网页全屏","Exit Web Fullscreen":"退出网页全屏","Mini Player":"迷你播放器","PIP Mode":"开启画中画","Exit PIP Mode":"退出画中画","PIP Not Supported":"不支持画中画","Fullscreen Not Supported":"不支持全屏","Subtitle Offset":"字幕偏移","Last Seen":"上次看到","Jump Play":"跳转播放","AirPlay":"隔空播放","AirPlay Not Available":"隔空播放不可用"}')},{}],eRpom:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"統計訊息","Close":"關閉","Video Load Failed":"載入失敗","Volume":"音量","Play":"播放","Pause":"暫停","Rate":"速度","Mute":"靜音","Video Flip":"畫面翻轉","Horizontal":"水平","Vertical":"垂直","Reconnect":"重新連接","Show Setting":"顯示设置","Hide Setting":"隱藏设置","Screenshot":"截圖","Play Speed":"播放速度","Aspect Ratio":"畫面比例","Default":"默認","Normal":"正常","Open":"打開","Switch Video":"切換","Switch Subtitle":"切換字幕","Fullscreen":"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"網頁全屏","Exit Web Fullscreen":"退出網頁全屏","Mini Player":"迷你播放器","PIP Mode":"開啟畫中畫","Exit PIP Mode":"退出畫中畫","PIP Not Supported":"不支持畫中畫","Fullscreen Not Supported":"不支持全屏","Subtitle Offset":"字幕偏移","Last Seen":"上次看到","Jump Play":"跳轉播放","AirPlay":"隔空播放","AirPlay Not Available":"隔空播放不可用"}')},{}],iEpPa:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Informacje o wideo","Close":"Zamknij","Video Load Failed":"Błąd ładowania wideo","Volume":"Głośność","Play":"Odtwórz","Pause":"Wstrzymaj","Rate":"Oceń","Mute":"Wycisz","Video Flip":"Rotacja wideo","Horizontal":"Pozioma","Vertical":"Pionowa","Reconnect":"Połącz ponownie","Show Setting":"Pokaż ustawienia","Hide Setting":"Ukryj ustawienia","Screenshot":"Zrzut ekranu","Play Speed":"Prędkość odtwarzania","Aspect Ratio":"Współczynnik proporcji","Default":"Domyślny","Normal":"Normalny","Open":"Otwórz","Switch Video":"Przełącz wideo","Switch Subtitle":"Przełącz napisy","Fullscreen":"Pełny ekran","Exit Fullscreen":"Zamknij pełny ekran","Web Fullscreen":"Tryb pełnej strony","Exit Web Fullscreen":"Zamknij tryb pełnej strony","Mini Player":"Miniodtwarzacz","PIP Mode":"Tryb PiP","Exit PIP Mode":"Zamknij tryb PiP","PIP Not Supported":"Tryb PiP nieobsługiwany","Fullscreen Not Supported":"Pełny ekran nieobsługiwany","Subtitle Offset":"Przesunięcie napisów","Last Seen":"Ostatnio widziany","Jump Play":"Skocz do gry","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay nie jest dostępny"}')},{}],dBgp3:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Info o videu","Close":"Zavřít","Video Load Failed":"Nahrání videa selhalo","Volume":"Hlasitost","Play":"Přehrát","Pause":"Pozastavit","Rate":"Hodnocení","Mute":"Ztlumit","Video Flip":"Otočit video","Horizontal":"Horizontálně","Vertical":"Vertikálně","Reconnect":"Opětovné připojení","Show Setting":"Zobrazit nastavení","Hide Setting":"Skrýt nastavení","Screenshot":"Snímek obrazovky","Play Speed":"Rychlost přehrávání","Aspect Ratio":"Poměr stran","Default":"Výchozí","Normal":"Normální","Open":"Otevřít","Switch Video":"Přepnout video","Switch Subtitle":"Přepnout titulky","Fullscreen":"Celá obrazovka","Exit Fullscreen":"Opustit režim celé obrazovky","Web Fullscreen":"Celá stránka","Exit Web Fullscreen":"Zavřít režim celé stránky","Mini Player":"Mini přehrávač","PIP Mode":"Režim PIP","Exit PIP Mode":"Opustit režim PIP","PIP Not Supported":"Režim PIP není podporován","Fullscreen Not Supported":"Režim celé obrazovky není podporován","Subtitle Offset":"Posun titulků","Last Seen":"Naposledy viděn","Jump Play":"Hra na skok","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay není k dispozici"}')},{}],dNIrL:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Información del video","Close":"Cerrar","Video Load Failed":"Falló carga de video","Volume":"Volumen","Play":"Reproduciendo","Pause":"Pausa","Rate":"Velocidad","Mute":"Silencio","Video Flip":"Rotar video","Horizontal":"Horizontal","Vertical":"Vertical","Reconnect":"Reconectando","Show Setting":"Mostrar ajustes","Hide Setting":"Ocultar ajustes","Screenshot":"Captura de Pantalla","Play Speed":"Velocidad de reproducción","Aspect Ratio":"Relación de aspecto","Default":"Por defecto","Normal":"Normal","Open":"Abrir","Switch Video":"Cambiar video","Switch Subtitle":"Cambiar subtítulo","Fullscreen":"Pantalla completa","Exit Fullscreen":"Salir de Pantalla completa","Web Fullscreen":"Pantalla completa Web","Exit Web Fullscreen":"Salir de Pantalla completa","Mini Player":"Mini reproductor","PIP Mode":"Modo PiP","Exit PIP Mode":"Cerrar modo PiP","PIP Not Supported":"Modo PiP no compatible","Fullscreen Not Supported":"Pantalla completa no soportada","Subtitle Offset":"Ajuste subtítulo","Last Seen":"Visto última vez","Jump Play":"Saltar","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay no disponible"}')},{}],"7Plhe":[function(e,t,r){t.exports=JSON.parse('{"Video Info":"اطلاعات ویدیو","Close":"بستن","Video Load Failed":"بارگذاری ناموفق","Play":"پخش","Volume":"میزان صدا","Pause":"توقف","Rate":"نرخ","Mute":"سکوت","Video Flip":"چرخش تصویر","Horizontal":"افقی","Vertical":"عمودی","Reconnect":"اتصال مجدد","Show Setting":"تنظیمات","Hide Setting":"بستن تنظیمات","Screenshot":"عکس از صفحه","Play Speed":"سرعت پخش","Aspect Ratio":"نسبت تصویر","Default":"حالت پیشفرض","Normal":" حالت عادی","Open":"بازکردن","Switch Video":"تغییر ویدیو","Switch Subtitle":"نغییر زیرنویس","Fullscreen":"تمام صفحه","Exit Fullscreen":"کوچک کردن","Web Fullscreen":"حالت تئاتر","Exit Web Fullscreen":"خروج از حالت تئاتر","Mini Player":"حالت پخش کوچک","PIP Mode":" مینی پلیر","Exit PIP Mode":"خروج از مینی پلیر","PIP Not Supported":"عدم پشتیبانی از مینی پلیر","Fullscreen Not Supported":"عدم پشتیبانی از حالت تمام صفحه","Subtitle Offset":"افست زیرنویس","Last Seen":"آخرین بازدید","Jump Play":"جامپ پلی","AirPlay":"ایر پلی","AirPlay Not Available":"عدم پشتیبانی از ایرپلی"}')},{}],kGNjI:[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Informations de la vidéo","Close":"Fermer","Video Load Failed":"Téléchargement de la vidéo échoué","Volume":"Volume","Play":"Lire","Pause":"Pause","Rate":"Vitesse","Mute":"Muet","Video Flip":"Rotation de la vidéo","Horizontal":"Horizontal","Vertical":"Vertical","Reconnect":"Reconnexion","Show Setting":"Afficher les paramètres","Hide Setting":"Cacher les paramètres","Screenshot":"Capture d\'écran","Play Speed":"Vitesse de lecture","Aspect Ratio":"Rapport d\'aspect","Default":"Défaut","Normal":"Normal","Open":"Ouvrir","Switch Video":"Basculer la vidéo","Switch Subtitle":"Basculer le sous-titre","Fullscreen":"Plein écran","Exit Fullscreen":"Quitter le plein écran","Web Fullscreen":"Plein écran Web","Exit Web Fullscreen":"Quitter le plein écran Web","Mini Player":"Mini lecteur","PIP Mode":"Mode PiP","Exit PIP Mode":"Fermer le mode PiP","PIP Not Supported":"Mode PiP non supporté","Fullscreen Not Supported":"Plein écran non supporté","Subtitle Offset":"Réglage des sous-titres","Last Seen":"Dernière position","Jump Play":"Continuer","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay non disponible"}')},{}],"6MQTw":[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Informasi Video","Close":"Tutup","Video Load Failed":"Gagal Memuat Video","Volume":"Volume","Play":"Putar","Pause":"Jeda","Rate":"Kecepatan","Mute":"Senyap","Video Flip":"Memutar Video","Horizontal":"Horizontal","Vertical":"Vertikal","Reconnect":"Menyambung Kembali","Show Setting":"Tampilkan Pengaturan","Hide Setting":"Sembunyikan Pengaturan","Screenshot":"Tangkapan Layar","Play Speed":"Kecepatan Putar","Aspect Ratio":"Rasio Aspek","Default":"Default","Normal":"Normal","Open":"Buka","Switch Video":"Ganti Video","Switch Subtitle":"Ganti Subtitle","Fullscreen":"Layar Penuh","Exit Fullscreen":"Keluar dari Layar Penuh","Web Fullscreen":"Layar Penuh Web","Exit Web Fullscreen":"Keluar dari Layar Penuh Web","Mini Player":"Pemutar Mini","PIP Mode":"Mode PIP","Exit PIP Mode":"Keluar dari Mode PIP","PIP Not Supported":"PIP Tidak Didukung","Fullscreen Not Supported":"Layar Penuh Tidak Didukung","Subtitle Offset":"Pergeseran Subtitle","Last Seen":"Terakhir Dilihat","Jump Play":"Lompat Putar","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay Tidak Tersedia"}')},{}],"7LASr":[function(e,t,r){t.exports=JSON.parse('{"Video Info":"Информация","Close":"Закрыть","Video Load Failed":"Ошибка загрузки видео","Volume":"Громкость","Play":"Играть","Pause":"Пауза","Rate":"Скорость","Mute":"Заглушить","Video Flip":"Развернуть видео","Horizontal":"Горизонтально","Vertical":"Вертикально","Reconnect":"Переподключенине","Show Setting":"Показать настройки","Hide Setting":"Скрыть настройки","Screenshot":"Скриншот","Play Speed":"Скорость воспроизведения","Aspect Ratio":"Соотношение сторон","Default":"По-умолчанию","Normal":"Нормальный","Open":"Открыть","Switch Video":"Переключить видео","Switch Subtitle":"Переключить субтитры","Fullscreen":"Полноэкранный режим","Exit Fullscreen":"Выход из полноэкранного режима","Web Fullscreen":"На все окно браузера","Exit Web Fullscreen":"Выход из режима полного окна","Mini Player":"Мини проигрыватель","PIP Mode":"Картинка в картинке","Exit PIP Mode":"Закрыть картинку в картинке","PIP Not Supported":"Картинка в картинке не поддерживается","Fullscreen Not Supported":"Полноэкранный режим не поддерживается","Subtitle Offset":"Настройка субтитров","Last Seen":"Последнее просмотренное","Jump Play":"Перейти","AirPlay":"AirPlay","AirPlay Not Available":"AirPlay недоступен"}')},{}],a90nx:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./urlMix"),n=i.interopDefault(a),o=e("./attrMix"),s=i.interopDefault(o),l=e("./playMix"),d=i.interopDefault(l),c=e("./pauseMix"),u=i.interopDefault(c),h=e("./toggleMix"),p=i.interopDefault(h),f=e("./seekMix"),m=i.interopDefault(f),_=e("./volumeMix"),g=i.interopDefault(_),v=e("./currentTimeMix"),y=i.interopDefault(v),b=e("./durationMix"),S=i.interopDefault(b),w=e("./switchMix"),E=i.interopDefault(w),x=e("./playbackRateMix"),k=i.interopDefault(x),A=e("./aspectRatioMix"),T=i.interopDefault(A),C=e("./screenshotMix"),R=i.interopDefault(C),D=e("./fullscreenMix"),L=i.interopDefault(D),I=e("./fullscreenWebMix"),P=i.interopDefault(I),M=e("./pipMix"),O=i.interopDefault(M),B=e("./loadedMix"),j=i.interopDefault(B),F=e("./playedMix"),N=i.interopDefault(F),U=e("./playingMix"),V=i.interopDefault(U),z=e("./autoSizeMix"),$=i.interopDefault(z),H=e("./rectMix"),G=i.interopDefault(H),q=e("./flipMix"),W=i.interopDefault(q),Y=e("./miniMix"),K=i.interopDefault(Y),X=e("./loopMix"),Z=i.interopDefault(X),J=e("./posterMix"),Q=i.interopDefault(J),ee=e("./autoHeightMix"),te=i.interopDefault(ee),re=e("./cssVarMix"),ie=i.interopDefault(re),ae=e("./themeMix"),ne=i.interopDefault(ae),oe=e("./typeMix"),se=i.interopDefault(oe),le=e("./stateMix"),de=i.interopDefault(le),ce=e("./subtitleOffsetMix"),ue=i.interopDefault(ce),he=e("./airplayMix"),pe=i.interopDefault(he),fe=e("./qualityMix"),me=i.interopDefault(fe),_e=e("./optionInit"),ge=i.interopDefault(_e),ve=e("./eventInit"),ye=i.interopDefault(ve);r.default=class{constructor(e){(0,n.default)(e),(0,s.default)(e),(0,d.default)(e),(0,u.default)(e),(0,p.default)(e),(0,m.default)(e),(0,g.default)(e),(0,y.default)(e),(0,S.default)(e),(0,E.default)(e),(0,k.default)(e),(0,T.default)(e),(0,R.default)(e),(0,L.default)(e),(0,P.default)(e),(0,O.default)(e),(0,j.default)(e),(0,N.default)(e),(0,V.default)(e),(0,$.default)(e),(0,G.default)(e),(0,W.default)(e),(0,K.default)(e),(0,Z.default)(e),(0,Q.default)(e),(0,te.default)(e),(0,ie.default)(e),(0,ne.default)(e),(0,se.default)(e),(0,de.default)(e),(0,ue.default)(e),(0,pe.default)(e),(0,me.default)(e),(0,ye.default)(e),(0,ge.default)(e)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./loopMix":"f1hVG","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{option:t,template:{$video:r}}=e;(0,i.def)(e,"url",{get:()=>r.src,async set(a){if(a){const n=e.url,o=t.type||(0,i.getExt)(a),s=t.customType[o];o&&s?(await(0,i.sleep)(),e.loading.show=!0,s.call(e,r,a,e)):(URL.revokeObjectURL(n),r.src=a),n!==e.url&&(e.option.url=a,e.isReady&&n&&e.once("video:canplay",(()=>{e.emit("restart",a)})))}else await(0,i.sleep)(),e.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$video:t}}=e;(0,i.def)(e,"attr",{value(e,r){if(void 0===r)return t[e];t[e]=r}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,notice:r,option:a,constructor:{instances:n},template:{$video:o}}=e;(0,i.def)(e,"play",{value:async function(){const i=await o.play();if(r.show=t.get("Play"),e.emit("play"),a.mutex)for(let t=0;t<n.length;t++){const r=n[t];r!==e&&r.pause()}return i}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$video:t},i18n:r,notice:a}=e;(0,i.def)(e,"pause",{value(){const i=t.pause();return a.show=r.get("Pause"),e.emit("pause"),i}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"toggle",{value:()=>e.playing?e.pause():e.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{notice:t}=e;(0,i.def)(e,"seek",{set(r){e.currentTime=r,e.emit("seek",e.currentTime),e.duration&&(t.show=`${(0,i.secondToTime)(e.currentTime)} / ${(0,i.secondToTime)(e.duration)}`)}}),(0,i.def)(e,"forward",{set(t){e.seek=e.currentTime+t}}),(0,i.def)(e,"backward",{set(t){e.seek=e.currentTime-t}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$video:t},i18n:r,notice:a,storage:n}=e;(0,i.def)(e,"volume",{get:()=>t.volume||0,set:e=>{t.volume=(0,i.clamp)(e,0,1),a.show=`${r.get("Volume")}: ${parseInt(100*t.volume,10)}`,0!==t.volume&&n.set("volume",t.volume)}}),(0,i.def)(e,"muted",{get:()=>t.muted,set:e=>{t.muted=e}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{$video:t}=e.template;(0,i.def)(e,"currentTime",{get:()=>t.currentTime||0,set:r=>{r=parseFloat(r),Number.isNaN(r)||(t.currentTime=(0,i.clamp)(r,0,e.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"duration",{get:()=>{const{duration:t}=e.template.$video;return t===1/0?0:t||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){function t(t,r){return new Promise(((i,a)=>{if(t===e.url)return;const{playing:n,aspectRatio:o,playbackRate:s}=e;e.pause(),e.url=t,e.notice.show="",e.once("video:error",a),e.once("video:canplay",(async()=>{e.playbackRate=s,e.aspectRatio=o,e.currentTime=r,n&&await e.play(),e.notice.show="",i()}))}))}(0,i.def)(e,"switchQuality",{value:r=>t(r,e.currentTime)}),(0,i.def)(e,"switchUrl",{value:e=>t(e,0)}),(0,i.def)(e,"switch",{set:e.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$video:t},i18n:r,notice:a}=e;(0,i.def)(e,"playbackRate",{get:()=>t.playbackRate,set(i){if(i){if(i===t.playbackRate)return;t.playbackRate=i,a.show=`${r.get("Rate")}: ${1===i?r.get("Normal"):`${i}x`}`}else e.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,notice:r,template:{$video:a,$player:n}}=e;(0,i.def)(e,"aspectRatio",{get:()=>n.dataset.aspectRatio||"default",set(o){if(o||(o="default"),"default"===o)(0,i.setStyle)(a,"width",null),(0,i.setStyle)(a,"height",null),(0,i.setStyle)(a,"margin",null),delete n.dataset.aspectRatio;else{const e=o.split(":").map(Number),{clientWidth:t,clientHeight:r}=n,s=t/r,l=e[0]/e[1];s>l?((0,i.setStyle)(a,"width",l*r+"px"),(0,i.setStyle)(a,"height","100%"),(0,i.setStyle)(a,"margin","0 auto")):((0,i.setStyle)(a,"width","100%"),(0,i.setStyle)(a,"height",t/l+"px"),(0,i.setStyle)(a,"margin","auto 0")),n.dataset.aspectRatio=o}r.show=`${t.get("Aspect Ratio")}: ${"default"===o?t.get("Default"):o}`,e.emit("aspectRatio",o)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{notice:t,template:{$video:r}}=e,a=(0,i.createElement)("canvas");(0,i.def)(e,"getDataURL",{value:()=>new Promise(((e,i)=>{try{a.width=r.videoWidth,a.height=r.videoHeight,a.getContext("2d").drawImage(r,0,0),e(a.toDataURL("image/png"))}catch(n){t.show=n,i(n)}}))}),(0,i.def)(e,"getBlobUrl",{value:()=>new Promise(((e,i)=>{try{a.width=r.videoWidth,a.height=r.videoHeight,a.getContext("2d").drawImage(r,0,0),a.toBlob((t=>{e(URL.createObjectURL(t))}))}catch(n){t.show=n,i(n)}}))}),(0,i.def)(e,"screenshot",{value:async()=>{const t=await e.getDataURL();return(0,i.download)(t,`artplayer_${(0,i.secondToTime)(r.currentTime)}.png`),e.emit("screenshot",t),t}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../libs/screenfull"),n=i.interopDefault(a),o=e("../utils");r.default=function(e){const{i18n:t,notice:r,template:{$video:i,$player:a}}=e;e.once("video:loadedmetadata",(()=>{var s;n.default.isEnabled?(s=e,n.default.on("change",(()=>{s.emit("fullscreen",n.default.isFullscreen)})),(0,o.def)(s,"fullscreen",{get:()=>n.default.isFullscreen,async set(e){e?(s.state="fullscreen",await n.default.request(a),(0,o.addClass)(a,"art-fullscreen")):(await n.default.exit(),(0,o.removeClass)(a,"art-fullscreen")),s.emit("resize")}})):document.fullscreenEnabled||i.webkitSupportsFullscreen?(e=>{(0,o.def)(e,"fullscreen",{get:()=>i.webkitDisplayingFullscreen,set(t){t?(e.state="fullscreen",i.webkitEnterFullscreen(),e.emit("fullscreen",!0)):(i.webkitExitFullscreen(),e.emit("fullscreen",!1)),e.emit("resize")}})})(e):(0,o.def)(e,"fullscreen",{get:()=>!1,set(){r.show=t.get("Fullscreen Not Supported")}}),(0,o.def)(e,"fullscreen",(0,o.get)(e,"fullscreen"))}))}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);const i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=(()=>{if("undefined"==typeof document)return!1;const e=i[0],t={};for(const r of i)if(r[1]in document){for(const[i,a]of r.entries())t[e[i]]=a;return t}return!1})(),n={change:a.fullscreenchange,error:a.fullscreenerror};let o={request:(e=document.documentElement,t)=>new Promise(((r,i)=>{const n=()=>{o.off("change",n),r()};o.on("change",n);const s=e[a.requestFullscreen](t);s instanceof Promise&&s.then(n).catch(i)})),exit:()=>new Promise(((e,t)=>{if(!o.isFullscreen)return void e();const r=()=>{o.off("change",r),e()};o.on("change",r);const i=document[a.exitFullscreen]();i instanceof Promise&&i.then(r).catch(t)})),toggle:(e,t)=>o.isFullscreen?o.exit():o.request(e,t),onchange(e){o.on("change",e)},onerror(e){o.on("error",e)},on(e,t){const r=n[e];r&&document.addEventListener(r,t,!1)},off(e,t){const r=n[e];r&&document.removeEventListener(r,t,!1)},raw:a};Object.defineProperties(o,{isFullscreen:{get:()=>Boolean(document[a.fullscreenElement])},element:{enumerable:!0,get:()=>document[a.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>Boolean(document[a.fullscreenEnabled])}}),a||(o={isEnabled:!1}),r.default=o},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{constructor:t,template:{$container:r,$player:a}}=e;let n="";(0,i.def)(e,"fullscreenWeb",{get:()=>(0,i.hasClass)(a,"art-fullscreen-web"),set(o){o?(n=a.style.cssText,t.FULLSCREEN_WEB_IN_BODY&&(0,i.append)(document.body,a),e.state="fullscreenWeb",(0,i.setStyle)(a,"width","100%"),(0,i.setStyle)(a,"height","100%"),(0,i.addClass)(a,"art-fullscreen-web"),e.emit("fullscreenWeb",!0)):(t.FULLSCREEN_WEB_IN_BODY&&(0,i.append)(r,a),n&&(a.style.cssText=n,n=""),(0,i.removeClass)(a,"art-fullscreen-web"),e.emit("fullscreenWeb",!1)),e.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,notice:r,template:{$video:a}}=e;document.pictureInPictureEnabled?function(e){const{template:{$video:t},proxy:r,notice:a}=e;t.disablePictureInPicture=!1,(0,i.def)(e,"pip",{get:()=>document.pictureInPictureElement,set(r){r?(e.state="pip",t.requestPictureInPicture().catch((e=>{throw a.show=e,e}))):document.exitPictureInPicture().catch((e=>{throw a.show=e,e}))}}),r(t,"enterpictureinpicture",(()=>{e.emit("pip",!0)})),r(t,"leavepictureinpicture",(()=>{e.emit("pip",!1)}))}(e):a.webkitSupportsPresentationMode?function(e){const{$video:t}=e.template;t.webkitSetPresentationMode("inline"),(0,i.def)(e,"pip",{get:()=>"picture-in-picture"===t.webkitPresentationMode,set(r){r?(e.state="pip",t.webkitSetPresentationMode("picture-in-picture"),e.emit("pip",!0)):(t.webkitSetPresentationMode("inline"),e.emit("pip",!1))}})}(e):(0,i.def)(e,"pip",{get:()=>!1,set(){r.show=t.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{$video:t}=e.template;(0,i.def)(e,"loaded",{get:()=>e.loadedTime/t.duration}),(0,i.def)(e,"loadedTime",{get:()=>t.buffered.length?t.buffered.end(t.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"played",{get:()=>e.currentTime/e.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{$video:t}=e.template;(0,i.def)(e,"playing",{get:()=>!!(t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{$container:t,$player:r,$video:a}=e.template;(0,i.def)(e,"autoSize",{value(){const{videoWidth:n,videoHeight:o}=a,{width:s,height:l}=t.getBoundingClientRect(),d=n/o;if(s/l>d){const e=l*d/s*100;(0,i.setStyle)(r,"width",`${e}%`),(0,i.setStyle)(r,"height","100%")}else{const e=s/d/l*100;(0,i.setStyle)(r,"width","100%"),(0,i.setStyle)(r,"height",`${e}%`)}e.emit("autoSize",{width:e.width,height:e.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"rect",{get:()=>e.template.$player.getBoundingClientRect()});const t=["bottom","height","left","right","top","width"];for(let r=0;r<t.length;r++){const a=t[r];(0,i.def)(e,a,{get:()=>e.rect[a]})}(0,i.def)(e,"x",{get:()=>e.left+window.pageXOffset}),(0,i.def)(e,"y",{get:()=>e.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$player:t},i18n:r,notice:a}=e;(0,i.def)(e,"flip",{get:()=>t.dataset.flip||"normal",set(n){n||(n="normal"),"normal"===n?delete t.dataset.flip:t.dataset.flip=n,a.show=`${r.get("Video Flip")}: ${r.get((0,i.capitalize)(n))}`,e.emit("flip",n)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{icons:t,proxy:r,storage:a,template:{$player:n,$video:o}}=e;let s=!1,l=0,d=0;function c(){const{$mini:t}=e.template;t&&((0,i.removeClass)(n,"art-mini"),(0,i.setStyle)(t,"display","none"),n.prepend(o),e.emit("mini",!1))}function u(t,r){e.playing?((0,i.setStyle)(t,"display","none"),(0,i.setStyle)(r,"display","flex")):((0,i.setStyle)(t,"display","flex"),(0,i.setStyle)(r,"display","none"))}function h(){const{$mini:t}=e.template,r=t.getBoundingClientRect(),n=window.innerHeight-r.height-50,o=window.innerWidth-r.width-50;a.set("top",n),a.set("left",o),(0,i.setStyle)(t,"top",`${n}px`),(0,i.setStyle)(t,"left",`${o}px`)}(0,i.def)(e,"mini",{get:()=>(0,i.hasClass)(n,"art-mini"),set(p){if(p){e.state="mini",(0,i.addClass)(n,"art-mini");const p=function(){const{$mini:n}=e.template;if(n)return(0,i.append)(n,o),(0,i.setStyle)(n,"display","flex");{const n=(0,i.createElement)("div");(0,i.addClass)(n,"art-mini-popup"),(0,i.append)(document.body,n),e.template.$mini=n,(0,i.append)(n,o);const h=(0,i.append)(n,'<div class="art-mini-close"></div>');(0,i.append)(h,t.close),r(h,"click",c);const p=(0,i.append)(n,'<div class="art-mini-state"></div>'),f=(0,i.append)(p,t.play),m=(0,i.append)(p,t.pause);return r(f,"click",(()=>e.play())),r(m,"click",(()=>e.pause())),u(f,m),e.on("video:playing",(()=>u(f,m))),e.on("video:pause",(()=>u(f,m))),e.on("video:timeupdate",(()=>u(f,m))),r(n,"mousedown",(e=>{s=0===e.button,l=e.pageX,d=e.pageY})),e.on("document:mousemove",(e=>{if(s){(0,i.addClass)(n,"art-mini-droging");const t=e.pageX-l,r=e.pageY-d;(0,i.setStyle)(n,"transform",`translate(${t}px, ${r}px)`)}})),e.on("document:mouseup",(()=>{if(s){s=!1,(0,i.removeClass)(n,"art-mini-droging");const e=n.getBoundingClientRect();a.set("left",e.left),a.set("top",e.top),(0,i.setStyle)(n,"left",`${e.left}px`),(0,i.setStyle)(n,"top",`${e.top}px`),(0,i.setStyle)(n,"transform",null)}})),n}}(),f=a.get("top"),m=a.get("left");f&&m?((0,i.setStyle)(p,"top",`${f}px`),(0,i.setStyle)(p,"left",`${m}px`),(0,i.isInViewport)(p)||h()):h(),e.emit("mini",!0)}else c()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f1hVG:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){let t=[];(0,i.def)(e,"loop",{get:()=>t,set:r=>{if(Array.isArray(r)&&"number"==typeof r[0]&&"number"==typeof r[1]){const a=(0,i.clamp)(r[0],0,Math.min(r[1],e.duration)),n=(0,i.clamp)(r[1],a,e.duration);t=n-a>=1?[a,n]:[]}else t=[];e.emit("loop",t)}}),e.on("video:timeupdate",(()=>{t.length&&(e.currentTime<t[0]||e.currentTime>t[1])&&(e.seek=t[0])}))}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$poster:t}}=e;(0,i.def)(e,"poster",{get:()=>{try{return t.style.backgroundImage.match(/"(.*)"/)[1]}catch(e){return""}},set(e){(0,i.setStyle)(t,"backgroundImage",`url(${e})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{template:{$container:t,$video:r}}=e;(0,i.def)(e,"autoHeight",{value(){const{clientWidth:a}=t,{videoHeight:n,videoWidth:o}=r,s=n*(a/o);(0,i.setStyle)(t,"height",s+"px"),e.emit("autoHeight",s)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{$player:t}=e.template;(0,i.def)(e,"cssVar",{value:(e,r)=>r?t.style.setProperty(e,r):getComputedStyle(t).getPropertyValue(e)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"theme",{get:()=>e.cssVar("--art-theme"),set(t){e.cssVar("--art-theme",t)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"type",{get:()=>e.option.type,set(t){e.option.type=t}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const t=["mini","pip","fullscreen","fullscreenWeb"];(0,i.def)(e,"state",{get:()=>t.find((t=>e[t]))||"standard",set(r){for(let i=0;i<t.length;i++){const a=t[i];a!==r&&e[a]&&(e[a]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{clamp:t}=e.constructor.utils,{notice:r,template:a,i18n:n}=e;let o=0,s=[];e.on("subtitle:switch",(()=>{s=[]})),(0,i.def)(e,"subtitleOffset",{get:()=>o,set(i){if(a.$track&&a.$track.track){const l=Array.from(a.$track.track.cues);o=t(i,-5,5);for(let r=0;r<l.length;r++){const i=l[r];s[r]||(s[r]={startTime:i.startTime,endTime:i.endTime}),i.startTime=t(s[r].startTime+o,0,e.duration),i.endTime=t(s[r].endTime+o,0,e.duration)}e.subtitle.update(),r.show=`${n.get("Subtitle Offset")}: ${i}s`,e.emit("subtitleOffset",i)}else e.emit("subtitleOffset",0)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,notice:r,proxy:a,template:{$video:n}}=e;let o=!0;window.WebKitPlaybackTargetAvailabilityEvent&&n.webkitShowPlaybackTargetPicker?a(n,"webkitplaybacktargetavailabilitychanged",(e=>{switch(e.availability){case"available":o=!0;break;case"not-available":o=!1}})):o=!1,(0,i.def)(e,"airplay",{value(){o?(n.webkitShowPlaybackTargetPicker(),e.emit("airplay")):r.show=t.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){(0,i.def)(e,"quality",{set(t){const{controls:r,notice:i,i18n:a}=e,n=t.find((e=>e.default))||t[0];r.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:n?n.html:"",selector:t,async onSelect(t){await e.switchQuality(t.url),i.show=`${a.get("Switch Video")}: ${t.html}`}})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{option:t,storage:r,template:{$video:a,$poster:n}}=e;for(const i in t.moreVideoAttr)e.attr(i,t.moreVideoAttr[i]);t.muted&&(e.muted=t.muted),t.volume&&(a.volume=(0,i.clamp)(t.volume,0,1));const o=r.get("volume");"number"==typeof o&&(a.volume=(0,i.clamp)(o,0,1)),t.poster&&(0,i.setStyle)(n,"backgroundImage",`url(${t.poster})`),t.autoplay&&(a.autoplay=t.autoplay),t.playsInline&&(a.playsInline=!0,a["webkit-playsinline"]=!0),t.theme&&(t.cssVar["--art-theme"]=t.theme);for(const i in t.cssVar)e.cssVar(i,t.cssVar[i]);e.url=t.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../config"),n=i.interopDefault(a),o=e("../utils");r.default=function(e){const{i18n:t,notice:r,option:i,constructor:a,proxy:s,template:{$player:l,$video:d,$poster:c}}=e;let u=0;for(let o=0;o<n.default.events.length;o++)s(d,n.default.events[o],(t=>{e.emit(`video:${t.type}`,t)}));e.on("video:canplay",(()=>{u=0,e.loading.show=!1})),e.once("video:canplay",(()=>{e.loading.show=!1,e.controls.show=!0,e.mask.show=!0,e.isReady=!0,e.emit("ready")})),e.on("video:ended",(()=>{i.loop?(e.seek=0,e.play(),e.controls.show=!1,e.mask.show=!1):(e.controls.show=!0,e.mask.show=!0)})),e.on("video:error",(async n=>{u<a.RECONNECT_TIME_MAX?(await(0,o.sleep)(a.RECONNECT_SLEEP_TIME),u+=1,e.url=i.url,r.show=`${t.get("Reconnect")}: ${u}`,e.emit("error",n,u)):(e.mask.show=!0,e.loading.show=!1,e.controls.show=!0,(0,o.addClass)(l,"art-error"),await(0,o.sleep)(a.RECONNECT_SLEEP_TIME),r.show=t.get("Video Load Failed"),e.destroy(!1))})),e.on("video:loadedmetadata",(()=>{e.emit("resize"),o.isMobile&&(e.loading.show=!1,e.controls.show=!0,e.mask.show=!0)})),e.on("video:loadstart",(()=>{e.loading.show=!0,e.mask.show=!1,e.controls.show=!0})),e.on("video:pause",(()=>{e.controls.show=!0,e.mask.show=!0})),e.on("video:play",(()=>{e.mask.show=!1,(0,o.setStyle)(c,"display","none")})),e.on("video:playing",(()=>{e.mask.show=!1})),e.on("video:progress",(()=>{e.playing&&(e.loading.show=!1)})),e.on("video:seeked",(()=>{e.loading.show=!1})),e.on("video:seeking",(()=>{e.loading.show=!0,e.mask.show=!1})),e.on("video:timeupdate",(()=>{e.mask.show=!1})),e.on("video:waiting",(()=>{e.loading.show=!0,e.mask.show=!1}))}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils"),n=e("../utils/component"),o=i.interopDefault(n),s=e("./fullscreen"),l=i.interopDefault(s),d=e("./fullscreenWeb"),c=i.interopDefault(d),u=e("./pip"),h=i.interopDefault(u),p=e("./playAndPause"),f=i.interopDefault(p),m=e("./progress"),_=i.interopDefault(m),g=e("./time"),v=i.interopDefault(g),y=e("./volume"),b=i.interopDefault(y),S=e("./setting"),w=i.interopDefault(S),E=e("./thumbnails"),x=i.interopDefault(E),k=e("./screenshot"),A=i.interopDefault(k),T=e("./loop"),C=i.interopDefault(T),R=e("./airplay"),D=i.interopDefault(R);class L extends o.default{constructor(e){super(e),this.name="control";const{proxy:t,constructor:r,template:{$player:i}}=e;let n=Date.now();t(i,["click","mousemove","touchstart","touchmove"],(()=>{this.show=!0,(0,a.removeClass)(i,"art-hide-cursor"),(0,a.addClass)(i,"art-hover"),n=Date.now()})),e.on("video:timeupdate",(()=>{!e.isInput&&e.playing&&this.show&&Date.now()-n>=r.CONTROL_HIDE_TIME&&(this.show=!1,(0,a.addClass)(i,"art-hide-cursor"),(0,a.removeClass)(i,"art-hover"))})),this.init()}init(){const{option:e}=this.art;e.isLive||this.add((0,_.default)({name:"progress",position:"top",index:10})),!e.thumbnails.url||e.isLive||a.isMobile||this.add((0,x.default)({name:"thumbnails",position:"top",index:20})),this.add((0,C.default)({name:"loop",position:"top",index:30})),this.add((0,f.default)({name:"playAndPause",position:"left",index:10})),this.add((0,b.default)({name:"volume",position:"left",index:20})),e.isLive||this.add((0,v.default)({name:"time",position:"left",index:30})),e.quality.length&&(0,a.sleep)().then((()=>{this.art.quality=e.quality})),e.screenshot&&!a.isMobile&&this.add((0,A.default)({name:"screenshot",position:"right",index:20})),e.setting&&this.add((0,w.default)({name:"setting",position:"right",index:30})),e.pip&&this.add((0,h.default)({name:"pip",position:"right",index:40})),e.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,D.default)({name:"airplay",position:"right",index:50})),e.fullscreenWeb&&this.add((0,c.default)({name:"fullscreenWeb",position:"right",index:60})),e.fullscreen&&this.add((0,l.default)({name:"fullscreen",position:"right",index:70}));for(let t=0;t<e.controls.length;t++)this.add(e.controls[t])}add(e){const t="function"==typeof e?e(this.art):e,{$progress:r,$controlsLeft:i,$controlsRight:n}=this.art.template;switch(t.position){case"top":this.$parent=r;break;case"left":this.$parent=i;break;case"right":this.$parent=n;break;default:(0,a.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(t)}}r.default=L},{"../utils":"71aH7","../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./thumbnails":"eCVx2","./screenshot":"4KCF5","./loop":"2hIff","./airplay":"4IS2d","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./dom"),n=e("./format"),o=e("./error"),s=e("option-validator"),l=i.interopDefault(s),d=e("../scheme");r.default=class{constructor(e){this.id=0,this.art=e,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,a.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(e){const{$player:t}=this.art.template,r=`art-${this.name}-show`;e?(0,a.addClass)(t,r):(0,a.removeClass)(t,r),this.art.emit(this.name,e)}toggle(){this.show=!this.show}add(e){const t="function"==typeof e?e(this.art):e;if(t.html=t.html||"",(0,l.default)(t,d.ComponentOption),!this.$parent||!this.name||t.disable)return;const r=t.name||`${this.name}${this.id}`,i=this.cache.get(r);(0,o.errorHandle)(!i,`Can't add an existing [${r}] to the [${this.name}]`),this.id+=1;const n=(0,a.createElement)("div");(0,a.addClass)(n,`art-${this.name}`),(0,a.addClass)(n,`art-${this.name}-${r}`);const s=Array.from(this.$parent.children);n.dataset.index=t.index||this.id;const c=s.find((e=>Number(e.dataset.index)>=Number(n.dataset.index)));c?c.insertAdjacentElement("beforebegin",n):(0,a.append)(this.$parent,n),t.html&&(0,a.append)(n,t.html),t.style&&(0,a.setStyles)(n,t.style),t.tooltip&&(0,a.tooltip)(n,t.tooltip);const u=[];if(t.click){const e=this.art.events.proxy(n,"click",(e=>{e.preventDefault(),t.click.call(this.art,this,e)}));u.push(e)}return t.selector&&["left","right"].includes(t.position)&&this.addSelector(t,n,u),this[r]=n,this.cache.set(r,{$ref:n,events:u,option:t}),t.mounted&&t.mounted.call(this.art,n),n}addSelector(e,t,r){const{hover:i,proxy:o}=this.art.events;(0,a.addClass)(t,"art-control-selector");const s=(0,a.createElement)("div");(0,a.addClass)(s,"art-selector-value"),(0,a.append)(s,e.html),t.innerText="",(0,a.append)(t,s);const l=e.selector.map(((e,t)=>`<div class="art-selector-item ${e.default?"art-current":""}" data-index="${t}">${e.html}</div>`)).join(""),d=(0,a.createElement)("div");(0,a.addClass)(d,"art-selector-list"),(0,a.append)(d,l),(0,a.append)(t,d);const c=()=>{const e=(0,a.getStyle)(t,"width")/2-(0,a.getStyle)(d,"width")/2;d.style.left=`${e}px`};i(t,c);const u=o(d,"click",(async t=>{const r=(t.composedPath()||[]).find((e=>(0,a.hasClass)(e,"art-selector-item")));if(!r)return;(0,a.inverseClass)(r,"art-current");const i=Number(r.dataset.index),o=e.selector[i]||{};if(s.innerText=r.innerText,e.onSelect){const i=await e.onSelect.call(this.art,o,r,t);(0,n.isStringOrNumber)(i)&&(s.innerHTML=i)}c()}));r.push(u)}remove(e){const t=this.cache.get(e);(0,o.errorHandle)(t,`Can't find [${e}] from the [${this.name}]`),t.option.beforeUnmount&&t.option.beforeUnmount.call(this.art,t.$ref);for(let r=0;r<t.events.length;r++)this.art.events.remove(t.events[r]);this.cache.delete(e),delete this[e],(0,a.remove)(t.$ref)}update(e){return this.cache.get(e.name)&&this.remove(e.name),this.add(e)}}},{"./dom":"bSNiV","./format":"gapRl","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("Fullscreen"),mounted:e=>{const{proxy:r,icons:a,i18n:n}=t,o=(0,i.append)(e,a.fullscreenOn),s=(0,i.append)(e,a.fullscreenOff);(0,i.setStyle)(s,"display","none"),r(e,"click",(()=>{t.fullscreen=!t.fullscreen})),t.on("fullscreen",(t=>{t?((0,i.tooltip)(e,n.get("Exit Fullscreen")),(0,i.setStyle)(o,"display","none"),(0,i.setStyle)(s,"display","inline-flex")):((0,i.tooltip)(e,n.get("Fullscreen")),(0,i.setStyle)(o,"display","inline-flex"),(0,i.setStyle)(s,"display","none"))}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("Web Fullscreen"),mounted:e=>{const{proxy:r,icons:a,i18n:n}=t,o=(0,i.append)(e,a.fullscreenWebOn),s=(0,i.append)(e,a.fullscreenWebOff);(0,i.setStyle)(s,"display","none"),r(e,"click",(()=>{t.fullscreenWeb=!t.fullscreenWeb})),t.on("fullscreenWeb",(t=>{t?((0,i.tooltip)(e,n.get("Exit Web Fullscreen")),(0,i.setStyle)(o,"display","none"),(0,i.setStyle)(s,"display","inline-flex")):((0,i.tooltip)(e,n.get("Web Fullscreen")),(0,i.setStyle)(o,"display","inline-flex"),(0,i.setStyle)(s,"display","none"))}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("PIP Mode"),mounted:e=>{const{proxy:r,icons:a,i18n:n}=t;(0,i.append)(e,a.pip),r(e,"click",(()=>{t.pip=!t.pip})),t.on("pip",(t=>{(0,i.tooltip)(e,n.get(t?"Exit PIP Mode":"PIP Mode"))}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,mounted:e=>{const{proxy:r,icons:a,i18n:n}=t,o=(0,i.append)(e,a.play),s=(0,i.append)(e,a.pause);function l(){(0,i.setStyle)(o,"display","flex"),(0,i.setStyle)(s,"display","none")}function d(){(0,i.setStyle)(o,"display","none"),(0,i.setStyle)(s,"display","flex")}(0,i.tooltip)(o,n.get("Play")),(0,i.tooltip)(s,n.get("Pause")),r(o,"click",(()=>{t.play()})),r(s,"click",(()=>{t.pause()})),t.playing?d():l(),t.on("video:playing",(()=>{d()})),t.on("video:pause",(()=>{l()}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"getPosFromEvent",(()=>n)),i.export(r,"setCurrentTime",(()=>o));var a=e("../utils");function n(e,t){const{$progress:r}=e.template,{left:i}=r.getBoundingClientRect(),n=a.isMobile?t.touches[0].clientX:t.clientX,o=(0,a.clamp)(n-i,0,r.clientWidth),s=o/r.clientWidth*e.duration;return{second:s,time:(0,a.secondToTime)(s),width:o,percentage:(0,a.clamp)(o/r.clientWidth,0,1)}}function o(e,t){if(e.isRotate){const r=t.touches[0].clientY/e.height,i=r*e.duration;e.emit("setBar","played",r),e.seek=i}else{const{second:r,percentage:i}=n(e,t);e.emit("setBar","played",i),e.seek=r}}r.default=function(e){return t=>{const{icons:r,option:i,proxy:s}=t;return{...e,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:e=>{let l=!1;const d=(0,a.query)(".art-progress-hover",e),c=(0,a.query)(".art-progress-loaded",e),u=(0,a.query)(".art-progress-played",e),h=(0,a.query)(".art-progress-highlight",e),p=(0,a.query)(".art-progress-indicator",e),f=(0,a.query)(".art-progress-tip",e);function m(e,t){"loaded"===e&&(0,a.setStyle)(c,"width",100*t+"%"),"played"===e&&((0,a.setStyle)(u,"width",100*t+"%"),(0,a.setStyle)(p,"left",100*t+"%"))}r.indicator?(0,a.append)(p,r.indicator):(0,a.setStyle)(p,"backgroundColor","var(--art-theme)"),t.on("video:loadedmetadata",(()=>{for(let e=0;e<i.highlight.length;e++){const r=i.highlight[e],n=(0,a.clamp)(r.time,0,t.duration)/t.duration*100,o=`<span data-text="${r.text}" data-time="${r.time}" style="left: ${n}%"></span>`;(0,a.append)(h,o)}})),m("loaded",t.loaded),t.on("setBar",((e,t)=>{m(e,t)})),t.on("video:progress",(()=>{m("loaded",t.loaded)})),t.on("video:timeupdate",(()=>{m("played",t.played)})),t.on("video:ended",(()=>{m("played",1)})),a.isMobile||(s(e,"click",(e=>{e.target!==p&&o(t,e)})),s(e,"mousemove",(r=>{!function(e){const{width:r}=n(t,e);(0,a.setStyle)(d,"width",`${r}px`),(0,a.setStyle)(d,"display","flex")}(r),(0,a.setStyle)(f,"display","flex"),(0,a.includeFromEvent)(r,h)?function(r){const{width:i}=n(t,r),{text:o}=r.target.dataset;f.innerHTML=o;const s=f.clientWidth;i<=s/2?(0,a.setStyle)(f,"left",0):i>e.clientWidth-s/2?(0,a.setStyle)(f,"left",e.clientWidth-s+"px"):(0,a.setStyle)(f,"left",i-s/2+"px")}(r):function(r){const{width:i,time:o}=n(t,r);f.innerHTML=o;const s=f.clientWidth;i<=s/2?(0,a.setStyle)(f,"left",0):i>e.clientWidth-s/2?(0,a.setStyle)(f,"left",e.clientWidth-s+"px"):(0,a.setStyle)(f,"left",i-s/2+"px")}(r)})),s(e,"mouseleave",(()=>{(0,a.setStyle)(f,"display","none"),(0,a.setStyle)(d,"display","none")})),s(e,"mousedown",(e=>{l=0===e.button})),t.on("document:mousemove",(e=>{if(l){const{second:r,percentage:i}=n(t,e);m("played",i),t.seek=r}})),t.on("document:mouseup",(()=>{l&&(l=!1)})))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,style:i.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:e=>{function r(){const r=`${(0,i.secondToTime)(t.currentTime)} / ${(0,i.secondToTime)(t.duration)}`;r!==e.innerText&&(e.innerText=r)}r();const a=["video:loadedmetadata","video:timeupdate","video:progress"];for(let i=0;i<a.length;i++)t.on(a[i],r)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,mounted:e=>{const{proxy:r,icons:a}=t,n=(0,i.append)(e,a.volume),o=(0,i.append)(e,a.volumeClose),s=(0,i.append)(e,'<div class="art-volume-panel"></div>'),l=(0,i.append)(s,'<div class="art-volume-inner"></div>'),d=(0,i.append)(l,'<div class="art-volume-val"></div>'),c=(0,i.append)(l,'<div class="art-volume-slider"></div>'),u=(0,i.append)(c,'<div class="art-volume-handle"></div>'),h=(0,i.append)(u,'<div class="art-volume-loaded"></div>'),p=(0,i.append)(c,'<div class="art-volume-indicator"></div>');function f(e){const{top:t,height:r}=c.getBoundingClientRect();return 1-(e.clientY-t)/r}function m(){if(t.muted||0===t.volume)(0,i.setStyle)(n,"display","none"),(0,i.setStyle)(o,"display","flex"),(0,i.setStyle)(p,"top","100%"),(0,i.setStyle)(h,"top","100%"),d.innerText=0;else{const e=100*t.volume;(0,i.setStyle)(n,"display","flex"),(0,i.setStyle)(o,"display","none"),(0,i.setStyle)(p,"top",100-e+"%"),(0,i.setStyle)(h,"top",100-e+"%"),d.innerText=Math.floor(e)}}if(m(),t.on("video:volumechange",m),r(n,"click",(()=>{t.muted=!0})),r(o,"click",(()=>{t.muted=!1})),i.isMobile)(0,i.setStyle)(s,"display","none");else{let e=!1;r(c,"mousedown",(r=>{e=0===r.button,t.volume=f(r)})),t.on("document:mousemove",(r=>{e&&(t.muted=!1,t.volume=f(r))})),t.on("document:mouseup",(()=>{e&&(e=!1)}))}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("Show Setting"),mounted:e=>{const{proxy:r,icons:a,i18n:n}=t;(0,i.append)(e,a.setting),r(e,"click",(()=>{t.setting.toggle(),t.setting.updateStyle()})),t.on("setting",(t=>{(0,i.tooltip)(e,n.get(t?"Hide Setting":"Show Setting"))}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eCVx2:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils"),a=e("./progress");r.default=function(e){return t=>({...e,mounted:e=>{const{option:r,template:{$progress:n,$video:o},events:{proxy:s,loadImg:l}}=t;let d=null,c=!1,u=!1;s(n,"mousemove",(async s=>{if(!c){c=!0;const e=await l(r.thumbnails.url);d=e,u=!0}u&&((0,i.setStyle)(e,"display","flex"),function(s){const{width:l}=(0,a.getPosFromEvent)(t,s),{url:c,number:u,column:h,width:p,height:f}=r.thumbnails,m=p||d.naturalWidth/h,_=f||m/(o.videoWidth/o.videoHeight),g=n.clientWidth/u,v=Math.floor(l/g),y=Math.ceil(v/h)-1,b=v%h||h-1;(0,i.setStyle)(e,"backgroundImage",`url(${c})`),(0,i.setStyle)(e,"height",`${_}px`),(0,i.setStyle)(e,"width",`${m}px`),(0,i.setStyle)(e,"backgroundPosition",`-${b*m}px -${y*_}px`),l<=m/2?(0,i.setStyle)(e,"left",0):l>n.clientWidth-m/2?(0,i.setStyle)(e,"left",n.clientWidth-m+"px"):(0,i.setStyle)(e,"left",l-m/2+"px")}(s))})),s(n,"mouseleave",(()=>{(0,i.setStyle)(e,"display","none")})),t.on("hover",(t=>{t||(0,i.setStyle)(e,"display","none")}))}})}},{"../utils":"71aH7","./progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("Screenshot"),mounted:e=>{const{proxy:r,icons:a}=t;(0,i.append)(e,a.screenshot),r(e,"click",(()=>{t.screenshot()}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2hIff":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,mounted:e=>{const r=(0,i.append)(e,'<span class="art-loop-point"></span>'),a=(0,i.append)(e,'<span class="art-loop-point"></span>');t.on("loop",(n=>{n&&n.length?((0,i.setStyle)(e,"display","flex"),(0,i.setStyle)(r,"left",`calc(${n[0]/t.duration*100}% - ${r.clientWidth}px)`),(0,i.setStyle)(a,"left",n[1]/t.duration*100+"%")):(0,i.setStyle)(e,"display","none")}))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>({...e,tooltip:t.i18n.get("AirPlay"),mounted:e=>{const{proxy:r,icons:a}=t;(0,i.append)(e,a.airplay),r(e,"click",(()=>t.airplay()))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils"),n=e("../utils/component"),o=i.interopDefault(n),s=e("./playbackRate"),l=i.interopDefault(s),d=e("./aspectRatio"),c=i.interopDefault(d),u=e("./flip"),h=i.interopDefault(u),p=e("./info"),f=i.interopDefault(p),m=e("./version"),_=i.interopDefault(m),g=e("./close"),v=i.interopDefault(g);class y extends o.default{constructor(e){super(e),this.name="contextmenu",this.$parent=e.template.$contextmenu,a.isMobile||this.init()}init(){const{option:e,proxy:t,template:{$player:r,$contextmenu:i}}=this.art;e.playbackRate&&this.add((0,l.default)({name:"playbackRate",index:10})),e.aspectRatio&&this.add((0,c.default)({name:"aspectRatio",index:20})),e.flip&&this.add((0,h.default)({name:"flip",index:30})),this.add((0,f.default)({name:"info",index:40})),this.add((0,_.default)({name:"version",index:50})),this.add((0,v.default)({name:"close",index:60}));for(let a=0;a<e.contextmenu.length;a++)this.add(e.contextmenu[a]);t(r,"contextmenu",(e=>{if(e.preventDefault(),!this.art.constructor.CONTEXTMENU)return;this.show=!0;const t=e.clientX,n=e.clientY,{height:o,width:s,left:l,top:d}=r.getBoundingClientRect(),{height:c,width:u}=i.getBoundingClientRect();let h=t-l,p=n-d;t+u>l+s&&(h=s-u),n+c>d+o&&(p=o-c),(0,a.setStyles)(i,{top:`${p}px`,left:`${h}px`})})),t(r,"click",(e=>{(0,a.includeFromEvent)(e,i)||(this.show=!1)})),this.art.on("blur",(()=>{this.show=!1}))}}r.default=y},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>{const{i18n:r,constructor:{PLAYBACK_RATE:a}}=t,n=a.map((e=>`<span data-value="${e}">${1===e?r.get("Normal"):e.toFixed(1)}</span>`)).join("");return{...e,html:`${r.get("Play Speed")}: ${n}`,click:(e,r)=>{const{value:i}=r.target.dataset;i&&(t.playbackRate=Number(i),e.show=!1)},mounted:e=>{const r=(0,i.query)('[data-value="1"]',e);r&&(0,i.inverseClass)(r,"art-current"),t.on("video:ratechange",(()=>{const r=(0,i.queryAll)("span",e).find((e=>Number(e.dataset.value)===t.playbackRate));r&&(0,i.inverseClass)(r,"art-current")}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>{const{i18n:r,constructor:{ASPECT_RATIO:a}}=t,n=a.map((e=>`<span data-value="${e}">${"default"===e?r.get("Default"):e}</span>`)).join("");return{...e,html:`${r.get("Aspect Ratio")}: ${n}`,click:(e,r)=>{const{value:i}=r.target.dataset;i&&(t.aspectRatio=i,e.show=!1)},mounted:e=>{const r=(0,i.query)('[data-value="default"]',e);r&&(0,i.inverseClass)(r,"art-current"),t.on("aspectRatio",(t=>{const r=(0,i.queryAll)("span",e).find((e=>e.dataset.value===t));r&&(0,i.inverseClass)(r,"art-current")}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){return t=>{const{i18n:r,constructor:{FLIP:a}}=t,n=a.map((e=>`<span data-value="${e}">${r.get((0,i.capitalize)(e))}</span>`)).join("");return{...e,html:`${r.get("Video Flip")}: ${n}`,click:(e,r)=>{const{value:i}=r.target.dataset;i&&(t.flip=i.toLowerCase(),e.show=!1)},mounted:e=>{const r=(0,i.query)('[data-value="normal"]',e);r&&(0,i.inverseClass)(r,"art-current"),t.on("flip",(t=>{const r=(0,i.queryAll)("span",e).find((e=>e.dataset.value===t));r&&(0,i.inverseClass)(r,"art-current")}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return t=>({...e,html:t.i18n.get("Video Info"),click:e=>{t.info.show=!0,e.show=!1}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return{...e,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.0.9</a>'}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return t=>({...e,html:t.i18n.get("Close"),click:e=>{e.show=!1}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./utils"),n=e("./utils/component"),o=i.interopDefault(n);class s extends o.default{constructor(e){super(e),this.name="info",a.isMobile||this.init()}init(){const{proxy:e,constructor:t,template:{$infoPanel:r,$infoClose:i,$video:n}}=this.art;e(i,"click",(()=>{this.show=!1}));let o=null;const s=(0,a.queryAll)("[data-video]",r)||[];this.art.on("destroy",(()=>clearTimeout(o))),function e(){for(let t=0;t<s.length;t++){const e=s[t],r=n[e.dataset.video],i="number"==typeof r?r.toFixed(2):r;e.innerText!==i&&(e.innerText=i)}o=setTimeout(e,t.INFO_LOOP_TIME)}()}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./utils"),n=e("./utils/component"),o=i.interopDefault(n),s=e("option-validator"),l=i.interopDefault(s),d=e("./scheme"),c=i.interopDefault(d);class u extends o.default{constructor(e){super(e),this.name="subtitle",this.eventDestroy=()=>null,this.init(e.option.subtitle);let t=!1;e.on("video:timeupdate",(()=>{if(!this.url)return;const e=this.art.template.$video.webkitDisplayingFullscreen;"boolean"==typeof e&&e!==t&&(t=e,this.createTrack(e?"subtitles":"metadata",this.url))}))}get url(){return this.art.template.$track.src}set url(e){this.switch(e)}get textTrack(){return this.art.template.$video.textTracks[0]}get activeCue(){return this.textTrack.activeCues[0]}style(e,t){const{$subtitle:r}=this.art.template;return"object"==typeof e?(0,a.setStyles)(r,e):(0,a.setStyle)(r,e,t)}update(){const{$subtitle:e}=this.art.template;e.innerHTML="",this.activeCue&&(this.art.option.subtitle.escape?e.innerHTML=this.activeCue.text.split(/\r?\n/).map((e=>`<p>${(0,a.escape)(e)}</p>`)).join(""):e.innerHTML=this.activeCue.text,this.art.emit("subtitleUpdate",this.activeCue.text))}async switch(e,t={}){const{i18n:r,notice:i,option:a}=this.art,n={...a.subtitle,...t,url:e},o=await this.init(n);return t.name&&(i.show=`${r.get("Switch Subtitle")}: ${t.name}`),o}createTrack(e,t){const{template:r,proxy:i}=this.art,{$video:n,$track:o}=r,s=(0,a.createElement)("track");s.default=!0,s.kind=e,s.src=t,s.track.mode="hidden",this.eventDestroy(),(0,a.remove)(o),(0,a.append)(n,s),r.$track=s,this.eventDestroy=i(this.textTrack,"cuechange",(()=>this.update()))}async init(e){const{notice:t,template:{$subtitle:r}}=this.art;if((0,l.default)(e,c.default.subtitle),e.url)return this.style(e.style),fetch(e.url).then((e=>e.arrayBuffer())).then((t=>{const r=new TextDecoder(e.encoding).decode(t);switch(this.art.emit("subtitleLoad",e.url),e.type||(0,a.getExt)(e.url)){case"srt":{const t=(0,a.srtToVtt)(r),i=e.onVttLoad(t);return(0,a.vttToBlob)(i)}case"ass":{const t=(0,a.assToVtt)(r),i=e.onVttLoad(t);return(0,a.vttToBlob)(i)}case"vtt":{const t=e.onVttLoad(r);return(0,a.vttToBlob)(t)}default:return e.url}})).then((e=>(r.innerHTML="",this.url===e||(URL.revokeObjectURL(this.url),this.createTrack("metadata",e),this.art.emit("subtitleSwitch",e)),e))).catch((e=>{throw t.show=e,e}))}}r.default=u},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils/error"),n=e("./clickInit"),o=i.interopDefault(n),s=e("./hoverInit"),l=i.interopDefault(s),d=e("./moveInit"),c=i.interopDefault(d),u=e("./resizeInit"),h=i.interopDefault(u),p=e("./gestureInit"),f=i.interopDefault(p),m=e("./viewInit"),_=i.interopDefault(m),g=e("./documentInit"),v=i.interopDefault(g);r.default=class{constructor(e){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),(0,o.default)(e,this),(0,l.default)(e,this),(0,c.default)(e,this),(0,h.default)(e,this),(0,f.default)(e,this),(0,_.default)(e,this),(0,v.default)(e,this)}proxy(e,t,r,i={}){if(Array.isArray(t))return t.map((t=>this.proxy(e,t,r,i)));e.addEventListener(t,r,i);const a=()=>e.removeEventListener(t,r,i);return this.destroyEvents.push(a),a}hover(e,t,r){t&&this.proxy(e,"mouseenter",t),r&&this.proxy(e,"mouseleave",r)}loadImg(e){return new Promise(((t,r)=>{let i;if(e instanceof HTMLImageElement)i=e;else{if("string"!=typeof e)return r(new a.ArtPlayerError("Unable to get Image"));i=new Image,i.src=e}if(i.complete)return t(i);this.proxy(i,"load",(()=>t(i))),this.proxy(i,"error",(()=>r(new a.ArtPlayerError(`Failed to load Image: ${i.src}`))))}))}remove(e){const t=this.destroyEvents.indexOf(e);t>-1&&(e(),this.destroyEvents.splice(t,1))}destroy(){for(let e=0;e<this.destroyEvents.length;e++)this.destroyEvents[e]()}}},{"../utils/error":"hwmZz","./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e,t){const{constructor:r,template:{$player:a,$video:n}}=e;t.proxy(document,["click","contextmenu"],(t=>{(0,i.includeFromEvent)(t,a)?(e.isInput="INPUT"===t.target.tagName,e.isFocus=!0,e.emit("focus",t)):(e.isInput=!1,e.isFocus=!1,e.emit("blur",t))}));let o=0;t.proxy(n,"click",(t=>{const a=Date.now(),{MOBILE_CLICK_PLAY:n,DBCLICK_TIME:s,MOBILE_DBCLICK_PLAY:l,DBCLICK_FULLSCREEN:d}=r;a-o<=s?(e.emit("dblclick",t),i.isMobile?!e.isLock&&l&&e.toggle():d&&(e.fullscreen=!e.fullscreen)):(e.emit("click",t),i.isMobile?!e.isLock&&n&&e.toggle():e.toggle()),o=a}))}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e,t){const{$player:r}=e.template;t.hover(r,(t=>{(0,i.addClass)(r,"art-hover"),e.emit("hover",!0,t)}),(t=>{(0,i.removeClass)(r,"art-hover"),e.emit("hover",!1,t)}))}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){const{$player:r}=e.template;t.proxy(r,"mousemove",(t=>{e.emit("mousemove",t)}))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e,t){const{option:r,constructor:a}=e;e.on("resize",(()=>{const{aspectRatio:t,notice:i}=e;"standard"===e.state&&r.autoSize&&e.autoSize(),e.aspectRatio=t,i.show=""}));const n=(0,i.debounce)((()=>e.emit("resize")),a.RESIZE_TIME);t.proxy(window,["orientationchange","resize"],(()=>n())),screen&&screen.orientation&&screen.orientation.onchange&&t.proxy(screen.orientation,"change",(()=>n()))}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils"),a=e("../control/progress");r.default=function(e,t){if(i.isMobile&&!e.option.isLive){const{$video:r,$progress:n}=e.template;let o=null,s=!1,l=0,d=0,c=0;const u=t=>{if(1===t.touches.length&&!e.isLock){o===n&&(0,a.setCurrentTime)(e,t),s=!0;const{pageX:r,pageY:i}=t.touches[0];l=r,d=i,c=e.currentTime}},h=t=>{if(1===t.touches.length&&s&&e.duration){const{pageX:a,pageY:n}=t.touches[0],s=function(e,t,r,i){var a=t-i,n=r-e,o=0;if(Math.abs(n)<2&&Math.abs(a)<2)return o;var s,l,d=(s=n,l=a,180*Math.atan2(l,s)/Math.PI);return d>=-45&&d<45?o=4:d>=45&&d<135?o=1:d>=-135&&d<-45?o=2:(d>=135&&d<=180||d>=-180&&d<-135)&&(o=3),o}(l,d,a,n),u=[3,4].includes(s),h=[1,2].includes(s);if(u&&!e.isRotate||h&&e.isRotate){const t=(0,i.clamp)((a-l)/e.width,-1,1),s=(0,i.clamp)((n-d)/e.height,-1,1),u=e.isRotate?s:t,h=o===r?e.constructor.TOUCH_MOVE_RATIO:1,p=(0,i.clamp)(c+e.duration*u*h,0,e.duration);e.seek=p,e.emit("setBar","played",(0,i.clamp)(p/e.duration,0,1)),e.notice.show=`${(0,i.secondToTime)(p)} / ${(0,i.secondToTime)(e.duration)}`}}},p=()=>{s&&(l=0,d=0,c=0,s=!1,o=null)};t.proxy(n,"touchstart",(e=>{o=n,u(e)})),t.proxy(r,"touchstart",(e=>{o=r,u(e)})),t.proxy(r,"touchmove",h),t.proxy(n,"touchmove",h),t.proxy(document,"touchend",p)}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e,t){const{option:r,constructor:a,template:{$container:n}}=e,o=(0,i.throttle)((()=>{e.emit("view",(0,i.isInViewport)(n,a.SCROLL_GAP))}),a.SCROLL_TIME);t.proxy(window,"scroll",(()=>o())),e.on("view",(t=>{r.autoMini&&(e.mini=!t)}))}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){t.proxy(document,"mousemove",(t=>{e.emit("document:mousemove",t)})),t.proxy(document,"mouseup",(t=>{e.emit("document:mouseup",t)}))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("./utils");r.default=class{constructor(e){this.art=e,this.keys={},e.option.hotkey&&!i.isMobile&&this.init()}init(){const{proxy:e,constructor:t}=this.art;this.add(27,(()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)})),this.add(32,(()=>{this.art.toggle()})),this.add(37,(()=>{this.art.backward=t.SEEK_STEP})),this.add(38,(()=>{this.art.volume+=t.VOLUME_STEP})),this.add(39,(()=>{this.art.forward=t.SEEK_STEP})),this.add(40,(()=>{this.art.volume-=t.VOLUME_STEP})),e(window,"keydown",(e=>{if(this.art.isFocus){const t=document.activeElement.tagName.toUpperCase(),r=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==r&&"true"!==r){const t=this.keys[e.keyCode];if(t){e.preventDefault();for(let r=0;r<t.length;r++)t[r].call(this.art,e);this.art.emit("hotkey",e)}}}}))}add(e,t){return this.keys[e]?this.keys[e].push(t):this.keys[e]=[t],this}remove(e,t){if(this.keys[e]){const r=this.keys[e].indexOf(t);-1!==r&&this.keys[e].splice(r,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./utils/component"),n=i.interopDefault(a);class o extends n.default{constructor(e){super(e);const{option:t,template:{$layer:r}}=e;this.name="layer",this.$parent=r;for(let i=0;i<t.layers.length;i++)this.add(t.layers[i])}}r.default=o},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./utils"),n=e("./utils/component"),o=i.interopDefault(n);class s extends o.default{constructor(e){super(e),this.name="loading",(0,a.append)(e.template.$loading,e.icons.loading)}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("./utils");r.default=class{constructor(e){this.art=e,this.timer=null}set show(e){const{constructor:t,template:{$player:r,$noticeInner:a}}=this.art;e?(a.innerText=e instanceof Error?e.message.trim():e,(0,i.addClass)(r,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout((()=>{a.innerText="",(0,i.removeClass)(r,"art-notice-show")}),t.NOTICE_TIME)):(0,i.removeClass)(r,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./utils"),n=e("./utils/component"),o=i.interopDefault(n);class s extends o.default{constructor(e){super(e),this.name="mask";const{template:t,icons:r,events:i}=e,n=(0,a.append)(t.$state,r.state),o=(0,a.append)(t.$state,r.error);(0,a.setStyle)(o,"display","none"),e.on("destroy",(()=>{(0,a.setStyle)(n,"display","none"),(0,a.setStyle)(o,"display",null)})),i.proxy(t.$state,"click",(()=>e.play()))}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils"),n=e("bundle-text:./loading.svg"),o=i.interopDefault(n),s=e("bundle-text:./state.svg"),l=i.interopDefault(s),d=e("bundle-text:./check.svg"),c=i.interopDefault(d),u=e("bundle-text:./play.svg"),h=i.interopDefault(u),p=e("bundle-text:./pause.svg"),f=i.interopDefault(p),m=e("bundle-text:./volume.svg"),_=i.interopDefault(m),g=e("bundle-text:./volume-close.svg"),v=i.interopDefault(g),y=e("bundle-text:./screenshot.svg"),b=i.interopDefault(y),S=e("bundle-text:./setting.svg"),w=i.interopDefault(S),E=e("bundle-text:./arrow-left.svg"),x=i.interopDefault(E),k=e("bundle-text:./arrow-right.svg"),A=i.interopDefault(k),T=e("bundle-text:./playback-rate.svg"),C=i.interopDefault(T),R=e("bundle-text:./aspect-ratio.svg"),D=i.interopDefault(R),L=e("bundle-text:./config.svg"),I=i.interopDefault(L),P=e("bundle-text:./pip.svg"),M=i.interopDefault(P),O=e("bundle-text:./lock.svg"),B=i.interopDefault(O),j=e("bundle-text:./unlock.svg"),F=i.interopDefault(j),N=e("bundle-text:./fullscreen-off.svg"),U=i.interopDefault(N),V=e("bundle-text:./fullscreen-on.svg"),z=i.interopDefault(V),$=e("bundle-text:./fullscreen-web-off.svg"),H=i.interopDefault($),G=e("bundle-text:./fullscreen-web-on.svg"),q=i.interopDefault(G),W=e("bundle-text:./switch-on.svg"),Y=i.interopDefault(W),K=e("bundle-text:./switch-off.svg"),X=i.interopDefault(K),Z=e("bundle-text:./flip.svg"),J=i.interopDefault(Z),Q=e("bundle-text:./error.svg"),ee=i.interopDefault(Q),te=e("bundle-text:./close.svg"),re=i.interopDefault(te),ie=e("bundle-text:./airplay.svg"),ae=i.interopDefault(ie);r.default=class{constructor(e){const t={loading:o.default,state:l.default,play:h.default,pause:f.default,check:c.default,volume:_.default,volumeClose:v.default,screenshot:b.default,setting:w.default,pip:M.default,arrowLeft:x.default,arrowRight:A.default,playbackRate:C.default,aspectRatio:D.default,config:I.default,lock:B.default,flip:J.default,unlock:F.default,fullscreenOff:U.default,fullscreenOn:z.default,fullscreenWebOff:H.default,fullscreenWebOn:q.default,switchOn:Y.default,switchOff:X.default,error:ee.default,close:re.default,airplay:ae.default,...e.option.icons};for(const r in t)(0,a.def)(this,r,{get:()=>(0,a.getIcon)(r,t[r])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],"1ElZc":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],lmgoP:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],lVWoQ:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],"5Mnax":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],w3eIa:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],rHjo1:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],"2KcqM":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"8rQMV":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],kqGBE:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],aFjpC:[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],lx7ZM:[function(e,t,r){t.exports='<svg height="24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="__lottie_element_216"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url(\'#__lottie_element_216\')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>'},{}],fQTgE:[function(e,t,r){t.exports='<svg height="24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],aCGnW:[function(e,t,r){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],bTrAV:[function(e,t,r){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],bA3p0:[function(e,t,r){t.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],fTuY8:[function(e,t,r){t.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],tvKf4:[function(e,t,r){t.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"1F1oB":[function(e,t,r){t.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],"7qNHs":[function(e,t,r){t.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],"28aV8":[function(e,t,r){t.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],"1uXI6":[function(e,t,r){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"9f4dh":[function(e,t,r){t.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],"4nTtS":[function(e,t,r){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],cDPXC:[function(e,t,r){t.exports='<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./flip"),n=i.interopDefault(a),o=e("./aspectRatio"),s=i.interopDefault(o),l=e("./playbackRate"),d=i.interopDefault(l),c=e("./subtitleOffset"),u=i.interopDefault(c),h=e("../utils/component"),p=i.interopDefault(h),f=e("../utils/error"),m=e("../utils");class _ extends p.default{constructor(e){super(e);const{option:t,controls:r,template:{$setting:i}}=e;this.name="setting",this.$parent=i,this.option=[],this.events=[],this.cache=new Map,t.setting&&(this.init(),e.on("blur",(()=>{this.show&&(this.show=!1,this.render(this.option))})),e.on("focus",(e=>{const t=(0,m.includeFromEvent)(e,r.setting),i=(0,m.includeFromEvent)(e,this.$parent);!this.show||t||i||(this.show=!1,this.render(this.option))})))}static makeRecursion(e,t,r){for(let i=0;i<e.length;i++){const a=e[i];a.$parentItem=t,a.$parentList=r,_.makeRecursion(a.selector||[],a,e)}return e}get defaultSettings(){const e=[],{option:t}=this.art;return t.playbackRate&&e.push((0,d.default)(this.art)),t.aspectRatio&&e.push((0,s.default)(this.art)),t.flip&&e.push((0,n.default)(this.art)),t.subtitleOffset&&e.push((0,u.default)(this.art)),e}init(){const{option:e}=this.art,t=[...this.defaultSettings,...e.settings];this.option=_.makeRecursion(t),this.destroy(),this.render(this.option)}destroy(){for(let e=0;e<this.events.length;e++)this.art.events.remove(this.events[e]);this.$parent.innerHTML="",this.events=[],this.cache=new Map}find(e="",t=this.option){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e)return i;{const t=this.find(e,i.selector||[]);if(t)return t}}}remove(e){var t;const r=this.find(e);(0,f.errorHandle)(r,`Can't find [${e}] from the [setting]`);const i=(null==(t=r.$parentItem)?void 0:t.selector)||this.option;return i.splice(i.indexOf(r),1),this.option=_.makeRecursion(this.option),this.destroy(),this.render(this.option),this.option}update(e){const t=this.find(e.name);return t?(Object.assign(t,e),this.option=_.makeRecursion(this.option),this.destroy(),this.render(this.option)):this.add(e),this.option}add(e){return this.option.push(e),this.option=_.makeRecursion(this.option),this.destroy(),this.render(this.option),this.option}creatHeader(e){const{icons:t,proxy:r,constructor:i}=this.art,a=(0,m.createElement)("div");(0,m.setStyle)(a,"height",`${i.SETTING_ITEM_HEIGHT}px`),(0,m.addClass)(a,"art-setting-item"),(0,m.addClass)(a,"art-setting-item-back");const n=(0,m.append)(a,'<div class="art-setting-item-left"></div>'),o=(0,m.createElement)("div");(0,m.addClass)(o,"art-setting-item-left-icon"),(0,m.append)(o,t.arrowLeft),(0,m.append)(n,o),(0,m.append)(n,e.$parentItem.html);const s=r(a,"click",(()=>this.render(e.$parentList)));return this.events.push(s),a}creatItem(e,t){const{icons:r,proxy:i,constructor:a}=this.art,n=(0,m.createElement)("div");(0,m.addClass)(n,"art-setting-item"),(0,m.setStyle)(n,"height",`${a.SETTING_ITEM_HEIGHT}px`),(0,m.isStringOrNumber)(t.name)&&(n.dataset.name=t.name),(0,m.isStringOrNumber)(t.value)&&(n.dataset.value=t.value);const o=(0,m.append)(n,'<div class="art-setting-item-left"></div>'),s=(0,m.append)(n,'<div class="art-setting-item-right"></div>'),l=(0,m.createElement)("div");switch((0,m.addClass)(l,"art-setting-item-left-icon"),e){case"switch":case"range":(0,m.append)(l,(0,m.isStringOrNumber)(t.icon)||t.icon instanceof Element?t.icon:r.config);break;case"selector":t.selector&&t.selector.length?(0,m.append)(l,(0,m.isStringOrNumber)(t.icon)||t.icon instanceof Element?t.icon:r.config):(0,m.append)(l,r.check)}(0,m.append)(o,l),t.$icon=l,(0,m.def)(t,"icon",{configurable:!0,get:()=>l.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(l.innerHTML=e)}});const d=(0,m.createElement)("div");(0,m.addClass)(d,"art-setting-item-left-text"),(0,m.append)(d,t.html||""),(0,m.append)(o,d),t.$html=d,(0,m.def)(t,"html",{configurable:!0,get:()=>d.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(d.innerHTML=e)}});const c=(0,m.createElement)("div");switch((0,m.addClass)(c,"art-setting-item-right-tooltip"),(0,m.append)(c,t.tooltip||""),(0,m.append)(s,c),t.$tooltip=c,(0,m.def)(t,"tooltip",{configurable:!0,get:()=>c.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(c.innerHTML=e)}}),e){case"switch":{const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon");const i=(0,m.append)(e,r.switchOn),a=(0,m.append)(e,r.switchOff);(0,m.setStyle)(t.switch?a:i,"display","none"),(0,m.append)(s,e),t.$switch=t.switch,(0,m.def)(t,"switch",{configurable:!0,get:()=>t.$switch,set(e){t.$switch=e,e?((0,m.setStyle)(a,"display","none"),(0,m.setStyle)(i,"display",null)):((0,m.setStyle)(a,"display",null),(0,m.setStyle)(i,"display","none"))}});break}case"range":{const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon");const r=(0,m.append)(e,'<input type="range">');r.value=t.range[0]||0,r.min=t.range[1]||0,r.max=t.range[2]||10,r.step=t.range[3]||1,(0,m.addClass)(r,"art-setting-range"),(0,m.append)(s,e),t.$range=r,(0,m.def)(t,"range",{configurable:!0,get:()=>r.valueAsNumber,set(e){r.value=Number(e)}})}break;case"selector":if(t.selector&&t.selector.length){const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon"),(0,m.append)(e,r.arrowRight),(0,m.append)(s,e)}}switch(e){case"switch":if(t.onSwitch){const e=i(n,"click",(async e=>{t.switch=await t.onSwitch.call(this.art,t,n,e)}));this.events.push(e)}break;case"range":if(t.$range){if(t.onRange){const e=i(t.$range,"change",(async e=>{t.tooltip=await t.onRange.call(this.art,t,n,e)}));this.events.push(e)}if(t.onChange){const e=i(t.$range,"input",(async e=>{t.tooltip=await t.onChange.call(this.art,t,n,e)}));this.events.push(e)}}break;case"selector":{const e=i(n,"click",(async e=>{if(t.selector&&t.selector.length)this.render(t.selector,t.width);else{(0,m.inverseClass)(n,"art-current");for(let e=0;e<t.$parentItem.selector.length;e++){const r=t.$parentItem.selector[e];r.default=r===t}if(t.$parentList&&this.render(t.$parentList),t.$parentItem&&t.$parentItem.onSelect){const r=await t.$parentItem.onSelect.call(this.art,t,n,e);t.$parentItem.$tooltip&&(0,m.isStringOrNumber)(r)&&(t.$parentItem.$tooltip.innerHTML=r)}}}));this.events.push(e),t.default&&(0,m.addClass)(n,"art-current")}}return n}updateStyle(e){const{controls:t,constructor:r,template:{$player:i,$setting:a}}=this.art;if(t.setting&&!m.isMobile){const n=e||r.SETTING_WIDTH,{left:o,width:s}=t.setting.getBoundingClientRect(),{left:l,width:d}=i.getBoundingClientRect(),c=o-l+s/2-n/2;c+n>d?((0,m.setStyle)(a,"left",null),(0,m.setStyle)(a,"right",null)):((0,m.setStyle)(a,"left",`${c}px`),(0,m.setStyle)(a,"right","auto"))}}render(e,t){const{constructor:r}=this.art;if(this.cache.has(e)){const t=this.cache.get(e);(0,m.inverseClass)(t,"art-current"),(0,m.setStyle)(this.$parent,"width",`${t.dataset.width}px`),(0,m.setStyle)(this.$parent,"height",`${t.dataset.height}px`),this.updateStyle(Number(t.dataset.width))}else{const i=(0,m.createElement)("div");(0,m.addClass)(i,"art-setting-panel"),i.dataset.width=t||r.SETTING_WIDTH,i.dataset.height=e.length*r.SETTING_ITEM_HEIGHT,e[0]&&e[0].$parentItem&&((0,m.append)(i,this.creatHeader(e[0])),i.dataset.height=Number(i.dataset.height)+r.SETTING_ITEM_HEIGHT);for(let t=0;t<e.length;t++){const r=e[t];(0,m.has)(r,"switch")?(0,m.append)(i,this.creatItem("switch",r)):(0,m.has)(r,"range")?(0,m.append)(i,this.creatItem("range",r)):(0,m.append)(i,this.creatItem("selector",r))}(0,m.append)(this.$parent,i),this.cache.set(e,i),(0,m.inverseClass)(i,"art-current"),(0,m.setStyle)(this.$parent,"width",`${i.dataset.width}px`),(0,m.setStyle)(this.$parent,"height",`${i.dataset.height}px`),this.updateStyle(Number(i.dataset.width)),e[0]&&e[0].$parentItem&&e[0].$parentItem.mounted&&e[0].$parentItem.mounted.call(this.art,i,e[0].$parentItem)}}}r.default=_},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils/error":"hwmZz","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,icons:r,constructor:{SETTING_ITEM_WIDTH:a,FLIP:n}}=e;function o(e,r,a){r&&(r.innerText=t.get((0,i.capitalize)(a)));const n=(0,i.queryAll)(".art-setting-item",e).find((e=>e.dataset.value===a));n&&(0,i.inverseClass)(n,"art-current")}return{width:a,name:"flip",html:t.get("Video Flip"),tooltip:t.get((0,i.capitalize)(e.flip)),icon:r.flip,selector:n.map((r=>({value:r,name:`aspect-ratio-${r}`,default:r===e.flip,html:t.get((0,i.capitalize)(r))}))),onSelect:t=>(e.flip=t.value,t.html),mounted:(t,r)=>{o(t,r.$tooltip,e.flip),e.on("flip",(()=>{o(t,r.$tooltip,e.flip)}))}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,icons:r,constructor:{SETTING_ITEM_WIDTH:a,ASPECT_RATIO:n}}=e;function o(e){return"default"===e?t.get("Default"):e}function s(e,t,r){t&&(t.innerText=o(r));const a=(0,i.queryAll)(".art-setting-item",e).find((e=>e.dataset.value===r));a&&(0,i.inverseClass)(a,"art-current")}return{width:a,name:"aspect-ratio",html:t.get("Aspect Ratio"),icon:r.aspectRatio,tooltip:o(e.aspectRatio),selector:n.map((t=>({value:t,name:`aspect-ratio-${t}`,default:t===e.aspectRatio,html:o(t)}))),onSelect:t=>(e.aspectRatio=t.value,t.html),mounted:(t,r)=>{s(t,r.$tooltip,e.aspectRatio),e.on("aspectRatio",(()=>{s(t,r.$tooltip,e.aspectRatio)}))}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,icons:r,constructor:{SETTING_ITEM_WIDTH:a,PLAYBACK_RATE:n}}=e;function o(e){return 1===e?t.get("Normal"):e.toFixed(1)}function s(e,t,r){t&&(t.innerText=o(r));const a=(0,i.queryAll)(".art-setting-item",e).find((e=>Number(e.dataset.value)===r));a&&(0,i.inverseClass)(a,"art-current")}return{width:a,name:"playback-rate",html:t.get("Play Speed"),tooltip:o(e.playbackRate),icon:r.playbackRate,selector:n.map((t=>({value:t,name:`aspect-ratio-${t}`,default:t===e.playbackRate,html:o(t)}))),onSelect:t=>(e.playbackRate=t.value,t.html),mounted:(t,r)=>{s(t,r.$tooltip,e.playbackRate),e.on("video:ratechange",(()=>{s(t,r.$tooltip,e.playbackRate)}))}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){const{i18n:t,icons:r,constructor:i}=e;return{width:i.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:t.get("Subtitle Offset"),icon:r.subtitle,tooltip:"0s",range:[0,-5,5,.1],onChange:t=>(e.subtitleOffset=t.range,t.range+"s")}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(e){try{const t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}catch(t){return e?this.settings[e]:this.settings}}set(e,t){try{const r=Object.assign({},this.get(),{[e]:t});window.localStorage.setItem(this.name,JSON.stringify(r))}catch(r){this.settings[e]=t}}del(e){try{const t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}catch(t){delete this.settings[e]}}clear(){try{window.localStorage.removeItem(this.name)}catch(e){this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("../utils"),n=e("./miniProgressBar"),o=i.interopDefault(n),s=e("./autoOrientation"),l=i.interopDefault(s),d=e("./autoPlayback"),c=i.interopDefault(d),u=e("./fastForward"),h=i.interopDefault(u),p=e("./lock"),f=i.interopDefault(p);r.default=class{constructor(e){this.art=e,this.id=0;const{option:t}=e;t.miniProgressBar&&!t.isLive&&this.add(o.default),t.lock&&a.isMobile&&this.add(f.default),t.autoPlayback&&!t.isLive&&this.add(c.default),t.autoOrientation&&a.isMobile&&this.add(l.default),t.fastForward&&a.isMobile&&!t.isLive&&this.add(h.default);for(let r=0;r<t.plugins.length;r++)this.add(t.plugins[r])}add(e){this.id+=1;const t=e.call(this.art,this.art),r=t&&t.name||e.name||`plugin${this.id}`;return(0,a.errorHandle)(!(0,a.has)(this,r),`Cannot add a plugin that already has the same name: ${r}`),(0,a.def)(this,r,{value:t}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return e.on("ready",(()=>{e.layers.add({name:"mini-progress-bar",mounted(t){e.on("destroy",(()=>{t.style.display="none"})),e.on("video:timeupdate",(()=>{t.style.width=100*e.played+"%"})),e.on("setBar",((e,r)=>{"played"===e&&(t.style.width=100*r+"%")}))}})})),{name:"mini-progress-bar"}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{constructor:t,template:{$player:r,$video:a}}=e;return e.on("fullscreenWeb",(n=>{if(n){const{videoWidth:n,videoHeight:o}=a,{clientWidth:s,clientHeight:l}=document.documentElement;(n>o&&s<l||n<o&&s>l)&&setTimeout((()=>{(0,i.setStyle)(r,"width",`${l}px`),(0,i.setStyle)(r,"height",`${s}px`),(0,i.setStyle)(r,"transform-origin","0 0"),(0,i.setStyle)(r,"transform",`rotate(90deg) translate(0, -${s}px)`),(0,i.addClass)(r,"art-auto-orientation"),e.isRotate=!0,e.emit("resize")}),t.AUTO_ORIENTATION_TIME)}else(0,i.hasClass)(r,"art-auto-orientation")&&((0,i.removeClass)(r,"art-auto-orientation"),e.isRotate=!1,e.emit("resize"))})),e.on("fullscreen",(async e=>{const t=screen.orientation.type;if(e){const{videoWidth:e,videoHeight:n}=a,{clientWidth:o,clientHeight:s}=document.documentElement;if(e>n&&o<s||e<n&&o>s){const e=t.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(e),(0,i.addClass)(r,"art-auto-orientation-fullscreen")}}else(0,i.hasClass)(r,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(t),(0,i.removeClass)(r,"art-auto-orientation-fullscreen"))})),{name:"autoOrientation",get state(){return(0,i.hasClass)(r,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{i18n:t,icons:r,storage:a,constructor:n,proxy:o,template:{$poster:s}}=e,l=e.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),d=(0,i.query)(".art-auto-playback-last",l),c=(0,i.query)(".art-auto-playback-jump",l),u=(0,i.query)(".art-auto-playback-close",l);return e.on("video:timeupdate",(()=>{if(e.playing){const t=a.get("times")||{},r=Object.keys(t);r.length>n.AUTO_PLAYBACK_MAX&&delete t[r[0]],t[e.option.id||e.option.url]=e.currentTime,a.set("times",t)}})),e.on("ready",(()=>{const h=(a.get("times")||{})[e.option.id||e.option.url];h&&h>=n.AUTO_PLAYBACK_MIN&&((0,i.append)(u,r.close),(0,i.setStyle)(l,"display","flex"),d.innerText=`${t.get("Last Seen")} ${(0,i.secondToTime)(h)}`,c.innerText=t.get("Jump Play"),o(u,"click",(()=>{(0,i.setStyle)(l,"display","none")})),o(c,"click",(()=>{e.seek=h,e.play(),(0,i.setStyle)(s,"display","none"),(0,i.setStyle)(l,"display","none")})),e.once("video:timeupdate",(()=>{setTimeout((()=>{(0,i.setStyle)(l,"display","none")}),n.AUTO_PLAYBACK_TIMEOUT)})))})),{name:"auto-playback",get times(){return a.get("times")||{}},clear:()=>a.del("times"),delete(e){const t=a.get("times")||{};return delete t[e],a.set("times",t),t}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{constructor:t,proxy:r,template:{$player:a,$video:n}}=e;let o=null,s=!1,l=1;const d=()=>{clearTimeout(o),s&&(s=!1,e.playbackRate=l,(0,i.removeClass)(a,"art-fast-forward"))};return r(n,"touchstart",(r=>{1===r.touches.length&&e.playing&&!e.isLock&&(o=setTimeout((()=>{s=!0,l=e.playbackRate,e.playbackRate=t.FAST_FORWARD_VALUE,(0,i.addClass)(a,"art-fast-forward")}),t.FAST_FORWARD_TIME))})),r(document,"touchmove",d),r(document,"touchend",d),{name:"fastForward",get state(){return(0,i.hasClass)(a,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("../utils");r.default=function(e){const{layers:t,icons:r,template:{$player:a}}=e;return t.add({name:"lock",mounted(t){const a=(0,i.append)(t,r.lock),n=(0,i.append)(t,r.unlock);(0,i.setStyle)(a,"display","none"),e.on("lock",(e=>{e?((0,i.setStyle)(a,"display","inline-flex"),(0,i.setStyle)(n,"display","none")):((0,i.setStyle)(a,"display","none"),(0,i.setStyle)(n,"display","inline-flex"))}))},click(){(0,i.hasClass)(a,"art-lock")?((0,i.removeClass)(a,"art-lock"),this.isLock=!1,e.emit("lock",!1)):((0,i.addClass)(a,"art-lock"),this.isLock=!0,e.emit("lock",!0))}}),{name:"lock",get state(){return(0,i.hasClass)(a,"art-lock")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0");const D=t(R.exports);var L={exports:{}};
/*!
 * artplayer-plugin-danmuku.js v5.0.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2023 Harvey Zack
 * Released under the MIT License.
 */!function(t,r){!function(r,i,a,n,o){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},l="function"==typeof s[n]&&s[n],d=l.cache||{},c=T.bind(t);function u(e,t){if(!d[e]){if(!r[e]){var i="function"==typeof s[n]&&s[n];if(!t&&i)return i(e,!0);if(l)return l(e,!0);if(c&&"string"==typeof e)return c(e);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}h.resolve=function(t){var i=r[e][1][t];return null!=i?i:t},h.cache={};var o=d[e]=new u.Module(e);r[e][0].call(o.exports,h,o,o.exports,this)}return d[e].exports;function h(e){var t=h.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=r,u.cache=d,u.parent=l,u.register=function(e,t){r[e]=[function(e,r){r.exports=t},{}]},Object.defineProperty(u,"root",{get:function(){return s[n]}}),s[n]=u;for(var h=0;h<i.length;h++)u(i[h]);if(a){var p=u(a);t.exports=p}}({bgm6t:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./danmuku"),n=i.interopDefault(a),o=e("./setting"),s=i.interopDefault(o),l=e("./heatmap"),d=i.interopDefault(l);function c(e){return t=>{!function(e){const{version:t,utils:{errorHandle:r}}=e.constructor,i=t.split(".").map(Number);r(i[0]+i[1]/100>=5,`Artplayer.js@${t} 不兼容该弹幕库，请更新到 Artplayer.js@5.x.x 版本以上`)}(t);const r=new n.default(t,e);return(0,s.default)(t,r),e.heatmap&&!t.option.isLive&&(0,d.default)(t,r,e.heatmap),{name:"artplayerPluginDanmuku",emit:r.emit.bind(r),load:r.load.bind(r),config:r.config.bind(r),hide:r.hide.bind(r),show:r.show.bind(r),reset:r.reset.bind(r),get option(){return r.option},get isHide(){return r.isHide},get isStop(){return r.isStop}}}}r.default=c,c.env="production",c.version="5.0.1",c.build="2023-05-03 11:57:31","undefined"!=typeof window&&(window.artplayerPluginDanmuku=c)},{"./danmuku":"4ns48","./setting":"lO8OT","./heatmap":"8AxLD","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4ns48":[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("./bilibili"),n=e("./getDanmuTop"),o=i.interopDefault(n);class s{constructor(t,r){const{constructor:i,template:a}=t;if(this.utils=i.utils,this.validator=i.validator,this.$danmuku=a.$danmuku,this.$player=a.$player,this.art=t,this.danmus=[],this.queue=[],this.option={},this.$refs=[],this.isStop=!1,this.isHide=!1,this.timer=null,this.config(r),this.option.useWorker)try{this.worker=new Worker(e("12ceab24749100d0"))}catch(n){}this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.reset=this.reset.bind(this),this.destroy=this.destroy.bind(this),t.on("video:play",this.start),t.on("video:playing",this.start),t.on("video:pause",this.stop),t.on("video:waiting",this.stop),t.on("resize",this.reset),t.on("destroy",this.destroy),this.load()}static get option(){return{danmuku:[],speed:5,margin:["2%","25%"],opacity:1,color:"#FFFFFF",mode:0,fontSize:25,filter:()=>!0,antiOverlap:!0,useWorker:!0,synchronousPlayback:!1,lockTime:5,maxLength:100,minWidth:200,maxWidth:400,mount:void 0,theme:"dark",heatmap:!1,beforeEmit:()=>!0}}static get scheme(){return{danmuku:"array|function|string",speed:"number",margin:"array",opacity:"number",color:"string",mode:"number",fontSize:"number|string",filter:"function",antiOverlap:"boolean",useWorker:"boolean",synchronousPlayback:"boolean",lockTime:"number",maxLength:"number",minWidth:"number",maxWidth:"number",mount:"undefined|htmldivelement",theme:"string",heatmap:"object|boolean",beforeEmit:"function"}}get isRotate(){return this.art.plugins.autoOrientation&&this.art.plugins.autoOrientation.state}get marginTop(){const{clamp:e}=this.utils,t=this.option.margin[0],{clientHeight:r}=this.$player;return"number"==typeof t?e(t,0,r):"string"==typeof t&&t.endsWith("%")?e(r*(parseFloat(t)/100),0,r):s.option.margin[0]}get marginBottom(){const{clamp:e}=this.utils,t=this.option.margin[1],{clientHeight:r}=this.$player;return"number"==typeof t?e(t,0,r):"string"==typeof t&&t.endsWith("%")?e(r*(parseFloat(t)/100),0,r):s.option.margin[1]}filter(e,t){return this.queue.filter((t=>t.$state===e)).map(t)}getLeft(e){const t=e.getBoundingClientRect();return this.isRotate?t.top:t.left}getRef(){const e=this.$refs.pop();if(e)return e;const t=document.createElement("div");return t.style.cssText='\n            user-select: none;\n            position: absolute;\n            white-space: pre;\n            pointer-events: none;\n            perspective: 500px;\n            display: inline-block;\n            will-change: transform;\n            font-weight: normal;\n            line-height: 1.125;\n            visibility: hidden;\n            font-family: SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif;\n            text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;\n        ',t}getReady(){const{currentTime:e}=this.art;return this.queue.filter((t=>"ready"===t.$state||"wait"===t.$state&&e+.1>=t.time&&t.time>=e-.1))}getEmits(){const e=[],{clientWidth:t}=this.$player,r=this.getLeft(this.$player);return this.filter("emit",(i=>{const a=i.$ref.offsetTop,n=this.getLeft(i.$ref)-r,o=i.$ref.clientHeight,s=i.$ref.clientWidth,l=n+s,d=t-l,c=l/i.$restTime,u={};u.top=a,u.left=n,u.height=o,u.width=s,u.right=d,u.speed=c,u.distance=l,u.time=i.$restTime,u.mode=i.mode,e.push(u)})),e}getFontSize(e){const{clamp:t}=this.utils,{clientHeight:r}=this.$player;return"number"==typeof e?t(e,12,r):"string"==typeof e&&e.endsWith("%")?t(r*(parseFloat(e)/100),12,r):s.option.fontSize}postMessage(e={}){return new Promise((t=>{if(this.option.useWorker&&this.worker&&this.worker.postMessage)e.id=Date.now(),this.worker.postMessage(e),this.worker.onmessage=r=>{const{data:i}=r;i.id===e.id&&t(i)};else{const r=(0,o.default)(e);t({top:r})}}))}async load(){try{"function"==typeof this.option.danmuku?this.danmus=await this.option.danmuku():"function"==typeof this.option.danmuku.then?this.danmus=await this.option.danmuku:"string"==typeof this.option.danmuku?this.danmus=await(0,a.bilibiliDanmuParseFromUrl)(this.option.danmuku):this.danmus=this.option.danmuku,this.utils.errorHandle(Array.isArray(this.danmus),"Danmuku need return an array as result"),this.art.emit("artplayerPluginDanmuku:loaded",this.danmus),this.queue=[],this.$danmuku.innerText="",this.danmus.forEach((e=>this.emit(e)))}catch(e){throw this.art.emit("artplayerPluginDanmuku:error",e),e}return this}config(e){const{clamp:t}=this.utils;return this.option=Object.assign({},s.option,this.option,e),this.validator(this.option,s.scheme),this.option.speed=t(this.option.speed,1,10),this.option.opacity=t(this.option.opacity,0,1),this.option.lockTime=t(Math.floor(this.option.lockTime),0,60),this.option.maxLength=t(this.option.maxLength,0,500),this.option.minWidth=t(this.option.minWidth,0,500),this.option.maxWidth=t(this.option.maxWidth,0,1/0),e.fontSize&&(this.option.fontSize=this.getFontSize(this.option.fontSize),this.reset()),this.art.emit("artplayerPluginDanmuku:config",this.option),this}makeWait(e){e.$state="wait",e.$ref&&(e.$ref.style.visibility="hidden",e.$ref.style.marginLeft="0px",e.$ref.style.transform="translateX(0px)",e.$ref.style.transition="transform 0s linear 0s",this.$refs.push(e.$ref),e.$ref=null)}continue(){const{clientWidth:e}=this.$player;return this.filter("stop",(t=>{switch(t.$state="emit",t.$lastStartTime=Date.now(),t.mode){case 0:{const r=e+t.$ref.clientWidth;t.$ref.style.transform=`translateX(${-r}px)`,t.$ref.style.transition=`transform ${t.$restTime}s linear 0s`;break}}})),this}suspend(){const{clientWidth:e}=this.$player;return this.filter("emit",(t=>{switch(t.$state="stop",t.mode){case 0:{const r=e-(this.getLeft(t.$ref)-this.getLeft(this.$player));t.$ref.style.transform=`translateX(${-r}px)`,t.$ref.style.transition="transform 0s linear 0s";break}}})),this}reset(){return this.queue.forEach((e=>this.makeWait(e))),this}update(){return this.timer=window.requestAnimationFrame((async()=>{if(this.art.playing&&!this.isHide){this.filter("emit",(e=>{const t=(Date.now()-e.$lastStartTime)/1e3;e.$restTime-=t,e.$lastStartTime=Date.now(),e.$restTime<=0&&this.makeWait(e)}));const e=this.getReady(),{clientWidth:t,clientHeight:r}=this.$player;for(let i=0;i<e.length;i++){const a=e[i];a.$ref=this.getRef(),a.$ref.innerText=a.text,this.$danmuku.appendChild(a.$ref),a.$ref.style.left=`${t}px`,a.$ref.style.opacity=this.option.opacity,a.$ref.style.fontSize=`${this.option.fontSize}px`,a.$ref.style.color=a.color,a.$ref.style.border=a.border?`1px solid ${a.color}`:null,a.$ref.style.backgroundColor=a.border?"rgb(0 0 0 / 50%)":null,a.$ref.style.marginLeft="0px",a.$lastStartTime=Date.now(),a.$restTime=this.option.synchronousPlayback&&this.art.playbackRate?this.option.speed/Number(this.art.playbackRate):this.option.speed;const n={mode:a.mode,height:a.$ref.clientHeight,speed:(t+a.$ref.clientWidth)/a.$restTime},{top:o}=await this.postMessage({target:n,emits:this.getEmits(),antiOverlap:this.option.antiOverlap,clientWidth:t,clientHeight:r,marginBottom:this.marginBottom,marginTop:this.marginTop});if(a.$ref)if(this.isStop||void 0===o)a.$state="ready",this.$refs.push(a.$ref),a.$ref=null;else switch(a.$state="emit",a.$ref.style.visibility="visible",a.mode){case 0:{a.$ref.style.top=`${o}px`;const e=t+a.$ref.clientWidth;a.$ref.style.transform=`translateX(${-e}px)`,a.$ref.style.transition=`transform ${a.$restTime}s linear 0s`;break}case 1:a.$ref.style.left="50%",a.$ref.style.top=`${o}px`,a.$ref.style.marginLeft=`-${a.$ref.clientWidth/2}px`}}}this.isStop||this.update()})),this}stop(){return this.isStop=!0,this.suspend(),window.cancelAnimationFrame(this.timer),this.art.emit("artplayerPluginDanmuku:stop"),this}start(){return this.isStop=!1,this.continue(),this.update(),this.art.emit("artplayerPluginDanmuku:start"),this}show(){return this.isHide=!1,this.start(),this.$danmuku.style.display="block",this.art.emit("artplayerPluginDanmuku:show"),this}hide(){return this.isHide=!0,this.stop(),this.queue.forEach((e=>this.makeWait(e))),this.$danmuku.style.display="none",this.art.emit("artplayerPluginDanmuku:hide"),this}emit(e){return this.validator(e,{text:"string",mode:"number|undefined",color:"string|undefined",time:"number|undefined",border:"boolean|undefined"}),e.text.trim()&&this.option.filter(e)?(e.time?e.time=this.utils.clamp(e.time,0,1/0):e.time=this.art.currentTime+.5,void 0===e.mode&&(e.mode=this.option.mode),void 0===e.color&&(e.color=this.option.color),this.queue.push({...e,$state:"wait",$ref:null,$restTime:0,$lastStartTime:0}),this):this}destroy(){this.stop(),this.worker&&this.worker.terminate&&this.worker.terminate(),this.art.off("video:play",this.start),this.art.off("video:playing",this.start),this.art.off("video:pause",this.stop),this.art.off("video:waiting",this.stop),this.art.off("resize",this.reset),this.art.off("destroy",this.destroy),this.art.emit("artplayerPluginDanmuku:destroy")}}r.default=s},{"./bilibili":"f83sx","./getDanmuTop":"jPSuD","12ceab24749100d0":"fXq73","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f83sx:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){switch(e){case 1:case 2:case 3:default:return 0;case 4:case 5:return 1}}function n(e){if("string"!=typeof e)return[];const t=e.matchAll(/<d (?:.*? )??p="(?<p>.+?)"(?: .*?)?>(?<text>.+?)<\/d>/gs);return Array.from(t).map((e=>{const t=e.groups.p.split(",");return t.length>=8?{text:e.groups.text.trim().replaceAll("&quot;",'"').replaceAll("&apos;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),time:Number(t[0]),mode:a(Number(t[1])),fontSize:Number(t[2]),color:`#${Number(t[3]).toString(16)}`,timestamp:Number(t[4]),pool:Number(t[5]),userID:t[6],rowID:Number(t[7])}:null})).filter(Boolean)}function o(e){return fetch(e).then((e=>e.text())).then((e=>n(e)))}i.defineInteropFlag(r),i.export(r,"getMode",(()=>a)),i.export(r,"bilibiliDanmuParseFromXml",(()=>n)),i.export(r,"bilibiliDanmuParseFromUrl",(()=>o))},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach((function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],jPSuD:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function({target:e,emits:t,clientWidth:r,clientHeight:i,marginBottom:a,marginTop:n,antiOverlap:o}){const s=t.filter((t=>t.mode===e.mode&&t.top<=i-a)).sort(((e,t)=>e.top-t.top));if(0===s.length)return n;s.unshift({top:0,left:0,right:0,height:n,width:r,speed:0,distance:r}),s.push({top:i-a,left:0,right:0,height:a,width:r,speed:0,distance:r});for(let d=1;d<s.length;d+=1){const t=s[d],r=s[d-1],i=r.top+r.height;if(t.top-i>=e.height)return i}const l=[];for(let d=1;d<s.length-1;d+=1){const e=s[d];if(l.length){const t=l[l.length-1];t[0].top===e.top?t.push(e):l.push([e])}else l.push([e])}if(!o){switch(e.mode){case 0:l.sort(((e,t)=>{const r=Math.min(...t.map((e=>e.right))),i=Math.min(...e.map((e=>e.right)));return r*t.length-i*e.length}));break;case 1:l.sort(((e,t)=>{const r=Math.max(...t.map((e=>e.width)));return Math.max(...e.map((e=>e.width)))*e.length-r*t.length}))}return l[0][0].top}switch(e.mode){case 0:{const t=l.find((t=>t.every((t=>!(r<t.distance)&&(e.speed<t.speed||t.right/(e.speed-t.speed)>t.time)))));return t&&t[0]?t[0].top:void 0}case 1:return}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fXq73:[function(e,t,r){t.exports="data:application/javascript,function%20getDanmuTop%28%7Btarget%3At%2Cemits%3Ae%2CclientWidth%3An%2CclientHeight%3Ai%2CmarginBottom%3As%2CmarginTop%3Ah%2CantiOverlap%3Ao%7D%29%7Bconst%20r%3De.filter%28%28e%3D%3Ee.mode%3D%3D%3Dt.mode%26%26e.top%3C%3Di-s%29%29.sort%28%28%28t%2Ce%29%3D%3Et.top-e.top%29%29%3Bif%280%3D%3D%3Dr.length%29return%20h%3Br.unshift%28%7Btop%3A0%2Cleft%3A0%2Cright%3A0%2Cheight%3Ah%2Cwidth%3An%2Cspeed%3A0%2Cdistance%3An%7D%29%2Cr.push%28%7Btop%3Ai-s%2Cleft%3A0%2Cright%3A0%2Cheight%3As%2Cwidth%3An%2Cspeed%3A0%2Cdistance%3An%7D%29%3Bfor%28let%20e%3D1%3Be%3Cr.length%3Be%2B%3D1%29%7Bconst%20n%3Dr%5Be%5D%2Ci%3Dr%5Be-1%5D%2Cs%3Di.top%2Bi.height%3Bif%28n.top-s%3E%3Dt.height%29return%20s%7Dconst%20p%3D%5B%5D%3Bfor%28let%20t%3D1%3Bt%3Cr.length-1%3Bt%2B%3D1%29%7Bconst%20e%3Dr%5Bt%5D%3Bif%28p.length%29%7Bconst%20t%3Dp%5Bp.length-1%5D%3Bt%5B0%5D.top%3D%3D%3De.top%3Ft.push%28e%29%3Ap.push%28%5Be%5D%29%7Delse%20p.push%28%5Be%5D%29%7Dif%28%21o%29%7Bswitch%28t.mode%29%7Bcase%200%3Ap.sort%28%28%28t%2Ce%29%3D%3E%7Bconst%20n%3DMath.min%28...e.map%28%28t%3D%3Et.right%29%29%29%2Ci%3DMath.min%28...t.map%28%28t%3D%3Et.right%29%29%29%3Breturn%20n%2ae.length-i%2at.length%7D%29%29%3Bbreak%3Bcase%201%3Ap.sort%28%28%28t%2Ce%29%3D%3E%7Bconst%20n%3DMath.max%28...e.map%28%28t%3D%3Et.width%29%29%29%3Breturn%20Math.max%28...t.map%28%28t%3D%3Et.width%29%29%29%2at.length-n%2ae.length%7D%29%29%7Dreturn%20p%5B0%5D%5B0%5D.top%7Dswitch%28t.mode%29%7Bcase%200%3A%7Bconst%20e%3Dp.find%28%28e%3D%3Ee.every%28%28e%3D%3E%7Bif%28n%3Ce.distance%29return%211%3Bif%28t.speed%3Ce.speed%29return%210%3Breturn%20e.right%2F%28t.speed-e.speed%29%3Ee.time%7D%29%29%29%29%3Breturn%20e%26%26e%5B0%5D%3Fe%5B0%5D.top%3Avoid%200%7Dcase%201%3Areturn%7D%7Donmessage%3Dt%3D%3E%7Bconst%7Bdata%3Ae%7D%3Dt%2Cn%3DgetDanmuTop%28e%29%3Bself.postMessage%28%7Btop%3An%2Cid%3Ae.id%7D%29%7D%3B"},{}],lO8OT:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r);var a=e("bundle-text:./style.less"),n=i.interopDefault(a),o=e("bundle-text:./img/danmu-on.svg"),s=i.interopDefault(o),l=e("bundle-text:./img/danmu-off.svg"),d=i.interopDefault(l),c=e("bundle-text:./img/danmu-config.svg"),u=i.interopDefault(c),h=e("bundle-text:./img/danmu-style.svg"),p=i.interopDefault(h);if(r.default=function(e,t){const{option:r}=t,{template:{$controlsCenter:i,$player:a},constructor:{SETTING_ITEM_WIDTH:n,utils:{removeClass:o,addClass:l,append:c,setStyle:h,tooltip:f,query:m,inverseClass:_,getIcon:g}}}=e;h(i,"display","flex");const v=g("danmu-on",s.default),y=g("danmu-off",d.default),b=g("danmu-config",u.default),S=g("danmu-style",p.default);!function(){const n=["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"].map((e=>`<div class="art-danmuku-style-panel-color${r.color===e?" art-current":""}" data-color="${e}" style="background-color:${e}"></div>`)),s=c(i,`<div class="art-danmuku-emitter" style="max-width: ${r.maxWidth?`${r.maxWidth}px`:"100%"}"><div class="art-danmuku-left"><div class="art-danmuku-style"><div class="art-danmuku-style-panel"><div class="art-danmuku-style-panel-inner"><div class="art-danmuku-style-panel-title">模式</div><div class="art-danmuku-style-panel-modes"><div class="art-danmuku-style-panel-mode art-current" data-mode="0">滚动</div><div class="art-danmuku-style-panel-mode" data-mode="1">静止</div></div><div class="art-danmuku-style-panel-title">颜色</div><div class="art-danmuku-style-panel-colors">${n.join("")}</div></div></div></div><input class="art-danmuku-input" maxlength="${r.maxLength}" placeholder="发个弹幕见证当下" /></div><div class="art-danmuku-send">发送</div></div>`),d=m(".art-danmuku-style",s),u=m(".art-danmuku-input",s),p=m(".art-danmuku-send",s),f=m(".art-danmuku-style-panel-inner",s),g=m(".art-danmuku-style-panel-modes",s),v=m(".art-danmuku-style-panel-colors",s),y=r.mount||c(a,'<div class="art-layer-danmuku-emitter"></div>');e.option.backdrop&&l(f,"art-backdrop-filter"),r.theme&&l(s,`art-danmuku-theme-${r.theme}`);let b=null,w=r.mode,E=r.color;function x(e){e<=0?(b=null,p.innerText="发送",o(p,"art-disabled")):(p.innerText=e,b=setTimeout((()=>x(e-1)),1e3))}function k(){const i={mode:w,color:E,border:!0,text:u.value.trim()};null===b&&r.beforeEmit(i)&&(u.value="",t.emit(i),l(p,"art-disabled"),x(r.lockTime),e.emit("artplayerPluginDanmuku:emit",i))}function A(){i.clientWidth<r.minWidth?(c(y,s),h(y,"display","flex"),l(s,"art-danmuku-mount"),r.mount||h(a,"marginBottom","40px")):(c(i,s),h(y,"display","none"),o(s,"art-danmuku-mount"),r.mount||h(a,"marginBottom",null))}c(d,S),e.proxy(p,"click",k),e.proxy(u,"keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),k())})),e.proxy(g,"click",(e=>{const{dataset:t}=e.target;t.mode&&(w=Number(t.mode),_(e.target,"art-current"))})),e.proxy(v,"click",(e=>{const{dataset:t}=e.target;t.color&&(E=t.color,_(e.target,"art-current"))})),A(),e.on("resize",(()=>{e.isInput||A()})),e.on("destroy",(()=>{r.mount&&s.parentElement===r.mount&&r.mount.removeChild(s)}))}(),e.controls.add({position:"right",name:"danmuku",click:function(){t.isHide?(t.show(),e.notice.show="弹幕显示",h(v,"display",null),h(y,"display","none")):(t.hide(),e.notice.show="弹幕隐藏",h(v,"display","none"),h(y,"display",null))},mounted(t){c(t,v),c(t,y),f(t,"弹幕开关"),h(y,"display","none"),e.on("artplayerPluginDanmuku:hide",(()=>{h(v,"display","none"),h(y,"display",null)})),e.on("artplayerPluginDanmuku:show",(()=>{h(v,"display",null),h(y,"display","none")}))}}),e.setting.add({width:260,name:"danmuku",html:"弹幕设置",tooltip:"更多",icon:b,selector:[{width:n,html:"播放速度",icon:"",tooltip:"适中",selector:[{html:"极慢",time:10},{html:"较慢",time:7.5},{default:!0,html:"适中",time:5},{html:"较快",time:2.5},{html:"极快",time:1}],onSelect:function(e){return t.config({speed:e.time}),e.html}},{width:n,html:"字体大小",icon:"",tooltip:"适中",selector:[{html:"极小",fontSize:"4%"},{html:"较小",fontSize:"5%"},{default:!0,html:"适中",fontSize:"6%"},{html:"较大",fontSize:"7%"},{html:"极大",fontSize:"8%"}],onSelect:function(e){return t.config({fontSize:e.fontSize}),e.html}},{width:n,html:"不透明度",icon:"",tooltip:"100%",selector:[{default:!0,opacity:1,html:"100%"},{opacity:.75,html:"75%"},{opacity:.5,html:"50%"},{opacity:.25,html:"25%"},{opacity:0,html:"0%"}],onSelect:function(e){return t.config({opacity:e.opacity}),e.html}},{width:n,html:"显示范围",icon:"",tooltip:"3/4",selector:[{html:"1/4",margin:[10,"75%"]},{html:"半屏",margin:[10,"50%"]},{default:!0,html:"3/4",margin:[10,"25%"]},{html:"满屏",margin:[10,10]}],onSelect:function(e){return t.config({margin:e.margin}),e.html}},{html:"弹幕防重叠",icon:"",tooltip:r.antiOverlap?"开启":"关闭",switch:r.antiOverlap,onSwitch:e=>(t.config({antiOverlap:!e.switch}),e.tooltip=e.switch?"关闭":"开启",!e.switch)},{html:"同步视频速度",icon:"",tooltip:r.synchronousPlayback?"开启":"关闭",switch:r.synchronousPlayback,onSwitch:e=>(t.config({synchronousPlayback:!e.switch}),e.tooltip=e.switch?"关闭":"开启",!e.switch)}]})},"undefined"!=typeof document&&!document.getElementById("artplayer-plugin-danmuku")){const e=document.createElement("style");e.id="artplayer-plugin-danmuku",e.textContent=n.default,document.head.appendChild(e)}},{"bundle-text:./style.less":"hViDo","bundle-text:./img/danmu-on.svg":"4KfW9","bundle-text:./img/danmu-off.svg":"9UR3U","bundle-text:./img/danmu-config.svg":"4MPCW","bundle-text:./img/danmu-style.svg":"7lV5Q","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hViDo:[function(e,t,r){t.exports='.art-danmuku-emitter{height:32px;width:100%;max-width:100%;background-color:#ffffff4d;border-radius:5px;font-size:12px;line-height:1;display:flex;position:relative}.art-danmuku-emitter .art-backdrop-filter{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000b3!important}.art-danmuku-emitter .art-danmuku-left{border-radius:3px 0 0 3px;flex:1;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style{width:32px;justify-content:center;align-items:center;display:flex;position:relative}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel{z-index:999;width:200px;padding-bottom:10px;display:none;position:absolute;bottom:30px;left:-85px}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner{background-color:#000000e6;border-radius:3px;flex-direction:column;padding:10px 10px 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-title{margin-bottom:10px;font-size:13px}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes{justify-content:space-between;margin-bottom:15px;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes .art-danmuku-style-panel-mode{width:47%;cursor:pointer;color:#fff;border:1px solid #fff;justify-content:center;padding:5px 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes .art-danmuku-style-panel-mode.art-current{background-color:#00a1d6;border:1px solid #00a1d6}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors{flex-wrap:wrap;justify-content:space-between;gap:5px;margin-bottom:10px;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color{cursor:pointer;width:20px;height:20px;border:1px solid #fff}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color.art-current{position:relative;box-shadow:0 0 2px #fff}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color.art-current:before{content:"";width:100%;height:100%;border:2px solid #000;position:absolute;inset:0}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style:hover .art-danmuku-style-panel{display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-icon{opacity:.75;cursor:pointer}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-icon:hover{opacity:1}.art-danmuku-emitter .art-danmuku-left .art-danmuku-input{width:100%;color:#fff;background-color:#0000;border:none;outline:none;flex:1;padding:0 10px 0 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-input::placeholder,.art-danmuku-emitter .art-danmuku-left .art-danmuku-input::-webkit-input-placeholder{color:#ffffff80}.art-danmuku-emitter .art-danmuku-send{width:50px;cursor:pointer;background-color:#00a1d6;border-radius:0 5px 5px 0;justify-content:center;align-items:center;display:flex}.art-danmuku-emitter .art-danmuku-send:hover{background-color:#00b5e5}.art-danmuku-emitter .art-danmuku-send.art-disabled{opacity:.5;pointer-events:none}.art-danmuku-emitter.art-danmuku-mount{max-width:100%!important}.art-danmuku-emitter.art-danmuku-mount .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel{left:0}.art-danmuku-emitter.art-danmuku-mount .art-danmuku-send{width:60px}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left{background:#f4f4f4;border:1px solid #dadada}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-style .art-icon svg{fill:#666}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input{color:#000}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input::placeholder,.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input::-webkit-input-placeholder{color:#00000080}.art-layer-danmuku-emitter{z-index:99;width:100%;position:absolute;bottom:-40px;left:0;right:0}'},{}],"4KfW9":[function(e,t,r){t.exports='<svg viewBox="0 0 1152 1024" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M311.467 661.333c0 4.267-4.267 8.534-8.534 12.8 0 4.267 0 4.267-4.266 8.534h-12.8c-4.267 0-8.534-4.267-17.067-8.534-8.533-8.533-17.067-8.533-25.6-8.533-8.533 0-12.8 4.267-17.067 12.8-4.266 12.8-8.533 21.333-4.266 29.867 4.266 8.533 12.8 17.066 25.6 21.333 17.066 8.533 34.133 17.067 46.933 17.067 12.8 0 21.333-4.267 34.133-8.534 8.534-4.266 17.067-17.066 25.6-29.866 8.534-12.8 12.8-34.134 17.067-55.467 4.267-21.333 4.267-51.2 4.267-85.333 0-12.8 0-21.334-4.267-29.867 0-8.533-4.267-12.8-8.533-17.067-4.267-4.266-8.534-8.533-12.8-8.533-4.267 0-12.8-4.267-21.334-4.267h-55.466s-4.267-4.266 0-8.533l4.266-38.4c0-4.267 0-8.533 4.267-8.533h46.933c17.067 0 25.6-4.267 34.134-12.8 8.533-8.534 12.8-21.334 12.8-42.667v-72.533c0-17.067-4.267-34.134-8.534-42.667-12.8-12.8-25.6-17.067-42.666-17.067H243.2c-8.533 0-17.067 0-21.333 4.267-4.267 8.533-4.267 12.8-4.267 25.6 0 8.533 0 17.067 4.267 21.333 4.266 4.267 12.8 8.534 21.333 8.534h64c4.267 0 8.533 0 8.533 4.266v34.134c0 8.533 0 12.8-4.266 12.8 0 0-4.267 4.266-8.534 4.266H268.8c-8.533 0-12.8 0-21.333 4.267-4.267 0-8.534 4.267-8.534 4.267-4.266 4.266-8.533 12.8-8.533 17.066 0 8.534-4.267 17.067-4.267 25.6l-8.533 72.534v29.866c0 8.534 4.267 12.8 8.533 17.067 4.267 4.267 8.534 4.267 17.067 8.533h68.267c4.266 0 8.533 0 8.533 4.267s4.267 8.533 4.267 17.067c0 21.333 0 42.666-4.267 55.466 0 8.534-4.267 21.334-8.533 25.6zM896 486.4c-93.867 0-174.933 51.2-217.6 123.733H571.733V576H640c21.333 0 34.133-4.267 42.667-12.8 8.533-8.533 12.8-21.333 12.8-42.667V358.4c0-21.333-4.267-34.133-12.8-42.667-8.534-8.533-21.334-12.8-42.667-12.8 0-4.266 4.267-4.266 4.267-8.533-4.267 0-4.267-4.267-4.267-4.267 4.267-12.8 8.533-21.333 4.267-25.6 0-8.533-4.267-12.8-12.8-21.333-8.534-4.267-17.067-4.267-21.334-4.267-8.533 4.267-12.8 8.534-21.333 21.334-4.267 8.533-8.533 12.8-12.8 21.333-4.267 8.533-8.533 12.8-12.8 21.333H512c-4.267-8.533-8.533-17.066-8.533-21.333-4.267-8.533-8.534-12.8-12.8-21.333-4.267-12.8-12.8-17.067-21.334-17.067s-17.066 0-25.6 8.533c-8.533 8.534-12.8 12.8-12.8 21.334s0 17.066 8.534 25.6l4.266 4.266L448 307.2c-17.067 0-29.867 4.267-38.4 12.8-8.533 4.267-12.8 21.333-12.8 38.4v157.867c0 21.333 4.267 34.133 12.8 42.666 8.533 8.534 21.333 12.8 42.667 12.8H512v34.134h-98.133c-12.8 0-21.334 0-25.6 4.266-4.267 4.267-8.534 8.534-8.534 21.334v17.066c0 4.267 4.267 8.534 4.267 8.534 4.267 0 4.267 4.266 8.533 4.266H512V716.8c0 12.8 4.267 21.333 8.533 25.6 4.267 4.267 12.8 8.533 21.334 8.533 12.8 0 21.333-4.266 25.6-8.533 4.266-4.267 4.266-12.8 4.266-25.6v-55.467H652.8c-8.533 25.6-12.8 51.2-12.8 76.8 0 140.8 115.2 256 256 256s256-115.2 256-256S1036.8 486.4 896 486.4zm-328.533-128h55.466c4.267 0 4.267 0 4.267 4.267V409.6h-59.733v-51.2zm0 102.4H627.2V512h-55.467v-51.2zM512 516.267h-55.467v-51.2H512v51.2zm0-102.4h-59.733V362.667H512v51.2zm384 499.2c-93.867 0-170.667-76.8-170.667-170.667S802.133 571.733 896 571.733s170.667 76.8 170.667 170.667S989.867 913.067 896 913.067z"/><path fill="#fff" d="M951.467 669.867 878.933 742.4l-29.866-25.6C832 699.733 806.4 704 789.333 721.067c-17.066 17.066-12.8 42.666 4.267 59.733l59.733 51.2c8.534 8.533 17.067 8.533 29.867 8.533s21.333-4.266 29.867-12.8l102.4-102.4c17.066-17.066 17.066-42.666 0-59.733-21.334-12.8-46.934-12.8-64 4.267zm-371.2 209.066H213.333c-72.533 0-128-55.466-128-119.466V230.4c0-64 55.467-119.467 128-119.467h512c72.534 0 128 55.467 128 119.467v140.8c0 25.6 17.067 42.667 42.667 42.667s42.667-17.067 42.667-42.667V230.4c0-115.2-93.867-204.8-213.334-204.8h-512C93.867 25.6 0 119.467 0 230.4v529.067c0 115.2 93.867 204.8 213.333 204.8h366.934c25.6 0 42.666-17.067 42.666-42.667s-21.333-42.667-42.666-42.667z"/></svg>'},{}],"9UR3U":[function(e,t,r){t.exports='<svg viewBox="0 0 1152 1024" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M311.296 661.504c0 4.096-4.096 8.704-8.704 12.8 0 4.096 0 4.096-4.096 8.704h-12.8c-4.096 0-8.704-4.096-16.896-8.704-8.704-8.704-16.896-8.704-25.6-8.704s-12.8 4.096-16.896 12.8c-4.096 12.8-8.704 21.504-4.096 29.696 4.096 8.704 12.8 16.896 25.6 21.504 16.896 8.704 34.304 16.896 47.104 16.896 12.8 0 21.504-4.096 34.304-8.704 8.704-4.096 16.896-16.896 25.6-29.696s12.8-34.304 16.896-55.296c4.096-21.504 4.096-51.2 4.096-85.504 0-12.8 0-21.504-4.096-29.696 0-8.704-4.096-12.8-8.704-16.896-4.096-4.096-8.704-8.704-12.8-8.704s-12.8-4.096-21.504-4.096h-55.808s-4.096-4.096 0-8.704l4.096-38.4c0-4.096 0-8.704 4.096-8.704h47.104c16.896 0 25.6-4.096 34.304-12.8s12.8-21.504 12.8-42.496v-72.704c0-16.896-4.096-34.304-8.704-42.496-12.8-12.8-25.6-16.896-42.496-16.896H243.2c-8.704 0-16.896 0-21.504 4.096-4.096 8.704-4.096 12.8-4.096 25.6 0 8.704 0 16.896 4.096 21.504 4.096 4.096 12.8 8.704 21.504 8.704h64c4.096 0 8.704 0 8.704 4.096v34.304c0 8.704 0 12.8-4.096 12.8 0 0-4.096 4.096-8.704 4.096H268.8c-8.704 0-12.8 0-21.504 4.096-4.096 0-8.704 4.096-8.704 4.096-4.096 4.096-8.704 12.8-8.704 16.896 0 8.704-4.096 16.896-4.096 25.6l-8.704 72.704v29.696c0 8.704 4.096 12.8 8.704 16.896s8.704 4.096 16.896 8.704h68.096c4.096 0 8.704 0 8.704 4.096s4.096 8.704 4.096 16.896c0 21.504 0 42.496-4.096 55.296.512 9.216-3.584 22.016-8.192 26.624zM896 486.4c-93.696 0-175.104 51.2-217.6 123.904H571.904V576H640c21.504 0 34.304-4.096 42.496-12.8 8.704-8.704 12.8-21.504 12.8-42.496V358.4c0-21.504-4.096-34.304-12.8-42.496-8.704-8.704-21.504-12.8-42.496-12.8 0-4.096 4.096-4.096 4.096-8.704-4.096 0-4.096-4.096-4.096-4.096 4.096-12.8 8.704-21.504 4.096-25.6 0-8.704-4.096-12.8-12.8-21.504-8.704-4.096-16.896-4.096-21.504-4.096-8.704 4.096-12.8 8.704-21.504 21.504-4.096 8.704-8.704 12.8-12.8 21.504s-8.704 12.8-12.8 21.504h-51.2c-4.096-8.704-8.704-16.896-8.704-21.504-4.096-8.704-8.704-12.8-12.8-21.504-4.096-12.8-12.8-16.896-21.504-16.896s-16.896 0-25.6 8.704-12.8 12.8-12.8 21.504 0 16.896 8.704 25.6l4.096 4.096 4.096 4.096c-16.896 0-29.696 4.096-38.4 12.8-8.704 4.096-12.8 21.504-12.8 38.4v157.696c0 21.504 4.096 34.304 12.8 42.496 8.704 8.704 21.504 12.8 42.496 12.8H512v34.304h-98.304c-12.8 0-21.504 0-25.6 4.096s-8.704 8.704-8.704 21.504v16.896c0 4.096 4.096 8.704 4.096 8.704 4.096 0 4.096 4.096 8.704 4.096H512V716.8c0 12.8 4.096 21.504 8.704 25.6 4.096 4.096 12.8 8.704 21.504 8.704 12.8 0 21.504-4.096 25.6-8.704 4.096-4.096 4.096-12.8 4.096-25.6v-55.296H652.8c-8.704 25.6-12.8 51.2-12.8 76.8 0 140.8 115.2 256 256 256s256-115.2 256-256S1036.8 486.4 896 486.4zm-328.704-128h55.296c4.096 0 4.096 0 4.096 4.096V409.6h-59.904v-51.2zm0 102.4H627.2V512h-55.296v-51.2h-4.608zM512 516.096h-55.296v-51.2H512v51.2zm0-102.4h-59.904v-51.2H512v51.2zm384 499.2c-93.696 0-170.496-76.8-170.496-170.496S802.304 571.904 896 571.904s170.496 76.8 170.496 170.496S989.696 912.896 896 912.896z"/><path fill="#fff" d="M580.096 879.104H213.504c-72.704 0-128-55.296-128-119.296V230.4c0-64 55.296-119.296 128-119.296h512c72.704 0 128 55.296 128 119.296v140.8c0 25.6 16.896 42.496 42.496 42.496s42.496-16.896 42.496-42.496V230.4c0-115.2-93.696-204.8-213.504-204.8h-512C93.696 25.6 0 119.296 0 230.4v528.896c0 115.2 93.696 204.8 213.504 204.8h367.104c25.6 0 42.496-16.896 42.496-42.496s-21.504-42.496-43.008-42.496zm171.52 10.752c-15.36-15.36-15.36-40.96 0-56.32l237.568-237.568c15.36-15.36 40.96-15.36 56.32 0s15.36 40.96 0 56.32L807.936 889.856c-15.36 15.36-40.448 15.36-56.32 0z"/></svg>'},{}],"4MPCW":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M16.5 8c1.289 0 2.49.375 3.5 1.022V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7.022A6.5 6.5 0 0 1 16.5 8zM7 13H5a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2zm2-4H5a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2z"/><path d="m20.587 13.696-.787-.131a3.503 3.503 0 0 0-.593-1.051l.301-.804a.46.46 0 0 0-.21-.56l-1.005-.581a.52.52 0 0 0-.656.113l-.499.607a3.53 3.53 0 0 0-1.276 0l-.499-.607a.52.52 0 0 0-.656-.113l-1.005.581a.46.46 0 0 0-.21.56l.301.804c-.254.31-.456.665-.593 1.051l-.787.131a.48.48 0 0 0-.413.465v1.209a.48.48 0 0 0 .413.465l.811.135c.144.382.353.733.614 1.038l-.292.78a.46.46 0 0 0 .21.56l1.005.581a.52.52 0 0 0 .656-.113l.515-.626a3.549 3.549 0 0 0 1.136 0l.515.626a.52.52 0 0 0 .656.113l1.005-.581a.46.46 0 0 0 .21-.56l-.292-.78c.261-.305.47-.656.614-1.038l.811-.135A.48.48 0 0 0 21 15.37v-1.209a.48.48 0 0 0-.413-.465zM16.5 16.057a1.29 1.29 0 1 1 .002-2.582 1.29 1.29 0 0 1-.002 2.582z"/></svg>'},{}],"7lV5Q":[function(e,t,r){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="24" height="24"><path d="M17 16H5c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zM6.96 15c.39 0 .74-.24.89-.6l.65-1.6h5l.66 1.6c.15.36.5.6.89.6.69 0 1.15-.71.88-1.34l-3.88-8.97C11.87 4.27 11.46 4 11 4s-.87.27-1.05.69l-3.88 8.97c-.27.63.2 1.34.89 1.34zM11 5.98 12.87 11H9.13L11 5.98z"/></svg>'},{}],"8AxLD":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);const i={map:(e,t,r,i,a)=>(e-t)*(a-i)/(r-t)+i,range(e,t,r){const i=Math.round(e/r)*r;return Array.from({length:Math.floor((t-e)/r)},((e,t)=>t*r+i))}};r.default=function(e,t,r){const{query:a}=e.constructor.utils;e.controls.add({name:"heatmap",position:"top",html:"",style:{position:"absolute",top:"-100px",left:"0px",right:"0px",height:"100px",width:"100%",pointerEvents:"none"},mounted(n){let o=null,s=null;function l(){if(o=null,s=null,n.innerHTML="",!t.danmus.length||!e.duration)return;const l={w:n.offsetWidth,h:n.offsetHeight},d={xMin:0,xMax:l.w,yMin:0,yMax:128,scale:.25,opacity:.2,minHeight:Math.floor(.05*l.h),sampling:Math.floor(l.w/100),smoothing:.2,flattening:.2};"object"==typeof r&&Object.assign(d,r);const c=[],u=e.duration/l.w;for(let e=0;e<=l.w;e+=d.sampling){const r=t.danmus.filter((({time:t})=>t>e*u&&t<=(e+d.sampling)*u)).length;c.push([e,r])}const h=c[c.length-1],p=h[0],f=h[1];p!==l.w&&c.push([l.w,f]);const m=c.map((e=>e[1])),_=(Math.min(...m)+Math.max(...m))/2;for(let e=0;e<c.length;e++){const t=c[e],r=t[1];t[1]=r*(r>_?1+d.scale:1-d.scale)+d.minHeight}const g=(e,t,r,a)=>{const n=((e,t)=>{const r=t[0]-e[0],i=t[1]-e[1];return{length:Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),angle:Math.atan2(i,r)}})(t||e,r||e),o=i.map(Math.cos(n.angle)*d.flattening,0,1,1,0),s=n.angle*o+(a?Math.PI:0),l=n.length*d.smoothing;return[e[0]+Math.cos(s)*l,e[1]+Math.sin(s)*l]},v=c.map((e=>[i.map(e[0],d.xMin,d.xMax,0,l.w),i.map(e[1],d.yMin,d.yMax,l.h,0)])).reduce(((e,t,r,i)=>0===r?`M ${i[i.length-1][0]},${l.h} L ${t[0]},${l.h} L ${t[0]},${t[1]}`:`${e} ${((e,t,r)=>{const i=g(r[t-1],r[t-2],e),a=g(e,r[t-1],r[t+1],!0),n=t===r.length-1?" z":"";return`C ${i[0]},${i[1]} ${a[0]},${a[1]} ${e[0]},${e[1]}${n}`})(t,r,i)}`),"");n.innerHTML=`<svg viewBox="0 0 ${l.w} ${l.h}"><defs><linearGradient id="heatmap-solids" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${d.opacity}" /><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${d.opacity}" id="heatmap-start" /><stop offset="0%" style="stop-color:var(--art-progress-color);stop-opacity:1" id="heatmap-stop" /><stop offset="100%" style="stop-color:var(--art-progress-color);stop-opacity:1" /></linearGradient></defs><path fill="url(#heatmap-solids)" d="${v}"></path></svg>`,o=a("#heatmap-start",n),s=a("#heatmap-stop",n),o.setAttribute("offset",100*e.played+"%"),s.setAttribute("offset",100*e.played+"%")}e.on("video:timeupdate",(()=>{o&&s&&(o.setAttribute("offset",100*e.played+"%"),s.setAttribute("offset",100*e.played+"%"))})),e.on("setBar",((e,t)=>{o&&s&&"played"===e&&(o.setAttribute("offset",100*t+"%"),s.setAttribute("offset",100*t+"%"))})),e.on("ready",l),e.on("resize",l),e.on("artplayerPluginDanmuku:loaded",l)}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["bgm6t"],"bgm6t","parcelRequire4dc0")}(L);const I=t(L.exports);var P={exports:{}};window;const M=t(P.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){var i=r(6),a=r.n(i),n=function(){function e(){}return e.e=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","error",i),e.ENABLE_ERROR&&(console.error?console.error(i):console.warn?console.warn(i):console.log(i))},e.i=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","info",i),e.ENABLE_INFO&&(console.info?console.info(i):console.log(i))},e.w=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","warn",i),e.ENABLE_WARN&&(console.warn?console.warn(i):console.log(i))},e.d=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","debug",i),e.ENABLE_DEBUG&&(console.debug?console.debug(i):console.log(i))},e.v=function(t,r){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.ENABLE_CALLBACK&&e.emitter.emit("log","verbose",i),e.ENABLE_VERBOSE&&console.log(i)},e}();n.GLOBAL_TAG="mpegts.js",n.FORCE_GLOBAL_TAG=!1,n.ENABLE_ERROR=!0,n.ENABLE_INFO=!0,n.ENABLE_WARN=!0,n.ENABLE_DEBUG=!0,n.ENABLE_VERBOSE=!0,n.ENABLE_CALLBACK=!1,n.emitter=new a.a,t.a=n},function(e,t,r){t.a={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},function(e,t,r){r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var i=r(3),a={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},n={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=function(){function e(e){this._type=e||"undefined",this._status=a.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e.prototype.destroy=function(){this._status=a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===a.kConnecting||this._status===a.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.open=function(e,t){throw new i.c("Unimplemented abstract function!")},e.prototype.abort=function(){throw new i.c("Unimplemented abstract function!")},e}()},function(e,t,r){r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l}));var i,a=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),n=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),o=function(e){function t(t){return e.call(this,t)||this}return a(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(n),s=function(e){function t(t){return e.call(this,t)||this}return a(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(n),l=function(e){function t(t){return e.call(this,t)||this}return a(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(n)},function(e,t,r){var i={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],a={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:r[0]||""},n={};if(a.browser){n[a.browser]=!0;var o=a.majorVersion.split(".");n.version={major:parseInt(a.majorVersion,10),string:a.version},o.length>1&&(n.version.minor=parseInt(o[1],10)),o.length>2&&(n.version.build=parseInt(o[2],10))}for(var s in a.platform&&(n[a.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),(n.rv||n.iemobile)&&(n.rv&&delete n.rv,a.browser="msie",n.msie=!0),n.edge&&(delete n.edge,a.browser="msedge",n.msedge=!0),n.opr&&(a.browser="opera",n.opera=!0),n.safari&&n.android&&(a.browser="android",n.android=!0),n.name=a.browser,n.platform=a.platform,i)i.hasOwnProperty(s)&&delete i[s];Object.assign(i,n)}(),t.a=i},function(e,t,r){t.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(e,t,r){var i,a="object"==typeof Reflect?Reflect:null,n=a&&"function"==typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,i){function a(r){e.removeListener(t,n),i(r)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}var o,s,l;g(e,t,n,{once:!0}),"error"!==t&&(s=a,l={once:!0},"function"==typeof(o=e).on&&g(o,"error",s,l))}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function d(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){var a,n,o,s;if(d(r),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),o=n[t]),void 0===o)o=n[t]=r,++e._eventsCount;else if("function"==typeof o?o=n[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(a=c(e))>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=h.bind(i);return a.listener=r,i.wrapFn=a,a}function f(e,t,r){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):_(a,a.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(n){i.once&&e.removeEventListener(t,a),r(n)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var d=l.length,c=_(l,d);for(r=0;r<d;++r)n(c[r],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return d(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,a,n,o;if(d(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){o=r[n].listener,a=n;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(a=n[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,r){r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o}));var i=function(e,t,r,i,a){this.dts=e,this.pts=t,this.duration=r,this.originalDts=i,this.isSyncPoint=a,this.fileposition=null},a=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),n=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t=this._list,r=0,i=t.length-1,a=0,n=0,o=i;for(e<t[0].dts&&(r=0,n=o+1);n<=o;){if((a=n+Math.floor((o-n)/2))===i||e>=t[a].dts&&e<t[a+1].dts){r=a;break}t[a].dts<e?n=a+1:o=a-1}return this._list[r]},e}(),o=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var r=t.length-1,i=0,a=0,n=r,o=0;if(e<t[0].originalBeginDts)return-1;for(;a<=n;){if((i=a+Math.floor((n-a)/2))===r||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){o=i;break}t[i].originalBeginDts<e?a=i+1:n=i-1}return o},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,r=e,i=this._lastAppendLocation,a=0;-1!==i&&i<t.length&&r.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&r.originalBeginDts<t[i+1].originalBeginDts)?a=i+1:t.length>0&&(a=this._searchNearestSegmentBefore(r.originalBeginDts)+1),this._lastAppendLocation=a,this._list.splice(a,0,r)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),r=this._list[t].syncPoints;0===r.length&&t>0;)t--,r=this._list[t].syncPoints;return r.length>0?r[r.length-1]:null},e}()},function(e,t,r){var i=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,r=this._search(t.times,e);return{index:r,milliseconds:t.times[r],fileposition:t.filepositions[r]}},e.prototype._search=function(e,t){var r=0,i=e.length-1,a=0,n=0,o=i;for(t<e[0]&&(r=0,n=o+1);n<=o;){if((a=n+Math.floor((o-n)/2))===i||t>=e[a]&&t<e[a+1]){r=a;break}e[a]<t?n=a+1:o=a-1}return r},e}();t.a=i},function(e,t,r){var i=r(6),a=r.n(i),n=r(0),o=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return n.a.FORCE_GLOBAL_TAG},set:function(t){n.a.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return n.a.GLOBAL_TAG},set:function(t){n.a.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return n.a.ENABLE_VERBOSE&&n.a.ENABLE_DEBUG&&n.a.ENABLE_INFO&&n.a.ENABLE_WARN&&n.a.ENABLE_ERROR},set:function(t){n.a.ENABLE_VERBOSE=t,n.a.ENABLE_DEBUG=t,n.a.ENABLE_INFO=t,n.a.ENABLE_WARN=t,n.a.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return n.a.ENABLE_DEBUG},set:function(t){n.a.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableVerbose",{get:function(){return n.a.ENABLE_VERBOSE},set:function(t){n.a.ENABLE_VERBOSE=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return n.a.ENABLE_INFO},set:function(t){n.a.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return n.a.ENABLE_WARN},set:function(t){n.a.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return n.a.ENABLE_ERROR},set:function(t){n.a.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:n.a.GLOBAL_TAG,forceGlobalTag:n.a.FORCE_GLOBAL_TAG,enableVerbose:n.a.ENABLE_VERBOSE,enableDebug:n.a.ENABLE_DEBUG,enableInfo:n.a.ENABLE_INFO,enableWarn:n.a.ENABLE_WARN,enableError:n.a.ENABLE_ERROR,enableCallback:n.a.ENABLE_CALLBACK}},e.applyConfig=function(e){n.a.GLOBAL_TAG=e.globalTag,n.a.FORCE_GLOBAL_TAG=e.forceGlobalTag,n.a.ENABLE_VERBOSE=e.enableVerbose,n.a.ENABLE_DEBUG=e.enableDebug,n.a.ENABLE_INFO=e.enableInfo,n.a.ENABLE_WARN=e.enableWarn,n.a.ENABLE_ERROR=e.enableError,n.a.ENABLE_CALLBACK=e.enableCallback},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var r=e.getConfig();t.emit("change",r)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){n.a.emitter.addListener("log",t),n.a.emitter.listenerCount("log")>0&&(n.a.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){n.a.emitter.removeListener("log",t),0===n.a.emitter.listenerCount("log")&&(n.a.ENABLE_CALLBACK=!1,e._notifyChange())},e}();o.emitter=new a.a,t.a=o},function(e,t,r){var i=r(6),a=r.n(i),n=r(0),o=r(4),s=r(8);function l(e,t,r){var i=e;if(t+r<i.length){for(;r--;)if(128!=(192&i[++t]))return!1;return!0}return!1}var d,c=function(e){for(var t=[],r=e,i=0,a=e.length;i<a;)if(r[i]<128)t.push(String.fromCharCode(r[i])),++i;else{if(r[i]<192);else if(r[i]<224){if(l(r,i,1)&&(n=(31&r[i])<<6|63&r[i+1])>=128){t.push(String.fromCharCode(65535&n)),i+=2;continue}}else if(r[i]<240){if(l(r,i,2)&&(n=(15&r[i])<<12|(63&r[i+1])<<6|63&r[i+2])>=2048&&55296!=(63488&n)){t.push(String.fromCharCode(65535&n)),i+=3;continue}}else if(r[i]<248){var n;if(l(r,i,3)&&(n=(7&r[i])<<18|(63&r[i+1])<<12|(63&r[i+2])<<6|63&r[i+3])>65536&&n<1114112){n-=65536,t.push(String.fromCharCode(n>>>10|55296)),t.push(String.fromCharCode(1023&n|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")},u=r(3),h=(d=new ArrayBuffer(2),new DataView(d).setInt16(0,256,!0),256===new Int16Array(d)[0]),p=function(){function e(){}return e.parseScriptData=function(t,r,i){var a={};try{var o=e.parseValue(t,r,i),s=e.parseValue(t,r+o.size,i-o.size);a[o.data]=s.data}catch(l){n.a.e("AMF",l.toString())}return a},e.parseObject=function(t,r,i){if(i<3)throw new u.a("Data not enough when parse ScriptDataObject");var a=e.parseString(t,r,i),n=e.parseValue(t,r+a.size,i-a.size),o=n.objectEnd;return{data:{name:a.data,value:n.data},size:a.size+n.size,objectEnd:o}},e.parseVariable=function(t,r,i){return e.parseObject(t,r,i)},e.parseString=function(e,t,r){if(r<2)throw new u.a("Data not enough when parse String");var i=new DataView(e,t,r).getUint16(0,!h);return{data:i>0?c(new Uint8Array(e,t+2,i)):"",size:2+i}},e.parseLongString=function(e,t,r){if(r<4)throw new u.a("Data not enough when parse LongString");var i=new DataView(e,t,r).getUint32(0,!h);return{data:i>0?c(new Uint8Array(e,t+4,i)):"",size:4+i}},e.parseDate=function(e,t,r){if(r<10)throw new u.a("Data size invalid when parse Date");var i=new DataView(e,t,r),a=i.getFloat64(0,!h),n=i.getInt16(8,!h);return{data:new Date(a+=60*n*1e3),size:10}},e.parseValue=function(t,r,i){if(i<1)throw new u.a("Data not enough when parse Value");var a,o=new DataView(t,r,i),s=1,l=o.getUint8(0),d=!1;try{switch(l){case 0:a=o.getFloat64(1,!h),s+=8;break;case 1:a=!!o.getUint8(1),s+=1;break;case 2:var c=e.parseString(t,r+1,i-1);a=c.data,s+=c.size;break;case 3:a={};var p=0;for(9==(16777215&o.getUint32(i-4,!h))&&(p=3);s<i-4;){var f=e.parseObject(t,r+s,i-s-p);if(f.objectEnd)break;a[f.data.name]=f.data.value,s+=f.size}s<=i-3&&9==(16777215&o.getUint32(s-1,!h))&&(s+=3);break;case 8:for(a={},s+=4,p=0,9==(16777215&o.getUint32(i-4,!h))&&(p=3);s<i-8;){var m=e.parseVariable(t,r+s,i-s-p);if(m.objectEnd)break;a[m.data.name]=m.data.value,s+=m.size}s<=i-3&&9==(16777215&o.getUint32(s-1,!h))&&(s+=3);break;case 9:a=void 0,s=1,d=!0;break;case 10:a=[];var _=o.getUint32(1,!h);s+=4;for(var g=0;g<_;g++){var v=e.parseValue(t,r+s,i-s);a.push(v.data),s+=v.size}break;case 11:var y=e.parseDate(t,r+1,i-1);a=y.data,s+=y.size;break;case 12:var b=e.parseString(t,r+1,i-1);a=b.data,s+=b.size;break;default:s=i,n.a.w("AMF","Unsupported AMF value type "+l)}}catch(S){n.a.e("AMF",S.toString())}return{data:a,size:s,objectEnd:d}},e}(),f=function(){function e(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return e.prototype.destroy=function(){this._buffer=null},e.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new u.a("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),r=new Uint8Array(4);r.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(r.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},e.prototype.readBits=function(e){if(e>32)throw new u.b("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var r=this._current_word_bits_left?this._current_word:0;r>>>=32-this._current_word_bits_left;var i=e-this._current_word_bits_left;this._fillCurrentWord();var a=Math.min(i,this._current_word_bits_left),n=this._current_word>>>32-a;return this._current_word<<=a,this._current_word_bits_left-=a,r<<a|n},e.prototype.readBool=function(){return 1===this.readBits(1)},e.prototype.readByte=function(){return this.readBits(8)},e.prototype._skipLeadingZero=function(){var e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},e.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},e.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},e}(),m=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,r=t.byteLength,i=new Uint8Array(r),a=0,n=0;n<r;n++)n>=2&&3===t[n]&&0===t[n-1]&&0===t[n-2]||(i[a]=t[n],a++);return new Uint8Array(i.buffer,0,a)},e.parseSPS=function(t){for(var r=t.subarray(1,4),i="avc1.",a=0;a<3;a++){var n=r[a].toString(16);n.length<2&&(n="0"+n),i+=n}var o=e._ebsp2rbsp(t),s=new f(o);s.readByte();var l=s.readByte();s.readByte();var d=s.readByte();s.readUEG();var c=e.getProfileString(l),u=e.getLevelString(d),h=1,p=420,m=8,_=8;if((100===l||110===l||122===l||244===l||44===l||83===l||86===l||118===l||128===l||138===l||144===l)&&(3===(h=s.readUEG())&&s.readBits(1),h<=3&&(p=[0,420,422,444][h]),m=s.readUEG()+8,_=s.readUEG()+8,s.readBits(1),s.readBool()))for(var g=3!==h?8:12,v=0;v<g;v++)s.readBool()&&(v<6?e._skipScalingList(s,16):e._skipScalingList(s,64));s.readUEG();var y=s.readUEG();if(0===y)s.readUEG();else if(1===y){s.readBits(1),s.readSEG(),s.readSEG();var b=s.readUEG();for(v=0;v<b;v++)s.readSEG()}var S=s.readUEG();s.readBits(1);var w=s.readUEG(),E=s.readUEG(),x=s.readBits(1);0===x&&s.readBits(1),s.readBits(1);var k=0,A=0,T=0,C=0;s.readBool()&&(k=s.readUEG(),A=s.readUEG(),T=s.readUEG(),C=s.readUEG());var R=1,D=1,L=0,I=!0,P=0,M=0;if(s.readBool()){if(s.readBool()){var O=s.readByte();O>0&&O<16?(R=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][O-1],D=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][O-1]):255===O&&(R=s.readByte()<<8|s.readByte(),D=s.readByte()<<8|s.readByte())}if(s.readBool()&&s.readBool(),s.readBool()&&(s.readBits(4),s.readBool()&&s.readBits(24)),s.readBool()&&(s.readUEG(),s.readUEG()),s.readBool()){var B=s.readBits(32),j=s.readBits(32);I=s.readBool(),L=(P=j)/(M=2*B)}}var F=1;1===R&&1===D||(F=R/D);var N=0,U=0;0===h?(N=1,U=2-x):(N=3===h?1:2,U=(1===h?2:1)*(2-x));var V=16*(w+1),z=16*(E+1)*(2-x);V-=(k+A)*N,z-=(T+C)*U;var $=Math.ceil(V*F);return s.destroy(),s=null,{codec_mimetype:i,profile_idc:l,level_idc:d,profile_string:c,level_string:u,chroma_format_idc:h,bit_depth:m,bit_depth_luma:m,bit_depth_chroma:_,ref_frames:S,chroma_format:p,chroma_format_string:e.getChromaFormatString(p),frame_rate:{fixed:I,fps:L,fps_den:M,fps_num:P},sar_ratio:{width:R,height:D},codec_size:{width:V,height:z},present_size:{width:$,height:z}}},e._skipScalingList=function(e,t){for(var r=8,i=8,a=0;a<t;a++)0!==i&&(i=(r+e.readSEG()+256)%256),r=0===i?r:i},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}(),_=r(5),g=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,r=t.byteLength,i=new Uint8Array(r),a=0,n=0;n<r;n++)n>=2&&3===t[n]&&0===t[n-1]&&0===t[n-2]||(i[a]=t[n],a++);return new Uint8Array(i.buffer,0,a)},e.parseVPS=function(t){var r=e._ebsp2rbsp(t),i=new f(r);return i.readByte(),i.readByte(),i.readBits(4),i.readBits(2),i.readBits(6),{num_temporal_layers:i.readBits(3)+1,temporal_id_nested:i.readBool()}},e.parseSPS=function(t){var r=e._ebsp2rbsp(t),i=new f(r);i.readByte(),i.readByte();for(var a=0,n=0,o=0,s=0,l=(i.readBits(4),i.readBits(3)),d=(i.readBool(),i.readBits(2)),c=i.readBool(),u=i.readBits(5),h=i.readByte(),p=i.readByte(),m=i.readByte(),_=i.readByte(),g=i.readByte(),v=i.readByte(),y=i.readByte(),b=i.readByte(),S=i.readByte(),w=i.readByte(),E=i.readByte(),x=[],k=[],A=0;A<l;A++)x.push(i.readBool()),k.push(i.readBool());if(l>0)for(A=l;A<8;A++)i.readBits(2);for(A=0;A<l;A++)x[A]&&(i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte()),k[A]&&i.readByte();i.readUEG();var T=i.readUEG();3==T&&i.readBits(1);var C=i.readUEG(),R=i.readUEG();i.readBool()&&(a+=i.readUEG(),n+=i.readUEG(),o+=i.readUEG(),s+=i.readUEG());var D=i.readUEG(),L=i.readUEG(),I=i.readUEG();for(A=i.readBool()?0:l;A<=l;A++)i.readUEG(),i.readUEG(),i.readUEG();if(i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readBool()&&i.readBool())for(var P=0;P<4;P++)for(var M=0;M<(3===P?2:6);M++)if(i.readBool()){var O=Math.min(64,1<<4+(P<<1));for(P>1&&i.readSEG(),A=0;A<O;A++)i.readSEG()}else i.readUEG();i.readBool(),i.readBool(),i.readBool()&&(i.readByte(),i.readUEG(),i.readUEG(),i.readBool());var B=i.readUEG(),j=0;for(A=0;A<B;A++){var F=!1;if(0!==A&&(F=i.readBool()),F){A===B&&i.readUEG(),i.readBool(),i.readUEG();for(var N=0,U=0;U<=j;U++){var V=i.readBool(),z=!1;V||(z=i.readBool()),(V||z)&&N++}j=N}else{var $=i.readUEG(),H=i.readUEG();for(j=$+H,U=0;U<$;U++)i.readUEG(),i.readBool();for(U=0;U<H;U++)i.readUEG(),i.readBool()}}if(i.readBool()){var G=i.readUEG();for(A=0;A<G;A++){for(U=0;U<I+4;U++)i.readBits(1);i.readBits(1)}}var q=0,W=1,Y=1,K=!1,X=1,Z=1;if(i.readBool(),i.readBool(),i.readBool()){if(i.readBool()){var J=i.readByte();J>0&&J<=16?(W=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][J-1],Y=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][J-1]):255===J&&(W=i.readBits(16),Y=i.readBits(16))}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(3),i.readBool(),i.readBool()&&(i.readByte(),i.readByte(),i.readByte())),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool(),i.readBool(),i.readBool(),i.readBool()&&(i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG()),i.readBool()&&(X=i.readBits(32),Z=i.readBits(32),i.readBool()&&(i.readUEG(),i.readBool()))){var Q=!1,ee=!1,te=!1;for(Q=i.readBool(),ee=i.readBool(),(Q||ee)&&((te=i.readBool())&&(i.readByte(),i.readBits(5),i.readBool(),i.readBits(5)),i.readBits(4),i.readBits(4),te&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5)),A=0;A<=l;A++){var re=i.readBool();K=re;var ie=!1,ae=1;re||(ie=i.readBool());var ne=!1;if(ie?i.readSEG():ne=i.readBool(),ne||(ae=i.readUEG()+1),Q)for(U=0;U<ae;U++)i.readUEG(),i.readUEG(),te&&(i.readUEG(),i.readUEG());if(ee)for(U=0;U<ae;U++)i.readUEG(),i.readUEG(),te&&(i.readUEG(),i.readUEG())}}i.readBool()&&(i.readBool(),i.readBool(),i.readBool(),q=i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG())}i.readBool();var oe="hvc1."+u+".1.L"+E+".B0",se=C-(a+n)*(1===T||2===T?2:1),le=R-(o+s)*(1===T?2:1),de=1;return 1!==W&&1!==Y&&(de=W/Y),i.destroy(),i=null,{codec_mimetype:oe,level_string:e.getLevelString(E),profile_idc:u,bit_depth:D+8,ref_frames:1,chroma_format:T,chroma_format_string:e.getChromaFormatString(T),general_level_idc:E,general_profile_space:d,general_tier_flag:c,general_profile_idc:u,general_profile_compatibility_flags_1:h,general_profile_compatibility_flags_2:p,general_profile_compatibility_flags_3:m,general_profile_compatibility_flags_4:_,general_constraint_indicator_flags_1:g,general_constraint_indicator_flags_2:v,general_constraint_indicator_flags_3:y,general_constraint_indicator_flags_4:b,general_constraint_indicator_flags_5:S,general_constraint_indicator_flags_6:w,min_spatial_segmentation_idc:q,constant_frame_rate:0,chroma_format_idc:T,bit_depth_luma_minus8:D,bit_depth_chroma_minus8:L,frame_rate:{fixed:K,fps:Z/X,fps_den:X,fps_num:Z},sar_ratio:{width:W,height:Y},codec_size:{width:se,height:le},present_size:{width:se*de,height:le}}},e.parsePPS=function(t){var r=e._ebsp2rbsp(t),i=new f(r);i.readByte(),i.readByte(),i.readUEG(),i.readUEG(),i.readBool(),i.readBool(),i.readBits(3),i.readBool(),i.readBool(),i.readUEG(),i.readUEG(),i.readSEG(),i.readBool(),i.readBool(),i.readBool()&&i.readUEG(),i.readSEG(),i.readSEG(),i.readBool(),i.readBool(),i.readBool(),i.readBool();var a=i.readBool(),n=i.readBool(),o=1;return n&&a?o=0:n?o=3:a&&(o=2),{parallelismType:o}},e.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},e.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},e.getLevelString=function(e){return(e/30).toFixed(1)},e}();function v(e){return e.byteOffset%2==0&&e.byteLength%2==0}function y(e){return e.byteOffset%4==0&&e.byteLength%4==0}function b(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var S,w,E=function(e,t){return e.byteLength===t.byteLength&&(y(e)&&y(t)?(r=e,i=t,b(new Uint32Array(r.buffer,r.byteOffset,r.byteLength/4),new Uint32Array(i.buffer,i.byteOffset,i.byteLength/4))):v(e)&&v(t)?function(e,t){return b(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2))}(e,t):function(e,t){return b(e,t)}(e,t));var r,i},x=function(){function e(e,t){var r;this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(r=new ArrayBuffer(2),new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0])}return e.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},e.probe=function(e){var t=new Uint8Array(e);if(t.byteLength<9)return{needMoreData:!0};var r={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return r;var i,a,n=(4&t[4])>>>2!=0,o=0!=(1&t[4]),s=(i=t)[a=5]<<24|i[a+1]<<16|i[a+2]<<8|i[a+3];return s<9?r:{match:!0,consumed:s,dataOffset:s,hasAudioTrack:n,hasVideoTrack:o}},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new s.a},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.parseChunks=function(t,r){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new u.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var i=0,a=this._littleEndian;if(0===r){if(!(t.byteLength>13))return 0;i=e.probe(t).dataOffset}for(this._firstParse&&(this._firstParse=!1,r+i!==this._dataOffset&&n.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(o=new DataView(t,i)).getUint32(0,!a)&&n.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),i+=4);i<t.byteLength;){this._dispatch=!0;var o=new DataView(t,i);if(i+11+4>t.byteLength)break;var s=o.getUint8(0),l=16777215&o.getUint32(0,!a);if(i+11+l+4>t.byteLength)break;if(8===s||9===s||18===s){var d=o.getUint8(4),c=o.getUint8(5),h=o.getUint8(6)|c<<8|d<<16|o.getUint8(7)<<24;0!=(16777215&o.getUint32(7,!a))&&n.a.w(this.TAG,"Meet tag which has StreamID != 0!");var p=i+11;switch(s){case 8:this._parseAudioData(t,p,l,h);break;case 9:this._parseVideoData(t,p,l,h,r+i);break;case 18:this._parseScriptData(t,p,l)}var f=o.getUint32(11+l,!a);f!==11+l&&n.a.w(this.TAG,"Invalid PrevTagSize "+f),i+=11+l+4}else n.a.w(this.TAG,"Unsupported tag type "+s+", skipped"),i+=11+l+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),i},e.prototype._parseScriptData=function(e,t,r){var i=p.parseScriptData(e,t,r);if(i.hasOwnProperty("onMetaData")){if(null==i.onMetaData||"object"!=typeof i.onMetaData)return void n.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&n.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=i;var a=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},a)),"boolean"==typeof a.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=a.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof a.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=a.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof a.audiodatarate&&(this._mediaInfo.audioDataRate=a.audiodatarate),"number"==typeof a.videodatarate&&(this._mediaInfo.videoDataRate=a.videodatarate),"number"==typeof a.width&&(this._mediaInfo.width=a.width),"number"==typeof a.height&&(this._mediaInfo.height=a.height),"number"==typeof a.duration){if(!this._durationOverrided){var o=Math.floor(a.duration*this._timescale);this._duration=o,this._mediaInfo.duration=o}}else this._mediaInfo.duration=0;if("number"==typeof a.framerate){var s=Math.floor(1e3*a.framerate);if(s>0){var l=s/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=l,this._referenceFrameRate.fps_num=s,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=l}}if("object"==typeof a.keyframes){this._mediaInfo.hasKeyframesIndex=!0;var d=a.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(d),a.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=a,n.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(i).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},i))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],r=[],i=1;i<e.times.length;i++){var a=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(a),r.push(e.filepositions[i])}return{times:t,filepositions:r}},e.prototype._parseAudioData=function(e,t,r,i){if(r<=1)n.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var a=new DataView(e,t,r).getUint8(0),o=a>>>4;if(2===o||10===o){var s=0,l=(12&a)>>>2;if(l>=0&&l<=4){s=this._flvSoundRateTable[l];var d=1&a,c=this._audioMetadata,u=this._audioTrack;if(c||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(c=this._audioMetadata={}).type="audio",c.id=u.id,c.timescale=this._timescale,c.duration=this._duration,c.audioSampleRate=s,c.channelCount=0===d?1:2),10===o){var h=this._parseAACAudioData(e,t+1,r-1);if(null==h)return;if(0===h.packetType){if(c.config){if(E(h.data.config,c.config))return;n.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var p=h.data;c.audioSampleRate=p.samplingRate,c.channelCount=p.channelCount,c.codec=p.codec,c.originalCodec=p.originalCodec,c.config=p.config,c.refSampleDuration=1024/c.audioSampleRate*c.timescale,n.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",c),(g=this._mediaInfo).audioCodec=c.originalCodec,g.audioSampleRate=c.audioSampleRate,g.audioChannelCount=c.channelCount,g.hasVideo?null!=g.videoCodec&&(g.mimeType='video/x-flv; codecs="'+g.videoCodec+","+g.audioCodec+'"'):g.mimeType='video/x-flv; codecs="'+g.audioCodec+'"',g.isComplete()&&this._onMediaInfo(g)}else if(1===h.packetType){var f=this._timestampBase+i,m={unit:h.data,length:h.data.byteLength,dts:f,pts:f};u.samples.push(m),u.length+=h.data.length}else n.a.e(this.TAG,"Flv: Unsupported AAC data type "+h.packetType)}else if(2===o){if(!c.codec){var g;if(null==(p=this._parseMP3AudioData(e,t+1,r-1,!0)))return;c.audioSampleRate=p.samplingRate,c.channelCount=p.channelCount,c.codec=p.codec,c.originalCodec=p.originalCodec,c.refSampleDuration=1152/c.audioSampleRate*c.timescale,n.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",c),(g=this._mediaInfo).audioCodec=c.codec,g.audioSampleRate=c.audioSampleRate,g.audioChannelCount=c.channelCount,g.audioDataRate=p.bitRate,g.hasVideo?null!=g.videoCodec&&(g.mimeType='video/x-flv; codecs="'+g.videoCodec+","+g.audioCodec+'"'):g.mimeType='video/x-flv; codecs="'+g.audioCodec+'"',g.isComplete()&&this._onMediaInfo(g)}var v=this._parseMP3AudioData(e,t+1,r-1,!1);if(null==v)return;f=this._timestampBase+i;var y={unit:v,length:v.byteLength,dts:f,pts:f};u.samples.push(y),u.length+=v.length}}else this._onError(_.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+l)}else this._onError(_.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+o)}},e.prototype._parseAACAudioData=function(e,t,r){if(!(r<=1)){var i={},a=new Uint8Array(e,t,r);return i.packetType=a[0],0===a[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,r-1):i.data=a.subarray(1),i}n.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,r){var i,a,n=new Uint8Array(e,t,r),o=null,s=0,l=null;if(s=i=n[0]>>>3,(a=(7&n[0])<<1|n[1]>>>7)<0||a>=this._mpegSamplingRates.length)this._onError(_.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var d=this._mpegSamplingRates[a],c=(120&n[1])>>>3;if(!(c<0||c>=8)){5===s&&(l=(7&n[1])<<1|n[2]>>>7,n[2]);var u=self.navigator.userAgent.toLowerCase();return-1!==u.indexOf("firefox")?a>=6?(s=5,o=new Array(4),l=a-3):(s=2,o=new Array(2),l=a):-1!==u.indexOf("android")?(s=2,o=new Array(2),l=a):(s=5,l=a,o=new Array(4),a>=6?l=a-3:1===c&&(s=2,o=new Array(2),l=a)),o[0]=s<<3,o[0]|=(15&a)>>>1,o[1]=(15&a)<<7,o[1]|=(15&c)<<3,5===s&&(o[1]|=(15&l)>>>1,o[2]=(1&l)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:d,channelCount:c,codec:"mp4a.40."+s,originalCodec:"mp4a.40."+i}}this._onError(_.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},e.prototype._parseMP3AudioData=function(e,t,r,i){if(!(r<4)){this._littleEndian;var a=new Uint8Array(e,t,r),o=null;if(i){if(255!==a[0])return;var s=a[1]>>>3&3,l=(6&a[1])>>1,d=(240&a[2])>>>4,c=(12&a[2])>>>2,u=3!=(a[3]>>>6&3)?2:1,h=0,p=0;switch(s){case 0:h=this._mpegAudioV25SampleRateTable[c];break;case 2:h=this._mpegAudioV20SampleRateTable[c];break;case 3:h=this._mpegAudioV10SampleRateTable[c]}switch(l){case 1:d<this._mpegAudioL3BitRateTable.length&&(p=this._mpegAudioL3BitRateTable[d]);break;case 2:d<this._mpegAudioL2BitRateTable.length&&(p=this._mpegAudioL2BitRateTable[d]);break;case 3:d<this._mpegAudioL1BitRateTable.length&&(p=this._mpegAudioL1BitRateTable[d])}o={bitRate:p,samplingRate:h,channelCount:u,codec:"mp3",originalCodec:"mp3"}}else o=a;return o}n.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,r,i,a){if(r<=1)n.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var o=new Uint8Array(e,t,r)[0],s=(112&o)>>>4;if(0!=(128&o)){var l=15&o,d=String.fromCharCode.apply(String,new Uint8Array(e,t,r).slice(1,5));if("hvc1"!==d)return void this._onError(_.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+d);this._parseEnhancedHEVCVideoPacket(e,t+5,r-5,i,a,s,l)}else{var c=15&o;if(7===c)this._parseAVCVideoPacket(e,t+1,r-1,i,a,s);else{if(12!==c)return void this._onError(_.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+c);this._parseHEVCVideoPacket(e,t+1,r-1,i,a,s)}}}},e.prototype._parseAVCVideoPacket=function(e,t,r,i,a,o){if(r<4)n.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=new DataView(e,t,r),d=l.getUint8(0),c=(16777215&l.getUint32(0,!s))<<8>>8;if(0===d)this._parseAVCDecoderConfigurationRecord(e,t+4,r-4);else if(1===d)this._parseAVCVideoData(e,t+4,r-4,i,a,o,c);else if(2!==d)return void this._onError(_.a.FORMAT_ERROR,"Flv: Invalid video packet type "+d)}},e.prototype._parseHEVCVideoPacket=function(e,t,r,i,a,o){if(r<4)n.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=new DataView(e,t,r),d=l.getUint8(0),c=(16777215&l.getUint32(0,!s))<<8>>8;if(0===d)this._parseHEVCDecoderConfigurationRecord(e,t+4,r-4);else if(1===d)this._parseHEVCVideoData(e,t+4,r-4,i,a,o,c);else if(2!==d)return void this._onError(_.a.FORMAT_ERROR,"Flv: Invalid video packet type "+d)}},e.prototype._parseEnhancedHEVCVideoPacket=function(e,t,r,i,a,o,s){if(r<4)n.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var l=this._littleEndian,d=new DataView(e,t,r);if(0===s)this._parseHEVCDecoderConfigurationRecord(e,t,r);else if(1===s){var c=(4294967040&d.getUint32(0,!l))>>8;this._parseHEVCVideoData(e,t+3,r-3,i,a,o,c)}else if(3===s)this._parseHEVCVideoData(e,t,r,i,a,o,0);else if(2!==s)return void this._onError(_.a.FORMAT_ERROR,"Flv: Invalid video packet type "+s)}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,r){if(r<7)n.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,a=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,r);if(i){if(void 0!==i.avcc){var l=new Uint8Array(e,t,r);if(E(l,i.avcc))return;n.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=a.id,i.timescale=this._timescale,i.duration=this._duration;var d=s.getUint8(0),c=s.getUint8(1);if(s.getUint8(2),s.getUint8(3),1===d&&0!==c)if(this._naluLengthSize=1+(3&s.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var u=31&s.getUint8(5);if(0!==u){u>1&&n.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+u);for(var h=6,p=0;p<u;p++){var f=s.getUint16(h,!o);if(h+=2,0!==f){var g=new Uint8Array(e,t+h,f);h+=f;var v=m.parseSPS(g);if(0===p){i.codecWidth=v.codec_size.width,i.codecHeight=v.codec_size.height,i.presentWidth=v.present_size.width,i.presentHeight=v.present_size.height,i.profile=v.profile_string,i.level=v.level_string,i.bitDepth=v.bit_depth,i.chromaFormat=v.chroma_format,i.sarRatio=v.sar_ratio,i.frameRate=v.frame_rate,!1!==v.frame_rate.fixed&&0!==v.frame_rate.fps_num&&0!==v.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var y=i.frameRate.fps_den,b=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(y/b);for(var S=g.subarray(1,4),w="avc1.",x=0;x<3;x++){var k=S[x].toString(16);k.length<2&&(k="0"+k),w+=k}i.codec=w;var A=this._mediaInfo;A.width=i.codecWidth,A.height=i.codecHeight,A.fps=i.frameRate.fps,A.profile=i.profile,A.level=i.level,A.refFrames=v.ref_frames,A.chromaFormat=v.chroma_format_string,A.sarNum=i.sarRatio.width,A.sarDen=i.sarRatio.height,A.videoCodec=w,A.hasAudio?null!=A.audioCodec&&(A.mimeType='video/x-flv; codecs="'+A.videoCodec+","+A.audioCodec+'"'):A.mimeType='video/x-flv; codecs="'+A.videoCodec+'"',A.isComplete()&&this._onMediaInfo(A)}}}var T=s.getUint8(h);if(0!==T){for(T>1&&n.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+T),h++,p=0;p<T;p++)f=s.getUint16(h,!o),h+=2,0!==f&&(h+=f);i.avcc=new Uint8Array(r),i.avcc.set(new Uint8Array(e,t,r),0),n.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(_.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(_.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(_.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(_.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},e.prototype._parseHEVCDecoderConfigurationRecord=function(e,t,r){if(r<22)n.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,a=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,r);if(i){if(void 0!==i.hvcc){var l=new Uint8Array(e,t,r);if(E(l,i.hvcc))return;n.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=a.id,i.timescale=this._timescale,i.duration=this._duration;var d=s.getUint8(0),c=31&s.getUint8(1);if(1===d&&0!==c)if(this._naluLengthSize=1+(3&s.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var u=s.getUint8(22),h=0,p=23;h<u;h++){var f=63&s.getUint8(p+0),m=s.getUint16(p+1,!o);p+=3;for(var v=0;v<m;v++){var y=s.getUint16(p+0,!o);if(0===v)if(33===f){p+=2;var b=new Uint8Array(e,t+p,y),S=g.parseSPS(b);i.codecWidth=S.codec_size.width,i.codecHeight=S.codec_size.height,i.presentWidth=S.present_size.width,i.presentHeight=S.present_size.height,i.profile=S.profile_string,i.level=S.level_string,i.bitDepth=S.bit_depth,i.chromaFormat=S.chroma_format,i.sarRatio=S.sar_ratio,i.frameRate=S.frame_rate,!1!==S.frame_rate.fixed&&0!==S.frame_rate.fps_num&&0!==S.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var w=i.frameRate.fps_den,x=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(w/x),i.codec=S.codec_mimetype;var k=this._mediaInfo;k.width=i.codecWidth,k.height=i.codecHeight,k.fps=i.frameRate.fps,k.profile=i.profile,k.level=i.level,k.refFrames=S.ref_frames,k.chromaFormat=S.chroma_format_string,k.sarNum=i.sarRatio.width,k.sarDen=i.sarRatio.height,k.videoCodec=S.codec_mimetype,k.hasAudio?null!=k.audioCodec&&(k.mimeType='video/x-flv; codecs="'+k.videoCodec+","+k.audioCodec+'"'):k.mimeType='video/x-flv; codecs="'+k.videoCodec+'"',k.isComplete()&&this._onMediaInfo(k),p+=y}else p+=2+y;else p+=2+y}}i.hvcc=new Uint8Array(r),i.hvcc.set(new Uint8Array(e,t,r),0),n.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(_.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(_.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord")}},e.prototype._parseAVCVideoData=function(e,t,r,i,a,o,s){for(var l=this._littleEndian,d=new DataView(e,t,r),c=[],u=0,h=0,p=this._naluLengthSize,f=this._timestampBase+i,m=1===o;h<r;){if(h+4>=r){n.a.w(this.TAG,"Malformed Nalu near timestamp "+f+", offset = "+h+", dataSize = "+r);break}var _=d.getUint32(h,!l);if(3===p&&(_>>>=8),_>r-p)return void n.a.w(this.TAG,"Malformed Nalus near timestamp "+f+", NaluSize > DataSize!");var g=31&d.getUint8(h+p);5===g&&(m=!0);var v=new Uint8Array(e,t+h,p+_),y={type:g,data:v};c.push(y),u+=v.byteLength,h+=p+_}if(c.length){var b=this._videoTrack,S={units:c,length:u,isKeyframe:m,dts:f,cts:s,pts:f+s};m&&(S.fileposition=a),b.samples.push(S),b.length+=u}},e.prototype._parseHEVCVideoData=function(e,t,r,i,a,o,s){for(var l=this._littleEndian,d=new DataView(e,t,r),c=[],u=0,h=0,p=this._naluLengthSize,f=this._timestampBase+i,m=1===o;h<r;){if(h+4>=r){n.a.w(this.TAG,"Malformed Nalu near timestamp "+f+", offset = "+h+", dataSize = "+r);break}var _=d.getUint32(h,!l);if(3===p&&(_>>>=8),_>r-p)return void n.a.w(this.TAG,"Malformed Nalus near timestamp "+f+", NaluSize > DataSize!");var g=31&d.getUint8(h+p);19!==g&&20!==g||(m=!0);var v=new Uint8Array(e,t+h,p+_),y={type:g,data:v};c.push(y),u+=v.byteLength,h+=p+_}if(c.length){var b=this._videoTrack,S={units:c,length:u,isKeyframe:m,dts:f,cts:s,pts:f+s};m&&(S.fileposition=a),b.samples.push(S),b.length+=u}},e}(),k=function(){function e(){}return e.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},e}(),A=function(){this.program_pmt_pid={}};(w=S||(S={}))[w.kMPEG1Audio=3]="kMPEG1Audio",w[w.kMPEG2Audio=4]="kMPEG2Audio",w[w.kPESPrivateData=6]="kPESPrivateData",w[w.kADTSAAC=15]="kADTSAAC",w[w.kLOASAAC=17]="kLOASAAC",w[w.kAC3=129]="kAC3",w[w.kID3=21]="kID3",w[w.kSCTE35=134]="kSCTE35",w[w.kH264=27]="kH264",w[w.kH265=36]="kH265";var T,C=function(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}},R=function(){},D=function(){},L=function(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0};!function(e){e[e.kUnspecified=0]="kUnspecified",e[e.kSliceNonIDR=1]="kSliceNonIDR",e[e.kSliceDPA=2]="kSliceDPA",e[e.kSliceDPB=3]="kSliceDPB",e[e.kSliceDPC=4]="kSliceDPC",e[e.kSliceIDR=5]="kSliceIDR",e[e.kSliceSEI=6]="kSliceSEI",e[e.kSliceSPS=7]="kSliceSPS",e[e.kSlicePPS=8]="kSlicePPS",e[e.kSliceAUD=9]="kSliceAUD",e[e.kEndOfSequence=10]="kEndOfSequence",e[e.kEndOfStream=11]="kEndOfStream",e[e.kFiller=12]="kFiller",e[e.kSPSExt=13]="kSPSExt",e[e.kReserved0=14]="kReserved0"}(T||(T={}));var I,P,M=function(){},O=function(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)},B=function(){function e(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&n.a.e(this.TAG,"Could not find H264 startcode until payload end!")}return e.prototype.findNextStartCodeOffset=function(e){for(var t=e,r=this.data_;;){if(t+3>=r.byteLength)return this.eof_flag_=!0,r.byteLength;var i=r[t+0]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3],a=r[t+0]<<16|r[t+1]<<8|r[t+2];if(1===i||1===a)return t;t++}},e.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var r=this.current_startcode_offset_,i=31&e[r+=1==(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])?4:3],a=(128&e[r])>>>7,n=this.findNextStartCodeOffset(r);if(this.current_startcode_offset_=n,!(i>=T.kReserved0)&&0===a){var o=e.subarray(r,n);(t=new M).type=i,t.data=o}}return t},e}(),j=function(){function e(e,t,r){var i=8+e.byteLength+1+2+t.byteLength,a=!1;66!==e[3]&&77!==e[3]&&88!==e[3]&&(a=!0,i+=4);var n=this.data=new Uint8Array(i);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;var o=e.byteLength;n[6]=o>>>8,n[7]=255&o;var s=8;n.set(e,8),n[s+=o]=1;var l=t.byteLength;n[s+1]=l>>>8,n[s+2]=255&l,n.set(t,s+3),s+=3+l,a&&(n[s]=252|r.chroma_format_idc,n[s+1]=248|r.bit_depth_luma-8,n[s+2]=248|r.bit_depth_chroma-8,n[s+3]=0,s+=4)}return e.prototype.getData=function(){return this.data},e}();!function(e){e[e.kNull=0]="kNull",e[e.kAACMain=1]="kAACMain",e[e.kAAC_LC=2]="kAAC_LC",e[e.kAAC_SSR=3]="kAAC_SSR",e[e.kAAC_LTP=4]="kAAC_LTP",e[e.kAAC_SBR=5]="kAAC_SBR",e[e.kAAC_Scalable=6]="kAAC_Scalable",e[e.kLayer1=32]="kLayer1",e[e.kLayer2=33]="kLayer2",e[e.kLayer3=34]="kLayer3"}(I||(I={})),function(e){e[e.k96000Hz=0]="k96000Hz",e[e.k88200Hz=1]="k88200Hz",e[e.k64000Hz=2]="k64000Hz",e[e.k48000Hz=3]="k48000Hz",e[e.k44100Hz=4]="k44100Hz",e[e.k32000Hz=5]="k32000Hz",e[e.k24000Hz=6]="k24000Hz",e[e.k22050Hz=7]="k22050Hz",e[e.k16000Hz=8]="k16000Hz",e[e.k12000Hz=9]="k12000Hz",e[e.k11025Hz=10]="k11025Hz",e[e.k8000Hz=11]="k8000Hz",e[e.k7350Hz=12]="k7350Hz"}(P||(P={}));var F,N,U=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],V=(F=function(e,t){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),z=function(){},$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),t}(z),H=function(){function e(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&n.a.e(this.TAG,"Could not found ADTS syncword until payload end")}return e.prototype.findNextSyncwordOffset=function(e){for(var t=e,r=this.data_;;){if(t+7>=r.byteLength)return this.eof_flag_=!0,r.byteLength;if(4095==(r[t+0]<<8|r[t+1])>>>4)return t;t++}},e.prototype.readNextAACFrame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var r=this.current_syncword_offset_,i=(8&e[r+1])>>>3,a=(6&e[r+1])>>>1,n=1&e[r+1],o=(192&e[r+2])>>>6,s=(60&e[r+2])>>>2,l=(1&e[r+2])<<2|(192&e[r+3])>>>6,d=(3&e[r+3])<<11|e[r+4]<<3|(224&e[r+5])>>>5;if(e[r+6],r+d>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var c=1===n?7:9,u=d-c;r+=c;var h=this.findNextSyncwordOffset(r+u);if(this.current_syncword_offset_=h,(0===i||1===i)&&0===a){var p=e.subarray(r,r+u);(t=new z).audio_object_type=o+1,t.sampling_freq_index=s,t.sampling_frequency=U[s],t.channel_config=l,t.data=p}}return t},e.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},e.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},e}(),G=function(){function e(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&n.a.e(this.TAG,"Could not found LOAS syncword until payload end")}return e.prototype.findNextSyncwordOffset=function(e){for(var t=e,r=this.data_;;){if(t+1>=r.byteLength)return this.eof_flag_=!0,r.byteLength;if(695==(r[t+0]<<3|r[t+1]>>>5))return t;t++}},e.prototype.getLATMValue=function(e){for(var t=e.readBits(2),r=0,i=0;i<=t;i++)r<<=8,r|=e.readByte();return r},e.prototype.readNextAACFrame=function(e){for(var t=this.data_,r=null;null==r&&!this.eof_flag_;){var i=this.current_syncword_offset_,a=(31&t[i+1])<<8|t[i+2];if(i+3+a>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var o=new f(t.subarray(i+3,i+3+a)),s=null;if(o.readBool()){if(null==e){n.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+a),o.destroy();continue}s=e}else{var l=o.readBool();if(l&&o.readBool()){n.a.e(this.TAG,"audioMuxVersionA is Not Supported"),o.destroy();break}if(l&&this.getLATMValue(o),!o.readBool()){n.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),o.destroy();break}if(0!==o.readBits(6)){n.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),o.destroy();break}if(0!==o.readBits(4)){n.a.e(this.TAG,"more than 2 numProgram Not Supported"),o.destroy();break}if(0!==o.readBits(3)){n.a.e(this.TAG,"more than 2 numLayer Not Supported"),o.destroy();break}var d=l?this.getLATMValue(o):0,c=o.readBits(5);d-=5;var u=o.readBits(4);d-=4;var h=o.readBits(4);d-=4,o.readBits(3),(d-=3)>0&&o.readBits(d);var p=o.readBits(3);if(0!==p){n.a.e(this.TAG,"frameLengthType = "+p+". Only frameLengthType = 0 Supported"),o.destroy();break}o.readByte();var m=o.readBool();if(m)if(l)this.getLATMValue(o);else{for(var _=0;;){_<<=8;var g=o.readBool();if(_+=o.readByte(),!g)break}console.log(_)}o.readBool()&&o.readByte(),(s=new $).audio_object_type=c,s.sampling_freq_index=u,s.sampling_frequency=U[s.sampling_freq_index],s.channel_config=h,s.other_data_present=m}for(var v=0;;){var y=o.readByte();if(v+=y,255!==y)break}for(var b=new Uint8Array(v),S=0;S<v;S++)b[S]=o.readByte();(r=new $).audio_object_type=s.audio_object_type,r.sampling_freq_index=s.sampling_freq_index,r.sampling_frequency=U[s.sampling_freq_index],r.channel_config=s.channel_config,r.other_data_present=s.other_data_present,r.data=b,this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+a)}return r},e.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},e.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},e}(),q=function(e){var t=null,r=e.audio_object_type,i=e.audio_object_type,a=e.sampling_freq_index,n=e.channel_config,o=0,s=navigator.userAgent.toLowerCase();-1!==s.indexOf("firefox")?a>=6?(i=5,t=new Array(4),o=a-3):(i=2,t=new Array(2),o=a):-1!==s.indexOf("android")?(i=2,t=new Array(2),o=a):(i=5,o=a,t=new Array(4),a>=6?o=a-3:1===n&&(i=2,t=new Array(2),o=a)),t[0]=i<<3,t[0]|=(15&a)>>>1,t[1]=(15&a)<<7,t[1]|=(15&n)<<3,5===i&&(t[1]|=(15&o)>>>1,t[2]=(1&o)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=U[a],this.channel_count=n,this.codec_mimetype="mp4a.40."+i,this.original_codec_mimetype="mp4a.40."+r},W=function(){},Y=function(){};!function(e){e[e.kSpliceNull=0]="kSpliceNull",e[e.kSpliceSchedule=4]="kSpliceSchedule",e[e.kSpliceInsert=5]="kSpliceInsert",e[e.kTimeSignal=6]="kTimeSignal",e[e.kBandwidthReservation=7]="kBandwidthReservation",e[e.kPrivateCommand=255]="kPrivateCommand"}(N||(N={}));var K,X=function(e){var t=e.readBool();return t?(e.readBits(6),{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}):(e.readBits(7),{time_specified_flag:t})},Z=function(e){var t=e.readBool();return e.readBits(6),{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},J=function(e,t){var r=t.readBits(8);return e?{component_tag:r}:{component_tag:r,splice_time:X(t)}},Q=function(e){return{component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}},ee=function(e){var t=e.readBits(32),r=e.readBool();e.readBits(7);var i={splice_event_id:t,splice_event_cancel_indicator:r};if(r)return i;if(i.out_of_network_indicator=e.readBool(),i.program_splice_flag=e.readBool(),i.duration_flag=e.readBool(),e.readBits(5),i.program_splice_flag)i.utc_splice_time=e.readBits(32);else{i.component_count=e.readBits(8),i.components=[];for(var a=0;a<i.component_count;a++)i.components.push(Q(e))}return i.duration_flag&&(i.break_duration=Z(e)),i.unique_program_id=e.readBits(16),i.avail_num=e.readBits(8),i.avails_expected=e.readBits(8),i},te=function(e,t,r,i){return{descriptor_tag:e,descriptor_length:t,identifier:r,provider_avail_id:i.readBits(32)}},re=function(e,t,r,i){var a=i.readBits(8),n=i.readBits(3);i.readBits(5);for(var o="",s=0;s<n;s++)o+=String.fromCharCode(i.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:r,preroll:a,dtmf_count:n,DTMF_char:o}},ie=function(e){var t=e.readBits(8);return e.readBits(7),{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},ae=function(e,t,r,i){var a=i.readBits(32),n=i.readBool();i.readBits(7);var o={descriptor_tag:e,descriptor_length:t,identifier:r,segmentation_event_id:a,segmentation_event_cancel_indicator:n};if(n)return o;if(o.program_segmentation_flag=i.readBool(),o.segmentation_duration_flag=i.readBool(),o.delivery_not_restricted_flag=i.readBool(),o.delivery_not_restricted_flag?i.readBits(5):(o.web_delivery_allowed_flag=i.readBool(),o.no_regional_blackout_flag=i.readBool(),o.archive_allowed_flag=i.readBool(),o.device_restrictions=i.readBits(2)),!o.program_segmentation_flag){o.component_count=i.readBits(8),o.components=[];for(var s=0;s<o.component_count;s++)o.components.push(ie(i))}o.segmentation_duration_flag&&(o.segmentation_duration=i.readBits(40)),o.segmentation_upid_type=i.readBits(8),o.segmentation_upid_length=i.readBits(8);var l=new Uint8Array(o.segmentation_upid_length);for(s=0;s<o.segmentation_upid_length;s++)l[s]=i.readBits(8);return o.segmentation_upid=l.buffer,o.segmentation_type_id=i.readBits(8),o.segment_num=i.readBits(8),o.segments_expected=i.readBits(8),52!==o.segmentation_type_id&&54!==o.segmentation_type_id&&56!==o.segmentation_type_id&&58!==o.segmentation_type_id||(o.sub_segment_num=i.readBits(8),o.sub_segments_expected=i.readBits(8)),o},ne=function(e,t,r,i){return{descriptor_tag:e,descriptor_length:t,identifier:r,TAI_seconds:i.readBits(48),TAI_ns:i.readBits(32),UTC_offset:i.readBits(16)}},oe=function(e){return{component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}},se=function(e,t,r,i){for(var a=i.readBits(4),n=[],o=0;o<a;o++)n.push(oe(i));return{descriptor_tag:e,descriptor_length:t,identifier:r,audio_count:a,components:n}},le=function(e){var t=new f(e),r=t.readBits(8),i=t.readBool(),a=t.readBool();t.readBits(2);var n=t.readBits(12),o=t.readBits(8),s=t.readBool(),l=t.readBits(6),d=4*t.readBits(31)+t.readBits(2),c=t.readBits(8),u=t.readBits(12),h=t.readBits(12),p=t.readBits(8),m=null;p===N.kSpliceNull?m={}:p===N.kSpliceSchedule?m=function(e){for(var t=e.readBits(8),r=[],i=0;i<t;i++)r.push(ee(e));return{splice_count:t,events:r}}(t):p===N.kSpliceInsert?m=function(e){var t=e.readBits(32),r=e.readBool();e.readBits(7);var i={splice_event_id:t,splice_event_cancel_indicator:r};if(r)return i;if(i.out_of_network_indicator=e.readBool(),i.program_splice_flag=e.readBool(),i.duration_flag=e.readBool(),i.splice_immediate_flag=e.readBool(),e.readBits(4),i.program_splice_flag&&!i.splice_immediate_flag&&(i.splice_time=X(e)),!i.program_splice_flag){i.component_count=e.readBits(8),i.components=[];for(var a=0;a<i.component_count;a++)i.components.push(J(i.splice_immediate_flag,e))}return i.duration_flag&&(i.break_duration=Z(e)),i.unique_program_id=e.readBits(16),i.avail_num=e.readBits(8),i.avails_expected=e.readBits(8),i}(t):p===N.kTimeSignal?m={splice_time:X(t)}:p===N.kBandwidthReservation?m={}:p===N.kPrivateCommand?m=function(e,t){for(var r=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),i=new Uint8Array(e-4),a=0;a<e-4;a++)i[a]=t.readBits(8);return{identifier:r,private_data:i.buffer}}(h,t):t.readBits(8*h);for(var _=[],g=t.readBits(16),v=0;v<g;){var y=t.readBits(8),b=t.readBits(8),S=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8));0===y?_.push(te(y,b,S,t)):1===y?_.push(re(y,b,S,t)):2===y?_.push(ae(y,b,S,t)):3===y?_.push(ne(y,b,S,t)):4===y?_.push(se(y,b,S,t)):t.readBits(8*(b-4)),v+=2+b}var w={table_id:r,section_syntax_indicator:i,private_indicator:a,section_length:n,protocol_version:o,encrypted_packet:s,encryption_algorithm:l,pts_adjustment:d,cw_index:c,tier:u,splice_command_length:h,splice_command_type:p,splice_command:m,descriptor_loop_length:g,splice_descriptors:_,E_CRC32:s?t.readBits(32):void 0,CRC32:t.readBits(32)};if(p===N.kSpliceInsert){var E=m;if(E.splice_event_cancel_indicator)return{splice_command_type:p,detail:w,data:e};if(E.program_splice_flag&&!E.splice_immediate_flag){var x=E.duration_flag?E.break_duration.auto_return:void 0,k=E.duration_flag?E.break_duration.duration/90:void 0;return E.splice_time.time_specified_flag?{splice_command_type:p,pts:(d+E.splice_time.pts_time)%Math.pow(2,33),auto_return:x,duraiton:k,detail:w,data:e}:{splice_command_type:p,auto_return:x,duraiton:k,detail:w,data:e}}return{splice_command_type:p,auto_return:x=E.duration_flag?E.break_duration.auto_return:void 0,duraiton:k=E.duration_flag?E.break_duration.duration/90:void 0,detail:w,data:e}}if(p===N.kTimeSignal){var A=m;return A.splice_time.time_specified_flag?{splice_command_type:p,pts:(d+A.splice_time.pts_time)%Math.pow(2,33),detail:w,data:e}:{splice_command_type:p,detail:w,data:e}}return{splice_command_type:p,detail:w,data:e}};!function(e){e[e.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",e[e.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",e[e.kSliceCRA_NUT=21]="kSliceCRA_NUT",e[e.kSliceVPS=32]="kSliceVPS",e[e.kSliceSPS=33]="kSliceSPS",e[e.kSlicePPS=34]="kSlicePPS",e[e.kSliceAUD=35]="kSliceAUD"}(K||(K={}));var de=function(){},ce=function(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)},ue=function(){function e(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&n.a.e(this.TAG,"Could not find H265 startcode until payload end!")}return e.prototype.findNextStartCodeOffset=function(e){for(var t=e,r=this.data_;;){if(t+3>=r.byteLength)return this.eof_flag_=!0,r.byteLength;var i=r[t+0]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3],a=r[t+0]<<16|r[t+1]<<8|r[t+2];if(1===i||1===a)return t;t++}},e.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var r=this.current_startcode_offset_,i=e[r+=1==(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])?4:3]>>1&63,a=(128&e[r])>>>7,n=this.findNextStartCodeOffset(r);if(this.current_startcode_offset_=n,0===a){var o=e.subarray(r,n);(t=new de).type=i,t.data=o}}return t},e}(),he=function(){function e(e,t,r,i){var a=23+(5+e.byteLength)+(5+t.byteLength)+(5+r.byteLength),n=this.data=new Uint8Array(a);n[0]=1,n[1]=(3&i.general_profile_space)<<6|(i.general_tier_flag?1:0)<<5|31&i.general_profile_idc,n[2]=i.general_profile_compatibility_flags_1,n[3]=i.general_profile_compatibility_flags_2,n[4]=i.general_profile_compatibility_flags_3,n[5]=i.general_profile_compatibility_flags_4,n[6]=i.general_constraint_indicator_flags_1,n[7]=i.general_constraint_indicator_flags_2,n[8]=i.general_constraint_indicator_flags_3,n[9]=i.general_constraint_indicator_flags_4,n[10]=i.general_constraint_indicator_flags_5,n[11]=i.general_constraint_indicator_flags_6,n[12]=i.general_level_idc,n[13]=240|(3840&i.min_spatial_segmentation_idc)>>8,n[14]=255&i.min_spatial_segmentation_idc,n[15]=252|3&i.parallelismType,n[16]=252|3&i.chroma_format_idc,n[17]=248|7&i.bit_depth_luma_minus8,n[18]=248|7&i.bit_depth_chroma_minus8,n[19]=0,n[20]=0,n[21]=(3&i.constant_frame_rate)<<6|(7&i.num_temporal_layers)<<3|(i.temporal_id_nested?1:0)<<2|3,n[22]=3,n[23]=128|K.kSliceVPS,n[24]=0,n[25]=1,n[26]=(65280&e.byteLength)>>8,n[27]=(255&e.byteLength)>>0,n.set(e,28),n[23+(5+e.byteLength)+0]=128|K.kSliceSPS,n[23+(5+e.byteLength)+1]=0,n[23+(5+e.byteLength)+2]=1,n[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,n[23+(5+e.byteLength)+4]=(255&t.byteLength)>>0,n.set(t,23+(5+e.byteLength)+5),n[23+(5+e.byteLength+5+t.byteLength)+0]=128|K.kSlicePPS,n[23+(5+e.byteLength+5+t.byteLength)+1]=0,n[23+(5+e.byteLength+5+t.byteLength)+2]=1,n[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&r.byteLength)>>8,n[23+(5+e.byteLength+5+t.byteLength)+4]=(255&r.byteLength)>>0,n.set(r,23+(5+e.byteLength+5+t.byteLength)+5)}return e.prototype.getData=function(){return this.data},e}(),pe=function(){},fe=function(){},me=function(){},_e=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],ge=function(){function e(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&n.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return e.prototype.findNextSyncwordOffset=function(e){for(var t=e,r=this.data_;;){if(t+7>=r.byteLength)return this.eof_flag_=!0,r.byteLength;if(2935==(r[t+0]<<8|r[t+1]<<0))return t;t++}},e.prototype.readNextAC3Frame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var r=this.current_syncword_offset_,i=e[r+4]>>6,a=[48e3,44200,33e3][i],n=63&e[r+4],o=2*_e[i][n];if(r+o>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var s=this.findNextSyncwordOffset(r+o);this.current_syncword_offset_=s;var l=e[r+5]>>3,d=7&e[r+5],c=e[r+6]>>5,u=0;0!=(1&c)&&1!==c&&(u+=2),0!=(4&c)&&(u+=2),2===c&&(u+=2);var h=(e[r+6]<<8|e[r+7]<<0)>>12-u&1,p=[2,1,2,3,3,4,4,5][c]+h;(t=new me).sampling_frequency=a,t.channel_count=p,t.channel_mode=c,t.bit_stream_identification=l,t.low_frequency_effects_channel_on=h,t.bit_stream_mode=d,t.frame_size_code=n,t.data=e.subarray(r,r+o)}return t},e.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},e.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},e}(),ve=function(e){var t;t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224],this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"},ye=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),be=function(){return(be=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Se=function(e){function t(t,r){var i=e.call(this)||this;return i.TAG="TSDemuxer",i.first_parse_=!0,i.media_info_=new s.a,i.timescale_=90,i.duration_=0,i.current_pmt_pid_=-1,i.program_pmt_map_={},i.pes_slice_queues_={},i.section_slice_queues_={},i.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},i.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},i.aac_last_sample_pts_=void 0,i.aac_last_incomplete_data_=null,i.has_video_=!1,i.has_audio_=!1,i.video_init_segment_dispatched_=!1,i.audio_init_segment_dispatched_=!1,i.video_metadata_changed_=!1,i.audio_metadata_changed_=!1,i.loas_previous_frame=null,i.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},i.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},i.ts_packet_size_=t.ts_packet_size,i.sync_offset_=t.sync_offset,i.config_=r,i}return ye(t,e),t.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,e.prototype.destroy.call(this)},t.probe=function(e){var t=new Uint8Array(e),r=-1,i=188;if(t.byteLength<=3*i)return{needMoreData:!0};for(;-1===r;){for(var a=Math.min(1e3,t.byteLength-3*i),o=0;o<a;){if(71===t[o]&&71===t[o+i]&&71===t[o+2*i]){r=o;break}o++}if(-1===r)if(188===i)i=192;else{if(192!==i)break;i=204}}return-1===r?{match:!1}:(192===i&&r>=4?(n.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),r-=4):204===i&&n.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:i,sync_offset:r})},t.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},t.prototype.resetMediaInfo=function(){this.media_info_=new s.a},t.prototype.parseChunks=function(e,t){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new u.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var r=0;for(this.first_parse_&&(this.first_parse_=!1,r=this.sync_offset_);r+this.ts_packet_size_<=e.byteLength;){var i=t+r;192===this.ts_packet_size_&&(r+=4);var a=new Uint8Array(e,r,188),o=a[0];if(71!==o){n.a.e(this.TAG,"sync_byte = "+o+", not 0x47");break}var s=(64&a[1])>>>6,l=(a[1],(31&a[1])<<8|a[2]),d=(48&a[3])>>>4,c=15&a[3],h={},p=4;if(2==d||3==d){var f=a[4];if(5+f===188){r+=188,204===this.ts_packet_size_&&(r+=16);continue}f>0&&(h=this.parseAdaptationField(e,r+4,1+f)),p=5+f}if(1==d||3==d)if(0===l||l===this.current_pmt_pid_||null!=this.pmt_&&this.pmt_.pid_stream_type[l]===S.kSCTE35){var m=188-p;this.handleSectionSlice(e,r+p,m,{pid:l,file_position:i,payload_unit_start_indicator:s,continuity_conunter:c,random_access_indicator:h.random_access_indicator})}else if(null!=this.pmt_&&null!=this.pmt_.pid_stream_type[l]){m=188-p;var _=this.pmt_.pid_stream_type[l];l!==this.pmt_.common_pids.h264&&l!==this.pmt_.common_pids.h265&&l!==this.pmt_.common_pids.adts_aac&&l!==this.pmt_.common_pids.loas_aac&&l!==this.pmt_.common_pids.ac3&&l!==this.pmt_.common_pids.opus&&l!==this.pmt_.common_pids.mp3&&!0!==this.pmt_.pes_private_data_pids[l]&&!0!==this.pmt_.timed_id3_pids[l]||this.handlePESSlice(e,r+p,m,{pid:l,stream_type:_,file_position:i,payload_unit_start_indicator:s,continuity_conunter:c,random_access_indicator:h.random_access_indicator})}r+=188,204===this.ts_packet_size_&&(r+=16)}return this.dispatchAudioVideoMediaSegment(),r},t.prototype.parseAdaptationField=function(e,t,r){var i=new Uint8Array(e,t,r),a=i[0];return a>0?a>183?(n.a.w(this.TAG,"Illegal adaptation_field_length: "+a),{}):{discontinuity_indicator:(128&i[1])>>>7,random_access_indicator:(64&i[1])>>>6,elementary_stream_priority_indicator:(32&i[1])>>>5}:{}},t.prototype.handleSectionSlice=function(e,t,r,i){var a=new Uint8Array(e,t,r),n=this.section_slice_queues_[i.pid];if(i.payload_unit_start_indicator){var o=a[0];if(null!=n&&0!==n.total_length){var s=new Uint8Array(e,t+1,Math.min(r,o));n.slices.push(s),n.total_length+=s.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,i):this.clearSlices(n,i)}for(var l=1+o;l<a.byteLength&&255!==a[l+0];){var d=(15&a[l+1])<<8|a[l+2];this.section_slice_queues_[i.pid]=new L,(n=this.section_slice_queues_[i.pid]).expected_length=d+3,n.file_position=i.file_position,n.random_access_indicator=i.random_access_indicator,s=new Uint8Array(e,t+l,Math.min(r-l,n.expected_length-n.total_length)),n.slices.push(s),n.total_length+=s.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,i):n.total_length>=n.expected_length&&this.clearSlices(n,i),l+=s.byteLength}}else null!=n&&0!==n.total_length&&(s=new Uint8Array(e,t,Math.min(r,n.expected_length-n.total_length)),n.slices.push(s),n.total_length+=s.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,i):n.total_length>=n.expected_length&&this.clearSlices(n,i))},t.prototype.handlePESSlice=function(e,t,r,i){var a=new Uint8Array(e,t,r),o=a[0]<<16|a[1]<<8|a[2],s=(a[3],a[4]<<8|a[5]);if(i.payload_unit_start_indicator){if(1!==o)return void n.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value "+o);var l=this.pes_slice_queues_[i.pid];l&&(0===l.expected_length||l.expected_length===l.total_length?this.emitPESSlices(l,i):this.clearSlices(l,i)),this.pes_slice_queues_[i.pid]=new L,this.pes_slice_queues_[i.pid].file_position=i.file_position,this.pes_slice_queues_[i.pid].random_access_indicator=i.random_access_indicator}if(null!=this.pes_slice_queues_[i.pid]){var d=this.pes_slice_queues_[i.pid];d.slices.push(a),i.payload_unit_start_indicator&&(d.expected_length=0===s?0:s+6),d.total_length+=a.byteLength,d.expected_length>0&&d.expected_length===d.total_length?this.emitPESSlices(d,i):d.expected_length>0&&d.expected_length<d.total_length&&this.clearSlices(d,i)}},t.prototype.emitSectionSlices=function(e,t){for(var r=new Uint8Array(e.total_length),i=0,a=0;i<e.slices.length;i++){var n=e.slices[i];r.set(n,a),a+=n.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new D;o.pid=t.pid,o.data=r,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parseSection(o)},t.prototype.emitPESSlices=function(e,t){for(var r=new Uint8Array(e.total_length),i=0,a=0;i<e.slices.length;i++){var n=e.slices[i];r.set(n,a),a+=n.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new R;o.pid=t.pid,o.data=r,o.stream_type=t.stream_type,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parsePES(o)},t.prototype.clearSlices=function(e,t){e.slices=[],e.expected_length=-1,e.total_length=0},t.prototype.parseSection=function(e){var t=e.data,r=e.pid;0===r?this.parsePAT(t):r===this.current_pmt_pid_?this.parsePMT(t):null!=this.pmt_&&this.pmt_.scte_35_pids[r]&&this.parseSCTE35(t)},t.prototype.parsePES=function(e){var t=e.data,r=t[0]<<16|t[1]<<8|t[2],i=t[3],a=t[4]<<8|t[5];if(1===r)if(188!==i&&190!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i){t[6];var o=(192&t[7])>>>6,s=t[8],l=void 0,d=void 0;2!==o&&3!==o||(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,d=3===o?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:l);var c=9+s,u=void 0;if(0!==a){if(a<3+s)return void n.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");u=a-3-s}else u=t.byteLength-c;var h=t.subarray(c,c+u);switch(e.stream_type){case S.kMPEG1Audio:case S.kMPEG2Audio:this.parseMP3Payload(h,l);break;case S.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(h,l):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(h,l):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(h,l,d,e.pid,i):this.parsePESPrivateDataPayload(h,l,d,e.pid,i);break;case S.kADTSAAC:this.parseADTSAACPayload(h,l);break;case S.kLOASAAC:this.parseLOASAACPayload(h,l);break;case S.kAC3:this.parseAC3Payload(h,l);break;case S.kID3:this.parseTimedID3MetadataPayload(h,l,d,e.pid,i);break;case S.kH264:this.parseH264Payload(h,l,d,e.file_position,e.random_access_indicator);break;case S.kH265:this.parseH265Payload(h,l,d,e.file_position,e.random_access_indicator)}}else 188!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i||e.stream_type!==S.kPESPrivateData||(c=6,u=void 0,u=0!==a?a:t.byteLength-c,h=t.subarray(c,c+u),this.parsePESPrivateDataPayload(h,void 0,void 0,e.pid,i));else n.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value "+r)},t.prototype.parsePAT=function(e){var t=e[0];if(0===t){var r=(15&e[1])<<8|e[2],i=(e[3],e[4],(62&e[5])>>>1),a=1&e[5],o=e[6],s=(e[7],null);if(1===a&&0===o)(s=new A).version_number=i;else if(null==(s=this.pat_))return;for(var l=r-5-4,d=-1,c=-1,u=8;u<8+l;u+=4){var h=e[u]<<8|e[u+1],p=(31&e[u+2])<<8|e[u+3];0===h?s.network_pid=p:(s.program_pmt_pid[h]=p,-1===d&&(d=h),-1===c&&(c=p))}1===a&&0===o&&(null==this.pat_&&n.a.v(this.TAG,"Parsed first PAT: "+JSON.stringify(s)),this.pat_=s,this.current_program_=d,this.current_pmt_pid_=c)}else n.a.e(this.TAG,"parsePAT: table_id "+t+" is not corresponded to PAT!")},t.prototype.parsePMT=function(e){var t=e[0];if(2===t){var r=(15&e[1])<<8|e[2],i=e[3]<<8|e[4],a=(62&e[5])>>>1,o=1&e[5],s=e[6],l=(e[7],null);if(1===o&&0===s)(l=new C).program_number=i,l.version_number=a,this.program_pmt_map_[i]=l;else if(null==(l=this.program_pmt_map_[i]))return;e[8],e[9];for(var d=(15&e[10])<<8|e[11],c=12+d,u=r-9-d-4,h=c;h<c+u;){var p=e[h],f=(31&e[h+1])<<8|e[h+2],m=(15&e[h+3])<<8|e[h+4];l.pid_stream_type[f]=p;var _=l.common_pids.h264||l.common_pids.h265,g=l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3;if(p!==S.kH264||_)if(p!==S.kH265||_)if(p!==S.kADTSAAC||g)if(p!==S.kLOASAAC||g)if(p!==S.kAC3||g)if(p!==S.kMPEG1Audio&&p!==S.kMPEG2Audio||g)if(p===S.kPESPrivateData){if(l.pes_private_data_pids[f]=!0,m>0){for(var v=h+5;v<h+5+m;){var y=e[v+0],b=e[v+1];if(5===y){var w=String.fromCharCode.apply(String,Array.from(e.subarray(v+2,v+2+b)));"VANC"===w?l.smpte2038_pids[f]=!0:"Opus"===w&&(l.common_pids.opus=f)}else if(127===y&&f===l.common_pids.opus){var E=null;if(128===e[v+2]&&(E=e[v+3]),null==E){n.a.e(this.TAG,"Not Supported Opus channel count.");continue}var x={codec:"opus",channel_count:0==(15&E)?2:15&E,channel_config_code:E,sample_rate:48e3},k={codec:"opus",meta:x};0==this.audio_init_segment_dispatched_?(this.audio_metadata_=x,this.dispatchAudioInitSegment(k)):this.detectAudioMetadataChange(k)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(k))}v+=2+b}var A=e.subarray(h+5,h+5+m);this.dispatchPESPrivateDataDescriptor(f,p,A)}}else p===S.kID3?l.timed_id3_pids[f]=!0:p===S.kSCTE35&&(l.scte_35_pids[f]=!0);else l.common_pids.mp3=f;else l.common_pids.ac3=f;else l.common_pids.loas_aac=f;else l.common_pids.adts_aac=f;else l.common_pids.h265=f;else l.common_pids.h264=f;h+=5+m}i===this.current_program_&&(null==this.pmt_&&n.a.v(this.TAG,"Parsed first PMT: "+JSON.stringify(l)),this.pmt_=l,(l.common_pids.h264||l.common_pids.h265)&&(this.has_video_=!0),(l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3)&&(this.has_audio_=!0))}else n.a.e(this.TAG,"parsePMT: table_id "+t+" is not corresponded to PMT!")},t.prototype.parseSCTE35=function(e){var t=le(e);if(null!=t.pts){var r=Math.floor(t.pts/this.timescale_);t.pts=r}else t.nearest_pts=this.aac_last_sample_pts_;this.onSCTE35Metadata&&this.onSCTE35Metadata(t)},t.prototype.parseH264Payload=function(e,t,r,i,a){for(var o=new B(e),s=null,l=[],d=0,c=!1;null!=(s=o.readNextNaluPayload());){var u=new O(s);if(u.type===T.kSliceSPS){var h=m.parseSPS(s.data);this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(u,h)&&(n.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:u,pps:void 0,details:h}):(this.video_metadata_.sps=u,this.video_metadata_.details=h)}else u.type===T.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=u,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(u.type===T.kSliceIDR||u.type===T.kSliceNonIDR&&1===a)&&(c=!0);this.video_init_segment_dispatched_&&(l.push(u),d+=u.data.byteLength)}var p=Math.floor(t/this.timescale_),f=Math.floor(r/this.timescale_);if(l.length){var _=this.video_track_,g={units:l,length:d,isKeyframe:c,dts:f,pts:p,cts:p-f,file_position:i};_.samples.push(g),_.length+=d}},t.prototype.parseH265Payload=function(e,t,r,i,a){for(var o=new ue(e),s=null,l=[],d=0,c=!1;null!=(s=o.readNextNaluPayload());){var u=new ce(s);if(u.type===K.kSliceVPS){if(!this.video_init_segment_dispatched_){var h=g.parseVPS(s.data);this.video_metadata_.vps=u,this.video_metadata_.details=be(be({},this.video_metadata_.details),h)}}else u.type===K.kSliceSPS?(h=g.parseSPS(s.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(u,h)&&(n.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:u,pps:void 0,details:h}):(this.video_metadata_.sps=u,this.video_metadata_.details=be(be({},this.video_metadata_.details),h))):u.type===K.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(h=g.parsePPS(s.data),this.video_metadata_.pps=u,this.video_metadata_.details=be(be({},this.video_metadata_.details),h),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):u.type!==K.kSliceIDR_W_RADL&&u.type!==K.kSliceIDR_N_LP&&u.type!==K.kSliceCRA_NUT||(c=!0);this.video_init_segment_dispatched_&&(l.push(u),d+=u.data.byteLength)}var p=Math.floor(t/this.timescale_),f=Math.floor(r/this.timescale_);if(l.length){var m=this.video_track_,_={units:l,length:d,isKeyframe:c,dts:f,pts:p,cts:p-f,file_position:i};m.samples.push(_),m.length+=d}},t.prototype.detectVideoMetadataChange=function(e,t){if(t.codec_mimetype!==this.video_metadata_.details.codec_mimetype)return n.a.v(this.TAG,"Video: Codec mimeType changed from "+this.video_metadata_.details.codec_mimetype+" to "+t.codec_mimetype),!0;if(t.codec_size.width!==this.video_metadata_.details.codec_size.width||t.codec_size.height!==this.video_metadata_.details.codec_size.height){var r=this.video_metadata_.details.codec_size,i=t.codec_size;return n.a.v(this.TAG,"Video: Coded Resolution changed from "+r.width+"x"+r.height+" to "+i.width+"x"+i.height),!0}return t.present_size.width!==this.video_metadata_.details.present_size.width&&(n.a.v(this.TAG,"Video: Present resolution width changed from "+this.video_metadata_.details.present_size.width+" to "+t.present_size.width),!0)},t.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},t.prototype.dispatchVideoInitSegment=function(){var e=this.video_metadata_.details,t={type:"video"};t.id=this.video_track_.id,t.timescale=1e3,t.duration=this.duration_,t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height,t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.sarRatio=e.sar_ratio,t.frameRate=e.frame_rate;var r=t.frameRate.fps_den,i=t.frameRate.fps_num;if(t.refSampleDuration=r/i*1e3,t.codec=e.codec_mimetype,this.video_metadata_.vps){var a=this.video_metadata_.vps.data.subarray(4),o=this.video_metadata_.sps.data.subarray(4),s=this.video_metadata_.pps.data.subarray(4),l=new he(a,o,s,e);t.hvcc=l.getData(),0==this.video_init_segment_dispatched_&&n.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: "+t.codec)}else{o=this.video_metadata_.sps.data.subarray(4),s=this.video_metadata_.pps.data.subarray(4);var d=new j(o,s,e);t.avcc=d.getData(),0==this.video_init_segment_dispatched_&&n.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: "+t.codec)}this.onTrackMetadata("video",t),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var c=this.media_info_;c.hasVideo=!0,c.width=t.codecWidth,c.height=t.codecHeight,c.fps=t.frameRate.fps,c.profile=t.profile,c.level=t.level,c.refFrames=e.ref_frames,c.chromaFormat=e.chroma_format_string,c.sarNum=t.sarRatio.width,c.sarDen=t.sarRatio.height,c.videoCodec=t.codec,c.hasAudio&&c.audioCodec?c.mimeType='video/mp2t; codecs="'+c.videoCodec+","+c.audioCodec+'"':c.mimeType='video/mp2t; codecs="'+c.videoCodec+'"',c.isComplete()&&this.onMediaInfo(c)},t.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},t.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},t.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},t.prototype.parseADTSAACPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);r.set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r}var i,a;if(null!=t&&(a=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)i=1024/this.audio_metadata_.sampling_frequency*1e3,a=this.aac_last_sample_pts_+i;else if(null==t)return void n.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){i=1024/this.audio_metadata_.sampling_frequency*1e3;var o=this.aac_last_sample_pts_+i;Math.abs(o-a)>1&&(n.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+o+"ms, PES pts: "+a+"ms"),a=o)}}for(var s,l=new H(e),d=null,c=a;null!=(d=l.readNextAACFrame());){i=1024/d.sampling_frequency*1e3;var u={codec:"aac",data:d};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:d.audio_object_type,sampling_freq_index:d.sampling_freq_index,sampling_frequency:d.sampling_frequency,channel_config:d.channel_config},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),s=c;var h=Math.floor(c),p={unit:d.data,length:d.data.byteLength,pts:h,dts:h};this.audio_track_.samples.push(p),this.audio_track_.length+=d.data.byteLength,c+=i}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),s&&(this.aac_last_sample_pts_=s)}},t.prototype.parseLOASAACPayload=function(e,t){var r;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var i=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);i.set(this.aac_last_incomplete_data_,0),i.set(e,this.aac_last_incomplete_data_.byteLength),e=i}var a,o;if(null!=t&&(o=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)a=1024/this.audio_metadata_.sampling_frequency*1e3,o=this.aac_last_sample_pts_+a;else if(null==t)return void n.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){a=1024/this.audio_metadata_.sampling_frequency*1e3;var s=this.aac_last_sample_pts_+a;Math.abs(s-o)>1&&(n.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+s+"ms, PES pts: "+o+"ms"),o=s)}}for(var l,d=new G(e),c=null,u=o;null!=(c=d.readNextAACFrame(null!==(r=this.loas_previous_frame)&&void 0!==r?r:void 0));){this.loas_previous_frame=c,a=1024/c.sampling_frequency*1e3;var h={codec:"aac",data:c};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:c.audio_object_type,sampling_freq_index:c.sampling_freq_index,sampling_frequency:c.sampling_frequency,channel_config:c.channel_config},this.dispatchAudioInitSegment(h)):this.detectAudioMetadataChange(h)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(h)),l=u;var p=Math.floor(u),f={unit:c.data,length:c.data.byteLength,pts:p,dts:p};this.audio_track_.samples.push(f),this.audio_track_.length+=c.data.byteLength,u+=a}d.hasIncompleteData()&&(this.aac_last_incomplete_data_=d.getIncompleteData()),l&&(this.aac_last_sample_pts_=l)}},t.prototype.parseAC3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var r,i;if(null!=t&&(i=t/this.timescale_),"ac-3"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)r=1536/this.audio_metadata_.sampling_frequency*1e3,i=this.aac_last_sample_pts_+r;else if(null==t)return void n.a.w(this.TAG,"Opus: Unknown pts");for(var a,o=new ge(e),s=null,l=i;null!=(s=o.readNextAC3Frame());){r=1536/s.sampling_frequency*1e3;var d={codec:"ac-3",data:s};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"ac-3",sampling_frequency:s.sampling_frequency,bit_stream_identification:s.bit_stream_identification,bit_stream_mode:s.bit_stream_mode,low_frequency_effects_channel_on:s.low_frequency_effects_channel_on,channel_mode:s.channel_mode},console.log(JSON.stringify(this.audio_metadata_)),this.dispatchAudioInitSegment(d)):this.detectAudioMetadataChange(d)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(d)),a=l;var c=Math.floor(l),u={unit:s.data,length:s.data.byteLength,pts:c,dts:c};this.audio_track_.samples.push(u),this.audio_track_.length+=s.data.byteLength,l+=r}a&&(this.aac_last_sample_pts_=a)}},t.prototype.parseOpusPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var r,i;if(null!=t&&(i=t/this.timescale_),"opus"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)r=20,i=this.aac_last_sample_pts_+r;else if(null==t)return void n.a.w(this.TAG,"Opus: Unknown pts");for(var a,o=i,s=0;s<e.length;){r=20;for(var l=0!=(16&e[s+1]),d=0!=(8&e[s+1]),c=s+2,u=0;255===e[c];)u+=255,c+=1;u+=e[c],c+=1,c+=l?2:0,c+=d?2:0,a=o;var h=Math.floor(o),p=e.slice(c,c+u),f={unit:p,length:p.byteLength,pts:h,dts:h};this.audio_track_.samples.push(f),this.audio_track_.length+=p.byteLength,o+=r,s=c+u}a&&(this.aac_last_sample_pts_=a)}},t.prototype.parseMP3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var r=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],i=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],a=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],n=e[1]>>>3&3,o=(6&e[1])>>1,s=(240&e[2])>>>4,l=(12&e[2])>>>2,d=3!=(e[3]>>>6&3)?2:1,c=0,u=34;switch(n){case 0:c=[11025,12e3,8e3,0][l];break;case 2:c=[22050,24e3,16e3,0][l];break;case 3:c=[44100,48e3,32e3,0][l]}switch(o){case 1:u=34,s<a.length&&a[s];break;case 2:u=33,s<i.length&&i[s];break;case 3:u=32,s<r.length&&r[s]}var h=new fe;h.object_type=u,h.sample_rate=c,h.channel_count=d,h.data=e;var p={codec:"mp3",data:h};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"mp3",object_type:u,sample_rate:c,channel_count:d},this.dispatchAudioInitSegment(p)):this.detectAudioMetadataChange(p)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(p));var f={unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_};this.audio_track_.samples.push(f),this.audio_track_.length+=e.byteLength}},t.prototype.detectAudioMetadataChange=function(e){if(e.codec!==this.audio_metadata_.codec)return n.a.v(this.TAG,"Audio: Audio Codecs changed from "+this.audio_metadata_.codec+" to "+e.codec),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){if((t=e.data).audio_object_type!==this.audio_metadata_.audio_object_type)return n.a.v(this.TAG,"AAC: AudioObjectType changed from "+this.audio_metadata_.audio_object_type+" to "+t.audio_object_type),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return n.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+this.audio_metadata_.sampling_freq_index+" to "+t.sampling_freq_index),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return n.a.v(this.TAG,"AAC: Channel configuration changed from "+this.audio_metadata_.channel_config+" to "+t.channel_config),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){var t;if((t=e.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return n.a.v(this.TAG,"AC3: Sampling Frequency changed from "+this.audio_metadata_.sampling_frequency+" to "+t.sampling_frequency),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return n.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+this.audio_metadata_.bit_stream_identification+" to "+t.bit_stream_identification),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return n.a.v(this.TAG,"AC3: BitStream Mode changed from "+this.audio_metadata_.bit_stream_mode+" to "+t.bit_stream_mode),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return n.a.v(this.TAG,"AC3: Channel Mode changed from "+this.audio_metadata_.channel_mode+" to "+t.channel_mode),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return n.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+this.audio_metadata_.low_frequency_effects_channel_on+" to "+t.low_frequency_effects_channel_on),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){if((r=e.meta).sample_rate!==this.audio_metadata_.sample_rate)return n.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+r.sample_rate),!0;if(r.channel_count!==this.audio_metadata_.channel_count)return n.a.v(this.TAG,"Opus: Channel count changed from "+this.audio_metadata_.channel_count+" to "+r.channel_count),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){var r;if((r=e.data).object_type!==this.audio_metadata_.object_type)return n.a.v(this.TAG,"MP3: AudioObjectType changed from "+this.audio_metadata_.object_type+" to "+r.object_type),!0;if(r.sample_rate!==this.audio_metadata_.sample_rate)return n.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+r.sample_rate),!0;if(r.channel_count!==this.audio_metadata_.channel_count)return n.a.v(this.TAG,"MP3: Channel count changed from "+this.audio_metadata_.channel_count+" to "+r.channel_count),!0}return!1},t.prototype.dispatchAudioInitSegment=function(e){var t={type:"audio"};if(t.id=this.audio_track_.id,t.timescale=1e3,t.duration=this.duration_,"aac"===this.audio_metadata_.codec){var r="aac"===e.codec?e.data:null,i=new q(r);t.audioSampleRate=i.sampling_rate,t.channelCount=i.channel_count,t.codec=i.codec_mimetype,t.originalCodec=i.original_codec_mimetype,t.config=i.config,t.refSampleDuration=1024/t.audioSampleRate*t.timescale}else if("ac-3"===this.audio_metadata_.codec){var a="ac-3"===e.codec?e.data:null,o=new ve(a);t.audioSampleRate=o.sampling_rate,t.channelCount=o.channel_count,t.codec=o.codec_mimetype,t.originalCodec=o.original_codec_mimetype,t.config=o.config,t.refSampleDuration=1536/t.audioSampleRate*t.timescale}else"opus"===this.audio_metadata_.codec?(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.channelConfigCode=this.audio_metadata_.channel_config_code,t.codec="opus",t.originalCodec="opus",t.config=void 0,t.refSampleDuration=20):"mp3"===this.audio_metadata_.codec&&(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.codec="mp3",t.originalCodec="mp3",t.config=void 0);0==this.audio_init_segment_dispatched_&&n.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: "+t.codec),this.onTrackMetadata("audio",t),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var s=this.media_info_;s.hasAudio=!0,s.audioCodec=t.originalCodec,s.audioSampleRate=t.audioSampleRate,s.audioChannelCount=t.channelCount,s.hasVideo&&s.videoCodec?s.mimeType='video/mp2t; codecs="'+s.videoCodec+","+s.audioCodec+'"':s.mimeType='video/mp2t; codecs="'+s.audioCodec+'"',s.isComplete()&&this.onMediaInfo(s)},t.prototype.dispatchPESPrivateDataDescriptor=function(e,t,r){var i=new Y;i.pid=e,i.stream_type=t,i.descriptor=r,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(i)},t.prototype.parsePESPrivateDataPayload=function(e,t,r,i,a){var n=new W;if(n.pid=i,n.stream_id=a,n.len=e.byteLength,n.data=e,null!=t){var o=Math.floor(t/this.timescale_);n.pts=o}else n.nearest_pts=this.aac_last_sample_pts_;if(null!=r){var s=Math.floor(r/this.timescale_);n.dts=s}this.onPESPrivateData&&this.onPESPrivateData(n)},t.prototype.parseTimedID3MetadataPayload=function(e,t,r,i,a){var n=new W;if(n.pid=i,n.stream_id=a,n.len=e.byteLength,n.data=e,null!=t){var o=Math.floor(t/this.timescale_);n.pts=o}if(null!=r){var s=Math.floor(r/this.timescale_);n.dts=s}this.onTimedID3Metadata&&this.onTimedID3Metadata(n)},t.prototype.parseSMPTE2038MetadataPayload=function(e,t,r,i,a){var n=new pe;if(n.pid=i,n.stream_id=a,n.len=e.byteLength,n.data=e,null!=t){var o=Math.floor(t/this.timescale_);n.pts=o}if(n.nearest_pts=this.aac_last_sample_pts_,null!=r){var s=Math.floor(r/this.timescale_);n.dts=s}n.ancillaries=function(e){for(var t=new f(e),r=0,i=[];r+=6,0===t.readBits(6);){var a=t.readBool();r+=1;var n=t.readBits(11);r+=11;var o=t.readBits(12);r+=12;var s=255&t.readBits(10);r+=10;var l=255&t.readBits(10);r+=10;var d=255&t.readBits(10);r+=10;for(var c=new Uint8Array(d),u=0;u<d;u++){var h=255&t.readBits(10);r+=10,c[u]=h}t.readBits(10),r+=10;var p="User Defined";65===s?7===l&&(p="SCTE-104"):95===s?220===l?p="ARIB STD-B37 (1SEG)":221===l?p="ARIB STD-B37 (ANALOG)":222===l?p="ARIB STD-B37 (SD)":223===l&&(p="ARIB STD-B37 (HD)"):97===s&&(1===l?p="EIA-708":2===l&&(p="EIA-608")),i.push({yc_indicator:a,line_number:n,horizontal_offset:o,did:s,sdid:l,user_data:c,description:p,information:{}}),t.readBits(8-(r-Math.floor(r/8))%8),r+=(8-(r-Math.floor(r/8)))%8}return t.destroy(),t=null,i}(e),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(n)},t}(k),we=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<r;t++)for(var n=arguments[t],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i},Ee=function(){function e(){}return e.init=function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=e.constants={};r.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),r.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),r.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),r.STSC=r.STCO=r.STTS,r.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),r.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),r.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),r.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=8,r=null,i=Array.prototype.slice.call(arguments,1),a=i.length,n=0;n<a;n++)t+=i[n].byteLength;(r=new Uint8Array(t))[0]=t>>>24&255,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r.set(e,4);var o=8;for(n=0;n<a;n++)r.set(i[n],o),o+=i[n].byteLength;return r},e.generateInitSegment=function(t){var r=e.box(e.types.ftyp,e.constants.FTYP),i=e.moov(t),a=new Uint8Array(r.byteLength+i.byteLength);return a.set(r,0),a.set(i,r.byteLength),a},e.moov=function(t){var r=e.mvhd(t.timescale,t.duration),i=e.trak(t),a=e.mvex(t);return e.box(e.types.moov,r,i,a)},e.mvhd=function(t,r){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var r=t.id,i=t.duration,a=t.presentWidth,n=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>>8&255,255&a,0,0,n>>>8&255,255&n,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var r=t.timescale,i=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))},e.hdlr=function(t){var r=null;return r="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,r)},e.minf=function(t){var r=null;return r="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,r,e.dinf(),e.stbl(t))},e.dinf=function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(t)):"ac-3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.ac3(t)):"opus"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.Opus(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):"video"===t.type&&t.codec.startsWith("hvc1")?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.hvc1(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var r=t.channelCount,i=t.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types[".mp3"],a)},e.mp4a=function(t){var r=t.channelCount,i=t.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.mp4a,a,e.esds(t))},e.ac3=function(t){var r=t.channelCount,i=t.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types["ac-3"],a,e.box(e.types.dac3,new Uint8Array(t.config)))},e.esds=function(t){var r=t.config||[],i=r.length,a=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(r).concat([6,1,2]));return e.box(e.types.esds,a)},e.Opus=function(t){var r=t.channelCount,i=t.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.Opus,a,e.dOps(t))},e.dOps=function(t){var r=t.channelCount,i=t.channelConfigCode,a=t.audioSampleRate;if(t.config)return e.box(e.types.dOps,o);var n=[];switch(i){case 1:case 2:n=[0];break;case 0:n=[255,1,1,0,1];break;case 128:n=[255,2,0,0,1];break;case 3:n=[1,2,1,0,2,1];break;case 4:n=[1,2,2,0,1,2,3];break;case 5:n=[1,3,2,0,4,1,2,3];break;case 6:n=[1,4,2,0,4,1,2,3,5];break;case 7:n=[1,4,2,0,4,1,2,3,5,6];break;case 8:n=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:n=[1,1,2,0,1];break;case 131:n=[1,1,3,0,1,2];break;case 132:n=[1,1,4,0,1,2,3];break;case 133:n=[1,1,5,0,1,2,3,4];break;case 134:n=[1,1,6,0,1,2,3,4,5];break;case 135:n=[1,1,7,0,1,2,3,4,5,6];break;case 136:n=[1,1,8,0,1,2,3,4,5,6,7]}var o=new Uint8Array(we([0,r,0,0,a>>>24&255,a>>>17&255,a>>>8&255,a>>>0&255,0,0],n));return e.box(e.types.dOps,o)},e.avc1=function(t){var r=t.avcc,i=t.codecWidth,a=t.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,a>>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,n,e.box(e.types.avcC,r))},e.hvc1=function(t){var r=t.hvcc,i=t.codecWidth,a=t.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,a>>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.hvc1,n,e.box(e.types.hvcC,r))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var r=t.id,i=new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,i)},e.moof=function(t,r){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,r))},e.mfhd=function(t){var r=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,r)},e.traf=function(t,r){var i=t.id,a=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),n=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),o=e.sdtp(t),s=e.trun(t,o.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,a,n,s,o)},e.sdtp=function(t){for(var r=t.samples||[],i=r.length,a=new Uint8Array(4+i),n=0;n<i;n++){var o=r[n].flags;a[n+4]=o.isLeading<<6|o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy}return e.box(e.types.sdtp,a)},e.trun=function(t,r){var i=t.samples||[],a=i.length,n=12+16*a,o=new Uint8Array(n);r+=8+n,o.set([0,0,15,1,a>>>24&255,a>>>16&255,a>>>8&255,255&a,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0);for(var s=0;s<a;s++){var l=i[s].duration,d=i[s].size,c=i[s].flags,u=i[s].cts;o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*s)}return e.box(e.types.trun,o)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();Ee.init();var xe=Ee,ke=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),Ae=r(7),Te=function(){function e(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new Ae.c("audio"),this._videoSegmentInfoList=new Ae.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!o.a.chrome||!(o.a.version.major<50||50===o.a.version.major&&o.a.version.build<2661)),this._fillSilentAfterSeek=o.a.msedge||o.a.msie,this._mp3UseMpegAudio=!o.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},e.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(e.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),e.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},e.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new u.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var r=null,i="mp4",a=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(i="mpeg",a="",r=new Uint8Array):r=xe.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,r=xe.generateInitSegment(t)}if(!this._onInitSegment)throw new u.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:r.buffer,codec:a,container:e+"/"+i,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e&&e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t&&t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,r={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(r.samples.push(e),r.length=e.length);var i={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(i.samples.push(t),i.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(r,!0),this._remuxAudio(i,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var r,i=e,a=i.samples,s=void 0,l=-1,d=this._audioMeta.refSampleDuration,c="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,u=this._dtsBaseInited&&void 0===this._audioNextDts,h=!1;if(a&&0!==a.length&&(1!==a.length||t)){var p=0,f=null,m=0;c?(p=0,m=i.length):(p=8,m=8+i.length);var _=null;if(a.length>1&&(m-=(_=a.pop()).length),null!=this._audioStashedLastSample){var g=this._audioStashedLastSample;this._audioStashedLastSample=null,a.unshift(g),m+=g.length}null!=_&&(this._audioStashedLastSample=_);var v=a[0].dts-this._dtsBase;if(this._audioNextDts)s=v-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())s=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(h=!0);else{var y=this._audioSegmentInfoList.getLastSampleBefore(v);if(null!=y){var b=v-(y.originalDts+y.duration);b<=3&&(b=0),s=v-(y.dts+y.duration+b)}else s=0}if(h){var S=v-s,w=this._videoSegmentInfoList.getLastSegmentBefore(v);if(null!=w&&w.beginDts<S){if(P=ke.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var E=w.beginDts,x=S-w.beginDts;n.a.v(this.TAG,"InsertPrefixSilentAudio: dts: "+E+", duration: "+x),a.unshift({unit:P,dts:E,pts:E}),m+=P.byteLength}}else h=!1}for(var k=[],A=0;A<a.length;A++){var T=(g=a[A]).unit,C=g.dts-this._dtsBase,R=(E=C,!1),D=null,L=0;if(!(C<-.001)){if("mp3"!==this._audioMeta.codec){var I=C;if(this._audioNextDts&&(I=this._audioNextDts),(s=C-I)<=-3*d){n.a.w(this.TAG,"Dropping 1 audio frame (originalDts: "+C+" ms ,curRefDts: "+I+" ms)  due to dtsCorrection: "+s+" ms overlap.");continue}if(s>=3*d&&this._fillAudioTimestampGap&&!o.a.safari){R=!0;var P,M=Math.floor(s/d);n.a.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+C+" ms, curRefDts: "+I+" ms, dtsCorrection: "+Math.round(s)+" ms, generate: "+M+" frames"),E=Math.floor(I),L=Math.floor(I+d)-E,null==(P=ke.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(n.a.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),P=T),D=[];for(var O=0;O<M;O++){I+=d;var B=Math.floor(I),j=Math.floor(I+d)-B,F={dts:B,pts:B,cts:0,unit:P,size:P.byteLength,duration:j,originalDts:C,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};D.push(F),m+=F.size}this._audioNextDts=I+d}else E=Math.floor(I),L=Math.floor(I+d)-E,this._audioNextDts=I+d}else E=C-s,L=A!==a.length-1?a[A+1].dts-this._dtsBase-s-E:null!=_?_.dts-this._dtsBase-s-E:k.length>=1?k[k.length-1].duration:Math.floor(d),this._audioNextDts=E+L;-1===l&&(l=E),k.push({dts:E,pts:E,cts:0,unit:g.unit,size:g.unit.byteLength,duration:L,originalDts:C,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),R&&k.push.apply(k,D)}}if(0===k.length)return i.samples=[],void(i.length=0);for(c?f=new Uint8Array(m):((f=new Uint8Array(m))[0]=m>>>24&255,f[1]=m>>>16&255,f[2]=m>>>8&255,f[3]=255&m,f.set(xe.types.mdat,4)),A=0;A<k.length;A++)T=k[A].unit,f.set(T,p),p+=T.byteLength;var N=k[k.length-1];r=N.dts+N.duration;var U=new Ae.b;U.beginDts=l,U.endDts=r,U.beginPts=l,U.endPts=r,U.originalBeginDts=k[0].originalDts,U.originalEndDts=N.originalDts+N.duration,U.firstSample=new Ae.d(k[0].dts,k[0].pts,k[0].duration,k[0].originalDts,!1),U.lastSample=new Ae.d(N.dts,N.pts,N.duration,N.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(U),i.samples=k,i.sequenceNumber++;var V=null;V=c?new Uint8Array:xe.moof(i,l),i.samples=[],i.length=0;var z={type:"audio",data:this._mergeBoxes(V,f).buffer,sampleCount:k.length,info:U};c&&u&&(z.timestampOffset=l),this._onMediaSegment("audio",z)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var r,i,a=e,n=a.samples,o=void 0,s=-1,l=-1;if(n&&0!==n.length&&(1!==n.length||t)){var d=8,c=null,u=8+e.length,h=null;if(n.length>1&&(u-=(h=n.pop()).length),null!=this._videoStashedLastSample){var p=this._videoStashedLastSample;this._videoStashedLastSample=null,n.unshift(p),u+=p.length}null!=h&&(this._videoStashedLastSample=h);var f=n[0].dts-this._dtsBase;if(this._videoNextDts)o=f-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())o=0;else{var m=this._videoSegmentInfoList.getLastSampleBefore(f);if(null!=m){var _=f-(m.originalDts+m.duration);_<=3&&(_=0),o=f-(m.dts+m.duration+_)}else o=0}for(var g=new Ae.b,v=[],y=0;y<n.length;y++){var b=(p=n[y]).dts-this._dtsBase,S=p.isKeyframe,w=b-o,E=p.cts,x=w+E;-1===s&&(s=w,l=x);var k=0;if(k=y!==n.length-1?n[y+1].dts-this._dtsBase-o-w:null!=h?h.dts-this._dtsBase-o-w:v.length>=1?v[v.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),S){var A=new Ae.d(w,x,k,p.dts,!0);A.fileposition=p.fileposition,g.appendSyncPoint(A)}v.push({dts:w,pts:x,cts:E,units:p.units,size:p.length,isKeyframe:S,duration:k,originalDts:b,flags:{isLeading:0,dependsOn:S?2:1,isDependedOn:S?1:0,hasRedundancy:0,isNonSync:S?0:1}})}for((c=new Uint8Array(u))[0]=u>>>24&255,c[1]=u>>>16&255,c[2]=u>>>8&255,c[3]=255&u,c.set(xe.types.mdat,4),y=0;y<v.length;y++)for(var T=v[y].units;T.length;){var C=T.shift().data;c.set(C,d),d+=C.byteLength}var R=v[v.length-1];if(r=R.dts+R.duration,i=R.pts+R.duration,this._videoNextDts=r,g.beginDts=s,g.endDts=r,g.beginPts=l,g.endPts=i,g.originalBeginDts=v[0].originalDts,g.originalEndDts=R.originalDts+R.duration,g.firstSample=new Ae.d(v[0].dts,v[0].pts,v[0].duration,v[0].originalDts,v[0].isKeyframe),g.lastSample=new Ae.d(R.dts,R.pts,R.duration,R.originalDts,R.isKeyframe),this._isLive||this._videoSegmentInfoList.append(g),a.samples=v,a.sequenceNumber++,this._forceFirstIDR){var D=v[0].flags;D.dependsOn=2,D.isNonSync=0}var L=xe.moof(a,s);a.samples=[],a.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(L,c).buffer,sampleCount:v.length,info:g})}}},e.prototype._mergeBoxes=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r},e}(),Ce=r(11),Re=r(1),De=function(){function e(e,t){this.TAG="TransmuxingController",this._emitter=new a.a,this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var r=0;this._mediaDataSource.segments.forEach((function(i){i.timestampBase=r,r+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)})),isNaN(r)||this._mediaDataSource.duration===r||(this._mediaDataSource.duration=r),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return e.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var r=this._mediaDataSource.segments[e],i=this._ioctl=new Ce.a(r,this._config,e);i.onError=this._onIOException.bind(this),i.onSeeked=this._onIOSeeked.bind(this),i.onComplete=this._onIOComplete.bind(this),i.onRedirect=this._onIORedirect.bind(this),i.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):i.onDataArrival=this._onInitChunkArrival.bind(this),i.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var r=this._mediaInfo.segments[t];if(null==r)this._pendingSeekTime=e;else{var i=r.getNearestKeyframe(e);this._remuxer.seek(i.milliseconds),this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds}}else{var a=this._mediaInfo.segments[t];null==a?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(i=a.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t))}this._enableStatisticsReporter()}},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,r=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){r=i-1;break}return r},e.prototype._onInitChunkArrival=function(e,t){var r=this,i=0;if(t>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,i=this._demuxer.parseChunks(e,t);else{var a=null;(a=x.probe(e)).match&&(this._setupFLVDemuxerRemuxer(a),i=this._demuxer.parseChunks(e,t)),a.match||a.needMoreData||(a=Se.probe(e)).match&&(this._setupTSDemuxerRemuxer(a),i=this._demuxer.parseChunks(e,t)),a.match||a.needMoreData||(a=null,n.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then((function(){r._internalAbort()})),this._emitter.emit(Re.a.DEMUX_ERROR,_.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return i},e.prototype._setupFLVDemuxerRemuxer=function(e){this._demuxer=new x(e,this._config),this._remuxer||(this._remuxer=new Te(this._config));var t=this._mediaDataSource;null==t.duration||isNaN(t.duration)||(this._demuxer.overridedDuration=t.duration),"boolean"==typeof t.hasAudio&&(this._demuxer.overridedHasAudio=t.hasAudio),"boolean"==typeof t.hasVideo&&(this._demuxer.overridedHasVideo=t.hasVideo),this._demuxer.timestampBase=t.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},e.prototype._setupTSDemuxerRemuxer=function(e){var t=this._demuxer=new Se(e,this._config);this._remuxer||(this._remuxer=new Te(this._config)),t.onError=this._onDemuxException.bind(this),t.onMediaInfo=this._onMediaInfo.bind(this),t.onMetaDataArrived=this._onMetaDataArrived.bind(this),t.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),t.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),t.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),t.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),t.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},e.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.a.prototype));var r=Object.assign({},e);Object.setPrototypeOf(r,s.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=r,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(Re.a.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(Re.a.SCRIPTDATA_ARRIVED,e)},e.prototype._onTimedID3Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(Re.a.TIMED_ID3_METADATA_ARRIVED,e))},e.prototype._onSMPTE2038Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(Re.a.SMPTE2038_METADATA_ARRIVED,e))},e.prototype._onSCTE35Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(Re.a.SCTE35_METADATA_ARRIVED,e))},e.prototype._onPESPrivateDataDescriptor=function(e){this._emitter.emit(Re.a.PES_PRIVATE_DATA_DESCRIPTOR,e)},e.prototype._onPESPrivateData=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(Re.a.PES_PRIVATE_DATA_ARRIVED,e))},e.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e+1;t<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(t)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(Re.a.LOADING_COMPLETE),this._disableStatisticsReporter())},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(Re.a.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){n.a.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(Re.a.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){n.a.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(Re.a.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(Re.a.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(Re.a.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var r=t.info.syncPoints,i=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,o.a.safari&&r.length>0&&r[0].originalDts===i&&(i=r[0].pts),this._emitter.emit(Re.a.RECOMMEND_SEEKPOINT,i)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],r=Object.assign({},t);r.duration=this._mediaInfo.duration,r.segmentCount=this._mediaInfo.segmentCount,delete r.segments,delete r.keyframesIndex,this._emitter.emit(Re.a.MEDIA_INFO,r)},e.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(Re.a.STATISTICS_INFO,e)},e}();t.a=De},function(e,t,r){var i,a,n=r(0),o=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}(),s=r(2),l=r(4),d=r(3),c=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t,r){var i=e.call(this,"fetch-stream-loader")||this;return i.TAG="FetchStreamLoader",i._seekHandler=t,i._config=r,i._needStash=!0,i._requestAbort=!1,i._abortController=null,i._contentLength=null,i._receivedLength=0,i}return c(t,e),t.isSupported=function(){try{var e=l.a.msedge&&l.a.version.minor>=15048,t=!l.a.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(r){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var r=this;this._dataSource=e,this._range=t;var i=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL);var a=this._seekHandler.getConfig(i,t),n=new self.Headers;if("object"==typeof a.headers){var o=a.headers;for(var l in o)o.hasOwnProperty(l)&&n.append(l,o[l])}var c={method:"GET",headers:n,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(var l in this._config.headers)n.append(l,this._config.headers[l]);!1===e.cors&&(c.mode="same-origin"),e.withCredentials&&(c.credentials="include"),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,c.signal=this._abortController.signal),this._status=s.c.kConnecting,self.fetch(a.url,c).then((function(e){if(r._requestAbort)return r._status=s.c.kIdle,void e.body.cancel();if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==a.url&&r._onURLRedirect){var t=r._seekHandler.removeURLParameters(e.url);r._onURLRedirect(t)}var i=e.headers.get("Content-Length");return null!=i&&(r._contentLength=parseInt(i),0!==r._contentLength&&r._onContentLengthKnown&&r._onContentLengthKnown(r._contentLength)),r._pump.call(r,e.body.getReader())}if(r._status=s.c.kError,!r._onError)throw new d.d("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);r._onError(s.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})})).catch((function(e){if(!r._abortController||!r._abortController.signal.aborted){if(r._status=s.c.kError,!r._onError)throw e;r._onError(s.b.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==s.c.kBuffering||!l.a.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(r){if(r.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=s.c.kError;var i=s.b.EARLY_EOF,a={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new d.d(a.msg);t._onError(i,a)}else t._status=s.c.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else{if(t._abortController&&t._abortController.signal.aborted)return void(t._status=s.c.kComplete);if(!0===t._requestAbort)return t._status=s.c.kComplete,e.cancel();t._status=s.c.kBuffering;var n=r.value.buffer,o=t._range.from+t._receivedLength;t._receivedLength+=n.byteLength,t._onDataArrival&&t._onDataArrival(n,o,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=s.c.kComplete;else if(11!==e.code||!l.a.msedge){t._status=s.c.kError;var r=0,i=null;if(19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(r=s.b.EXCEPTION,i={code:e.code,msg:e.message}):(r=s.b.EARLY_EOF,i={code:e.code,msg:"Fetch stream meet Early-EOF"}),!t._onError)throw new d.d(i.msg);t._onError(r,i)}}))},t}(s.a),h=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e){function t(t,r){var i=e.call(this,"xhr-moz-chunked-loader")||this;return i.TAG="MozChunkedLoader",i._seekHandler=t,i._config=r,i._needStash=!0,i._xhr=null,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}return h(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(t){return n.a.w("MozChunkedLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(r=e.redirectedURL);var i=this._seekHandler.getConfig(r,t);this._requestURL=i.url;var a=this._xhr=new XMLHttpRequest;if(a.open("GET",i.url,!0),a.responseType="moz-chunked-arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onloadend=this._onLoadEnd.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof i.headers){var n=i.headers;for(var o in n)n.hasOwnProperty(o)&&a.setRequestHeader(o,n[o])}if("object"==typeof this._config.headers)for(var o in n=this._config.headers)n.hasOwnProperty(o)&&a.setRequestHeader(o,n[o]);this._status=s.c.kConnecting,a.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=s.c.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var r=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(r)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=s.c.kError,!this._onError)throw new d.d("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(s.b.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=s.c.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==s.c.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==s.c.kError&&(this._status=s.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=s.c.kError;var t=0,r=null;if(this._contentLength&&e.loaded<this._contentLength?(t=s.b.EARLY_EOF,r={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=s.b.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new d.d(r.msg);this._onError(t,r)},t}(s.a),f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m=function(e){function t(t,r){var i=e.call(this,"xhr-range-loader")||this;return i.TAG="RangeLoader",i._seekHandler=t,i._config=r,i._needStash=!1,i._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],i._currentChunkSizeKB=384,i._currentSpeedNormalized=0,i._zeroSpeedChunkCount=0,i._xhr=null,i._speedSampler=new o,i._requestAbort=!1,i._waitForTotalLength=!1,i._totalLengthReceived=!1,i._currentRequestURL=null,i._currentRedirectedURL=null,i._currentRequestRange=null,i._totalLength=null,i._contentLength=null,i._receivedLength=0,i._lastTimeLoaded=0,i}return f(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(t){return n.a.w("RangeLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=s.c.kConnecting;var r=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(r=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||r?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},t.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,r=t+e;null!=this._contentLength&&r-this._range.from>=this._contentLength&&(r=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:r},this._internalOpen(this._dataSource,this._currentRequestRange)},t.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var r=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?r=this._currentRedirectedURL:null!=e.redirectedURL&&(r=e.redirectedURL));var i=this._seekHandler.getConfig(r,t);this._currentRequestURL=i.url;var a=this._xhr=new XMLHttpRequest;if(a.open("GET",i.url,!0),a.responseType="arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onload=this._onLoad.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof i.headers){var n=i.headers;for(var o in n)n.hasOwnProperty(o)&&a.setRequestHeader(o,n[o])}if("object"==typeof this._config.headers)for(var o in n=this._config.headers)n.hasOwnProperty(o)&&a.setRequestHeader(o,n[o]);a.send()},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=s.c.kComplete},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL){var r=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&r!==this._currentRedirectedURL&&(this._currentRedirectedURL=r,this._onURLRedirect&&this._onURLRedirect(r))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=s.c.kBuffering}else{if(this._status=s.c.kError,!this._onError)throw new d.d("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(s.b.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==s.c.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var r=e.total;this._internalAbort(),null!=r&0!==r&&(this._totalLength=r)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var i=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(i)}},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,r=t.length-1,i=0,a=0,n=r;if(e<t[0])return t[0];for(;a<=n;){if((i=a+Math.floor((n-a)/2))===r||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?a=i+1:n=i-1}},t.prototype._onLoad=function(e){if(this._status!==s.c.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var r=this._normalizeSpeed(t);this._currentSpeedNormalized!==r&&(this._currentSpeedNormalized=r,this._currentChunkSizeKB=r)}var i=e.target.response,a=this._range.from+this._receivedLength;this._receivedLength+=i.byteLength;var n=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(i,a,this._receivedLength),n&&(this._status=s.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=s.c.kError;var t=0,r=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=s.b.EARLY_EOF,r={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=s.b.EXCEPTION,r={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new d.d(r.msg);this._onError(t,r)},t}(s.a),_=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),g=function(e){function t(){var t=e.call(this,"websocket-loader")||this;return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return _(t,e),t.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=s.c.kConnecting}catch(i){this._status=s.c.kError;var r={code:i.code,msg:i.message};if(!this._onError)throw new d.d(r.msg);this._onError(s.b.EXCEPTION,r)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=s.c.kComplete},t.prototype._onWebSocketOpen=function(e){this._status=s.c.kBuffering},t.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=s.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var r=new FileReader;r.onload=function(){t._dispatchArrayBuffer(r.result)},r.readAsArrayBuffer(e.data)}else{this._status=s.c.kError;var i={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new d.d(i.msg);this._onError(s.b.EXCEPTION,i)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,r=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)},t.prototype._onWebSocketError=function(e){this._status=s.c.kError;var t={code:e.code,msg:e.message};if(!this._onError)throw new d.d(t.msg);this._onError(s.b.EXCEPTION,t)},t}(s.a),v=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var r={};if(0!==t.from||-1!==t.to){var i=void 0;i=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",r.Range=i}else this._zeroStart&&(r.Range="bytes=0-");return{url:e,headers:r}},e.prototype.removeURLParameters=function(e){return e},e}(),y=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var r=e;if(0!==t.from||-1!==t.to){var i=!0;-1===r.indexOf("?")&&(r+="?",i=!1),i&&(r+="&"),r+=this._startName+"="+t.from.toString(),-1!==t.to&&(r+="&"+this._endName+"="+t.to.toString())}return{url:r,headers:{}}},e.prototype.removeURLParameters=function(e){var t=e.split("?")[0],r=void 0,i=e.indexOf("?");-1!==i&&(r=e.substring(i+1));var a="";if(null!=r&&r.length>0)for(var n=r.split("&"),o=0;o<n.length;o++){var s=n[o].split("="),l=o>0;s[0]!==this._startName&&s[0]!==this._endName&&(l&&(a+="&"),a+=n[o])}return 0===a.length?t:t+"?"+a},e}(),b=function(){function e(e,t,r){this.TAG="IOController",this._config=t,this._extraData=r,this._stashInitialSize=65536,null!=t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loaderClass===m?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new v(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",r=e.seekParamEnd||"bend";this._seekHandler=new y(t,r)}else{if("custom"!==e.seekType)throw new d.b("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new d.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},e.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=g;else if(u.isSupported())this._loaderClass=u;else if(p.isSupported())this._loaderClass=p;else{if(!m.isSupported())throw new d.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=m}},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var r={from:e,to:-1};this._currentRange={from:r.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,r),this._onSeeked&&this._onSeeked()},e.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new d.b("Url must be a non-empty string!");this._dataSource.url=e},e.prototype._expandBuffer=function(e){for(var t=this._stashSize;t+1048576<e;)t*=2;if((t+=1048576)!==this._bufferSize){var r=new ArrayBuffer(t);if(this._stashUsed>0){var i=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(r,0,t).set(i,0)}this._stashBuffer=r,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,r=t.length-1,i=0,a=0,n=r;if(e<t[0])return t[0];for(;a<=n;){if((i=a+Math.floor((n-a)/2))===r||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?a=i+1:n=i-1}},e.prototype._adjustStashSize=function(e){var t=0;(t=this._config.isLive?e/8:e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e)>8192&&(t=8192);var r=1024*t+1048576;this._bufferSize<r&&this._expandBuffer(r),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,r){if(!this._onDataArrival)throw new d.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength);var i=this._speedSampler.lastSecondKBps;if(0!==i){var a=this._normalizeSpeed(i);this._speedNormalized!==a&&(this._speedNormalized=a,this._adjustStashSize(a))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)(s=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else if(s=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var n=this._stashBuffer.slice(0,this._stashUsed);(l=this._dispatchChunks(n,this._stashByteStart))<n.byteLength?l>0&&(c=new Uint8Array(n,l),s.set(c,0),this._stashUsed=c.byteLength,this._stashByteStart+=l):(this._stashUsed=0,this._stashByteStart+=l),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else(l=this._dispatchChunks(e,t))<e.byteLength&&((o=e.byteLength-l)>this._bufferSize&&(this._expandBuffer(o),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e,l),0),this._stashUsed+=o,this._stashByteStart=t+l);else if(0===this._stashUsed){var o;(l=this._dispatchChunks(e,t))<e.byteLength&&((o=e.byteLength-l)>this._bufferSize&&this._expandBuffer(o),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,l),0),this._stashUsed+=o,this._stashByteStart=t+l)}else{var s,l;if(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(l=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&l>0){var c=new Uint8Array(this._stashBuffer,l);s.set(c,0)}this._stashUsed-=l,this._stashByteStart+=l}}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),r=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-r;if(r<t.byteLength){if(!e){if(r>0){var a=new Uint8Array(this._stashBuffer,0,this._bufferSize),o=new Uint8Array(t,r);a.set(o,0),this._stashUsed=o.byteLength,this._stashByteStart+=r}return 0}n.a.w(this.TAG,i+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,i}return 0},e.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(n.a.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=s.b.UNRECOVERABLE_EARLY_EOF),e){case s.b.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var r=this._currentRange.to+1;return void(r<this._totalLength&&(n.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(r,!1)))}e=s.b.UNRECOVERABLE_EARLY_EOF;case s.b.UNRECOVERABLE_EARLY_EOF:case s.b.CONNECTING_TIMEOUT:case s.b.HTTP_STATUS_CODE_INVALID:case s.b.EXCEPTION:}if(!this._onError)throw new d.d("IOException: "+t.msg);this._onError(e,t)},e}();t.a=b},function(e,t,r){var i=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t},"function"!=typeof self.Promise&&r(15).polyfill()},e}();i.install(),t.a=i},function(e,t,r){function i(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=r(r.s=ENTRY_MODULE);return i.default||i}function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(e,t,i){var n={};n[i]=[];var o=t.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return n;for(var l,d=s[1],c=new RegExp("(\\\\n|\\W)"+a(d)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=c.exec(o);)"dll-reference"!==l[3]&&n[i].push(l[3]);for(c=new RegExp("\\("+a(d)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=c.exec(o);)e[l[2]]||(n[i].push(l[1]),e[l[2]]=r(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var u,h=Object.keys(n),p=0;p<h.length;p++)for(var f=0;f<n[h[p]].length;f++)u=n[h[p]][f],isNaN(1*u)||(n[h[p]][f]=1*n[h[p]][f]);return n}function o(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var a={main:r.m},s=t.all?{main:Object.keys(a.main)}:function(e,t){for(var r={main:[t]},i={main:[]},a={main:{}};o(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var d=s[l],c=r[d].pop();if(a[d]=a[d]||{},!a[d][c]&&e[d][c]){a[d][c]=!0,i[d]=i[d]||[],i[d].push(c);for(var u=n(e,e[d][c],d),h=Object.keys(u),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(u[h[p]])}}return i}(a,e),l="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);";var d=new window.Blob([l],{type:"text/javascript"});if(t.bare)return d;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(d),u=new window.Worker(c);return u.objectURL=c,u}},function(e,t,r){e.exports=r(19).default},function(e,t,r){(function(t,r){
/*!
         * @overview es6-promise - a tiny implementation of Promises/A+.
         * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
         * @license   Licensed under MIT license
         *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
         * @version   v4.2.8+1e68dce6
         */
var i;i=function(){function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=0,n=void 0,o=void 0,s=function(e,t){f[a]=e,f[a+1]=t,2===(a+=2)&&(o?o(m):b())},l="undefined"!=typeof window?window:void 0,d=l||{},c=d.MutationObserver||d.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var f=new Array(1e3);function m(){for(var e=0;e<a;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;a=0}var _,g,v,y,b=void 0;function S(e,t){var r=this,i=new this.constructor(x);void 0===i[E]&&M(i);var a=r._state;if(a){var n=arguments[a-1];s((function(){return I(a,i,n,r._result)}))}else D(r,i,e,t);return i}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(x);return A(t,e),t}u?b=function(){return t.nextTick(m)}:c?(g=0,v=new c(m),y=document.createTextNode(""),v.observe(y,{characterData:!0}),b=function(){y.data=g=++g%2}):h?((_=new MessageChannel).port1.onmessage=m,b=function(){return _.port2.postMessage(0)}):b=void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(n=e.runOnLoop||e.runOnContext)?function(){n(m)}:p()}catch(t){return p()}}():p();var E=Math.random().toString(36).substring(2);function x(){}function k(t,r,i){var a,n;r.constructor===t.constructor&&i===S&&r.constructor.resolve===w?(a=t,1===(n=r)._state?C(a,n._result):2===n._state?R(a,n._result):D(n,void 0,(function(e){return A(a,e)}),(function(e){return R(a,e)}))):void 0===i?C(t,r):e(i)?function(e,t,r){s((function(e){var i=!1,a=function(e,t,r,i){try{e.call(t,r,i)}catch(a){return a}}(r,t,(function(r){i||(i=!0,t!==r?A(e,r):C(e,r))}),(function(t){i||(i=!0,R(e,t))}),e._label);!i&&a&&(i=!0,R(e,a))}),e)}(t,r,i):C(t,r)}function A(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(a=typeof(i=t),null===i||"object"!==a&&"function"!==a)C(e,t);else{var r=void 0;try{r=t.then}catch(n){return void R(e,n)}k(e,t,r)}var i,a}function T(e){e._onerror&&e._onerror(e._result),L(e)}function C(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(L,e))}function R(e,t){void 0===e._state&&(e._state=2,e._result=t,s(T,e))}function D(e,t,r,i){var a=e._subscribers,n=a.length;e._onerror=null,a[n]=t,a[n+1]=r,a[n+2]=i,0===n&&e._state&&s(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i=void 0,a=void 0,n=e._result,o=0;o<t.length;o+=3)i=t[o],a=t[o+r],i?I(r,i,a,n):a(n);e._subscribers.length=0}}function I(t,r,i,a){var n=e(i),o=void 0,s=void 0,l=!0;if(n){try{o=i(a)}catch(d){l=!1,s=d}if(r===o)return void R(r,new TypeError("A promises callback cannot return that same promise."))}else o=a;void 0!==r._state||(n&&l?A(r,o):!1===l?R(r,s):1===t?C(r,o):2===t&&R(r,o))}var P=0;function M(e){e[E]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}var O=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(x),this.promise[E]||M(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&C(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,i=r.resolve;if(i===w){var a=void 0,n=void 0,o=!1;try{a=e.then}catch(l){o=!0,n=l}if(a===S&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(r===B){var s=new r(x);o?R(s,n):k(s,e,a),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,r){var i=this.promise;void 0===i._state&&(this._remaining--,2===e?R(i,r):this._result[t]=r),0===this._remaining&&C(i,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;D(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}(),B=function(){function t(e){this[E]=P++,this._result=this._state=void 0,this._subscribers=[],x!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){A(e,t)}),(function(t){R(e,t)}))}catch(r){R(e,r)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return B.prototype.then=S,B.all=function(e){return new O(this,e).promise},B.race=function(e){var t=this;return i(e)?new t((function(r,i){for(var a=e.length,n=0;n<a;n++)t.resolve(e[n]).then(r,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},B.resolve=w,B.reject=function(e){var t=new this(x);return R(t,e),t},B._setScheduler=function(e){o=e},B._setAsap=function(e){s=e},B._asap=s,B.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(a){}if("[object Promise]"===i&&!t.cast)return}e.Promise=B},B.Promise=B,B},e.exports=i()}).call(this,r(16),r(17))},function(e,t){var r,i,a=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(i){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,d=[],c=!1,u=-1;function h(){c&&l&&(c=!1,l.length?d=l.concat(d):u=-1,d.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=d.length;t;){for(l=d,d=[];++u<t;)l&&l[u].run();u=-1,t=d.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(r){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new f(e,t)),1!==d.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){r.r(t);var i=r(9),a=r(12),n=r(10),o=r(1);t.default=function(e){var t=null,r=function(t,r){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:r}})}.bind(this);function s(t,r){var i={msg:o.a.INIT_SEGMENT,data:{type:t,data:r}};e.postMessage(i,[r.data])}function l(t,r){var i={msg:o.a.MEDIA_SEGMENT,data:{type:t,data:r}};e.postMessage(i,[r.data])}function d(){var t={msg:o.a.LOADING_COMPLETE};e.postMessage(t)}function c(){var t={msg:o.a.RECOVERED_EARLY_EOF};e.postMessage(t)}function u(t){var r={msg:o.a.MEDIA_INFO,data:t};e.postMessage(r)}function h(t){var r={msg:o.a.METADATA_ARRIVED,data:t};e.postMessage(r)}function p(t){var r={msg:o.a.SCRIPTDATA_ARRIVED,data:t};e.postMessage(r)}function f(t){var r={msg:o.a.TIMED_ID3_METADATA_ARRIVED,data:t};e.postMessage(r)}function m(t){var r={msg:o.a.SMPTE2038_METADATA_ARRIVED,data:t};e.postMessage(r)}function _(t){var r={msg:o.a.SCTE35_METADATA_ARRIVED,data:t};e.postMessage(r)}function g(t){var r={msg:o.a.PES_PRIVATE_DATA_DESCRIPTOR,data:t};e.postMessage(r)}function v(t){var r={msg:o.a.PES_PRIVATE_DATA_ARRIVED,data:t};e.postMessage(r)}function y(t){var r={msg:o.a.STATISTICS_INFO,data:t};e.postMessage(r)}function b(t,r){e.postMessage({msg:o.a.IO_ERROR,data:{type:t,info:r}})}function S(t,r){e.postMessage({msg:o.a.DEMUX_ERROR,data:{type:t,info:r}})}function w(t){e.postMessage({msg:o.a.RECOMMEND_SEEKPOINT,data:t})}a.a.install(),e.addEventListener("message",(function(a){switch(a.data.cmd){case"init":(t=new n.a(a.data.param[0],a.data.param[1])).on(o.a.IO_ERROR,b.bind(this)),t.on(o.a.DEMUX_ERROR,S.bind(this)),t.on(o.a.INIT_SEGMENT,s.bind(this)),t.on(o.a.MEDIA_SEGMENT,l.bind(this)),t.on(o.a.LOADING_COMPLETE,d.bind(this)),t.on(o.a.RECOVERED_EARLY_EOF,c.bind(this)),t.on(o.a.MEDIA_INFO,u.bind(this)),t.on(o.a.METADATA_ARRIVED,h.bind(this)),t.on(o.a.SCRIPTDATA_ARRIVED,p.bind(this)),t.on(o.a.TIMED_ID3_METADATA_ARRIVED,f.bind(this)),t.on(o.a.SMPTE2038_METADATA_ARRIVED,m.bind(this)),t.on(o.a.SCTE35_METADATA_ARRIVED,_.bind(this)),t.on(o.a.PES_PRIVATE_DATA_DESCRIPTOR,g.bind(this)),t.on(o.a.PES_PRIVATE_DATA_ARRIVED,v.bind(this)),t.on(o.a.STATISTICS_INFO,y.bind(this)),t.on(o.a.RECOMMEND_SEEKPOINT,w.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(a.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var E=a.data.param;i.a.applyConfig(E),!0===E.enableCallback?i.a.addLogListener(r):i.a.removeLogListener(r)}}))}},function(e,t,r){r.r(t);var i=r(12),a=r(11),n={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function o(){return Object.assign({},n)}var s=function(){function e(){}return e.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},e.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},e.supportNetworkStreamIO=function(){var e=new a.a({},o()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},e.getNetworkLoaderTypeName=function(){var e=new a.a({},o()),t=e.loaderType;return e.destroy(),t},e.supportNativeMediaPlayback=function(t){null==e.videoElement&&(e.videoElement=window.document.createElement("video"));var r=e.videoElement.canPlayType(t);return"probably"===r||"maybe"==r},e.getFeatureList=function(){var t={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return t.msePlayback=e.supportMSEH264Playback(),t.networkStreamIO=e.supportNetworkStreamIO(),t.networkLoaderName=e.getNetworkLoaderTypeName(),t.mseLivePlayback=t.msePlayback&&t.networkStreamIO,t.mseH265Playback=e.supportMSEH265Playback(),t.nativeMP4H264Playback=e.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),t.nativeMP4H265Playback=e.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),t.nativeWebmVP8Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),t.nativeWebmVP9Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp9"'),t},e}(),l=r(2),d=r(6),c=r.n(d),u=r(0),h=r(4),p={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},f=r(13),m=r.n(f),_=r(9),g=r(10),v=r(1),y=r(8),b=function(){function e(e,t){if(this.TAG="Transmuxer",this._emitter=new c.a,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=m()(18),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},_.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:_.a.getConfig()})}catch(i){u.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new g.a(e,t)}else this._controller=new g.a(e,t);if(this._controller){var r=this._controller;r.on(v.a.IO_ERROR,this._onIOError.bind(this)),r.on(v.a.DEMUX_ERROR,this._onDemuxError.bind(this)),r.on(v.a.INIT_SEGMENT,this._onInitSegment.bind(this)),r.on(v.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),r.on(v.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),r.on(v.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),r.on(v.a.MEDIA_INFO,this._onMediaInfo.bind(this)),r.on(v.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),r.on(v.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),r.on(v.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),r.on(v.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),r.on(v.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),r.on(v.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),r.on(v.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),r.on(v.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),r.on(v.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),_.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},e.prototype._onInitSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(v.a.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(v.a.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(v.a.LOADING_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(v.a.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onTimedID3MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.TIMED_ID3_METADATA_ARRIVED,e)}))},e.prototype._onSMPTE2038MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.SMPTE2038_METADATA_ARRIVED,e)}))},e.prototype._onSCTE35MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.SCTE35_METADATA_ARRIVED,e)}))},e.prototype._onPESPrivateDataDescriptor=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.PES_PRIVATE_DATA_DESCRIPTOR,e)}))},e.prototype._onPESPrivateDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.PES_PRIVATE_DATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(v.a.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(v.a.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(v.a.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},e.prototype._onWorkerMessage=function(e){var t=e.data,r=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case v.a.INIT_SEGMENT:case v.a.MEDIA_SEGMENT:this._emitter.emit(t.msg,r.type,r.data);break;case v.a.LOADING_COMPLETE:case v.a.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case v.a.MEDIA_INFO:Object.setPrototypeOf(r,y.a.prototype),this._emitter.emit(t.msg,r);break;case v.a.METADATA_ARRIVED:case v.a.SCRIPTDATA_ARRIVED:case v.a.TIMED_ID3_METADATA_ARRIVED:case v.a.SMPTE2038_METADATA_ARRIVED:case v.a.SCTE35_METADATA_ARRIVED:case v.a.PES_PRIVATE_DATA_DESCRIPTOR:case v.a.PES_PRIVATE_DATA_ARRIVED:case v.a.STATISTICS_INFO:this._emitter.emit(t.msg,r);break;case v.a.IO_ERROR:case v.a.DEMUX_ERROR:this._emitter.emit(t.msg,r.type,r.info);break;case v.a.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,r);break;case"logcat_callback":u.a.emitter.emit("log",r.type,r.logcat)}},e}(),S={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"},w=r(7),E=r(3),x=function(){function e(e){this.TAG="MSEController",this._config=e,this._emitter=new c.a,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new w.a}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new E.a("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){if(this._mediaSource){var e=this._mediaSource;for(var t in this._sourceBuffers){var r=this._pendingSegments[t];r.splice(0,r.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;var i=this._sourceBuffers[t];if(i){if("closed"!==e.readyState){try{e.removeSourceBuffer(i)}catch(a){u.a.e(this.TAG,a.message)}i.removeEventListener("error",this.e.onSourceBufferError),i.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(a){u.a.e(this.TAG,a.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var r=e,i=""+r.container;r.codec&&r.codec.length>0&&(i+=";codecs="+r.codec);var a=!1;if(u.a.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[r.type]=r,i!==this._mimeTypes[r.type]){if(this._mimeTypes[r.type])u.a.v(this.TAG,"Notice: "+r.type+" mimeType changed, origin: "+this._mimeTypes[r.type]+", target: "+i);else{a=!0;try{var n=this._sourceBuffers[r.type]=this._mediaSource.addSourceBuffer(i);n.addEventListener("error",this.e.onSourceBufferError),n.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(o){return u.a.e(this.TAG,o.message),void this._emitter.emit(S.ERROR,{code:o.code,msg:o.message})}}this._mimeTypes[r.type]=i}t||this._pendingSegments[r.type].push(r),a||this._sourceBuffers[r.type]&&!this._sourceBuffers[r.type].updating&&this._doAppendSegments(),h.a.safari&&"audio/mpeg"===r.container&&r.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=r.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var r=this._sourceBuffers[t.type];!r||r.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var r=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{r.abort()}catch(l){u.a.e(this.TAG,l.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var a=0;a<r.buffered.length;a++){var n=r.buffered.start(a),o=r.buffered.end(a);this._pendingRemoveRanges[t].push({start:n,end:o})}if(r.updating||this._doRemoveRanges(),h.a.safari){var s=this._lastInitSegments[t];s&&(this._pendingSegments[t].push(s),r.updating||this._doAppendSegments())}}}},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){var i=r.buffered;if(i.length>=1&&e-i.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},e.prototype._doCleanupSourceBuffer=function(){var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var r=this._sourceBuffers[t];if(r){for(var i=r.buffered,a=!1,n=0;n<i.length;n++){var o=i.start(n),s=i.end(n);if(o<=e&&e<s+3){if(e-o>=this._config.autoCleanupMaxBackwardDuration){a=!0;var l=e-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[t].push({start:o,end:l})}}else s<e&&(a=!0,this._pendingRemoveRanges[t].push({start:o,end:s}))}a&&!r.updating&&this._doRemoveRanges()}}},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,r=this._pendingMediaDuration;r>0&&(isNaN(t)||r>t)&&(u.a.v(this.TAG,"Update MediaSource duration from "+t+" to "+r),this._mediaSource.duration=r),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],r=this._pendingRemoveRanges[e];r.length&&!t.updating;){var i=r.shift();t.remove(i.start,i.end)}},e.prototype._doAppendSegments=function(){var e=this._pendingSegments;for(var t in e)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating&&e[t].length>0){var r=e[t].shift();if(r.timestampOffset){var i=this._sourceBuffers[t].timestampOffset,a=r.timestampOffset/1e3;Math.abs(i-a)>.1&&(u.a.v(this.TAG,"Update MPEG audio timestampOffset from "+i+" to "+a),this._sourceBuffers[t].timestampOffset=a),delete r.timestampOffset}if(!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[t].appendBuffer(r.data),this._isBufferFull=!1,"video"===t&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(n){this._pendingSegments[t].unshift(r),22===n.code?(this._isBufferFull||this._emitter.emit(S.BUFFER_FULL),this._isBufferFull=!0):(u.a.e(this.TAG,n.message),this._emitter.emit(S.ERROR,{code:n.code,msg:n.message}))}}},e.prototype._onSourceOpen=function(){if(u.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(S.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){u.a.v(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){u.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(S.UPDATE_END)},e.prototype._onSourceBufferError=function(e){u.a.e(this.TAG,"SourceBuffer Error: "+e)},e}(),k=r(5),A={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},T={NETWORK_EXCEPTION:l.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:k.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:k.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:k.a.CODEC_UNSUPPORTED},C=function(){function e(e,t){this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new c.a,this._config=o(),"object"==typeof t&&Object.assign(this._config,t);var r=e.type.toLowerCase();if("mse"!==r&&"mpegts"!==r&&"m2ts"!==r&&"flv"!==r)throw new E.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var i=h.a.chrome&&(h.a.version.major<50||50===h.a.version.major&&h.a.version.build<2661);this._alwaysSeekKeyframe=!!(i||h.a.msedge||h.a.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return e.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===p.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){r._emitter.emit(p.MEDIA_INFO,r.mediaInfo)})):e===p.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){r._emitter.emit(p.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new x(this._config),this._msectl.on(S.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(S.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(S.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(S.ERROR,(function(e){t._emitter.emit(p.ERROR,A.MEDIA_ERROR,T.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(r){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new E.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new E.a("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new b(this._mediaDataSource,this._config),this._transmuxer.on(v.a.INIT_SEGMENT,(function(t,r){e._msectl.appendInitSegment(r)})),this._transmuxer.on(v.a.MEDIA_SEGMENT,(function(t,r){if(e._msectl.appendMediaSegment(r),e._config.lazyLoad&&!e._config.isLive){var i=e._mediaElement.currentTime;r.info.endDts>=1e3*(i+e._config.lazyLoadMaxDuration)&&null==e._progressChecker&&(u.a.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())}})),this._transmuxer.on(v.a.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(p.LOADING_COMPLETE)})),this._transmuxer.on(v.a.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(p.RECOVERED_EARLY_EOF)})),this._transmuxer.on(v.a.IO_ERROR,(function(t,r){e._emitter.emit(p.ERROR,A.NETWORK_ERROR,t,r)})),this._transmuxer.on(v.a.DEMUX_ERROR,(function(t,r){e._emitter.emit(p.ERROR,A.MEDIA_ERROR,t,{code:-1,msg:r})})),this._transmuxer.on(v.a.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(p.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(v.a.METADATA_ARRIVED,(function(t){e._emitter.emit(p.METADATA_ARRIVED,t)})),this._transmuxer.on(v.a.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(p.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(v.a.TIMED_ID3_METADATA_ARRIVED,(function(t){e._emitter.emit(p.TIMED_ID3_METADATA_ARRIVED,t)})),this._transmuxer.on(v.a.SMPTE2038_METADATA_ARRIVED,(function(t){e._emitter.emit(p.SMPTE2038_METADATA_ARRIVED,t)})),this._transmuxer.on(v.a.SCTE35_METADATA_ARRIVED,(function(t){e._emitter.emit(p.SCTE35_METADATA_ARRIVED,t)})),this._transmuxer.on(v.a.PES_PRIVATE_DATA_DESCRIPTOR,(function(t){e._emitter.emit(p.PES_PRIVATE_DATA_DESCRIPTOR,t)})),this._transmuxer.on(v.a.PES_PRIVATE_DATA_ARRIVED,(function(t){e._emitter.emit(p.PES_PRIVATE_DATA_ARRIVED,t)})),this._transmuxer.on(v.a.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(p.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(v.a.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var a=this._mediaElement.getVideoPlaybackQuality();r=a.totalVideoFrames,i=a.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=i),e},e.prototype._onmseUpdateEnd=function(){var e=this._mediaElement.buffered,t=this._mediaElement.currentTime;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&e.length>0&&!this._mediaElement.paused){var r=e.end(e.length-1);if(r>this._config.liveBufferLatencyMaxLatency&&r-t>this._config.liveBufferLatencyMaxLatency){var i=r-this._config.liveBufferLatencyMinRemain;this.currentTime=i}}if(this._config.lazyLoad&&!this._config.isLive){for(var a=0,n=0;n<e.length;n++){var o=e.start(n),s=e.end(n);if(o<=t&&t<s){a=s;break}}a>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(u.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){u.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,r=!1,i=0;i<t.length;i++){var a=t.start(i),n=t.end(i);if(e>=a&&e<n){e>=n-this._config.lazyLoadRecoverDuration&&(r=!0);break}}r&&(window.clearInterval(this._progressChecker),this._progressChecker=null,r&&(u.a.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},e.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(e>=i&&e<a)return!0}return!1},e.prototype._internalSeek=function(e){var t=this._isTimepointBuffered(e),r=!1,i=0;if(e<1&&this._mediaElement.buffered.length>0){var a=this._mediaElement.buffered.start(0);(a<1&&e<a||h.a.safari)&&(r=!0,i=h.a.safari?.1:a)}if(r)this._requestSetTime=!0,this._mediaElement.currentTime=i;else if(t){if(this._alwaysSeekKeyframe){var n=this._msectl.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement.currentTime=null!=n?n.dts/1e3:e}else this._requestSetTime=!0,this._mediaElement.currentTime=e;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var r=t.buffered;r.length>0&&t.currentTime<r.start(0)&&(u.a.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+r.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=r.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,r=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&r.length>0){var i=r.start(0);if(i<1&&t<i||h.a.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=h.a.safari?.1:i)}if(this._isTimepointBuffered(t)){if(this._alwaysSeekKeyframe){var a=this._msectl.getNearestKeyframe(Math.floor(1e3*t));null!=a&&(this._requestSetTime=!0,this._mediaElement.currentTime=a.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},e}(),R=function(){function e(e,t){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new c.a,this._config=o(),"object"==typeof t&&Object.assign(this._config,t);var r=e.type.toLowerCase();if("mse"===r||"mpegts"===r||"m2ts"===r||"flv"===r)throw new E.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new E.b("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var r=this;e===p.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(p.MEDIA_INFO,r.mediaInfo)})):e===p.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(p.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.load=function(){if(!this._mediaElement)throw new E.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var a=this._mediaElement.getVideoPlaybackQuality();r=a.totalVideoFrames,i=a.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=i),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(p.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(p.STATISTICS_INFO,this.statisticsInfo)},e}();i.a.install();var D={createPlayer:function(e,t){var r=e;if(null==r||"object"!=typeof r)throw new E.b("MediaDataSource must be an javascript object!");if(!r.hasOwnProperty("type"))throw new E.b("MediaDataSource must has type field to indicate video file type!");switch(r.type){case"mse":case"mpegts":case"m2ts":case"flv":return new C(r,t);default:return new R(r,t)}},isSupported:function(){return s.supportMSEH264Playback()},getFeatureList:function(){return s.getFeatureList()}};D.BaseLoader=l.a,D.LoaderStatus=l.c,D.LoaderErrors=l.b,D.Events=p,D.ErrorTypes=A,D.ErrorDetails=T,D.MSEPlayer=C,D.NativePlayer=R,D.LoggingControl=_.a,Object.defineProperty(D,"version",{enumerable:!0,get:function(){return"1.7.3"}}),t.default=D}])),O=r({__name:"ArtPlayer",props:{option:{type:Object,required:!0},danmuku:{default:()=>[]},headers:{default:()=>({})}},setup(e,{expose:t}){let r=null;t({instance:r});const l=e,d=i(null);return a((()=>{r=new D({...l.option,container:d.value,customType:{flv:function(e,t){if(M.isSupported()){const r=M.createPlayer({type:"flv",url:t,hasVideo:!0,hasAudio:!0},{headers:l.headers});r.attachMediaElement(e),r.load()}else r&&(r.notice.show="不支持播放格式：flv")}},plugins:[I({danmuku:l.danmuku})]})})),n((()=>{r&&r.destroy()})),(e,t)=>(s(),o("div",{style:{width:"100%",height:"100%"},ref_key:"artRef",ref:d},null,512))}}),B={class:"player-container"},j={style:{width:"100%"}},F={class:"player"},N=(e=>(x("data-v-99183122"),e=e(),k(),e))((()=>h("div",null,null,-1))),U=A(r({__name:"VideoPlayer",setup(e){const t=l(),r=d(),x=i("");let k=!1;const A=i(!1),T=i(null),C=c((()=>{const e=x.value.split("/").filter((e=>""!==e));let t="";const r=[{name:"工作目录",path:"/"}];for(const i of e)r.push({name:i,path:`${t}/${i}`}),t+=`/${i}`;return r}));function R(e){let t=e.toString(16);return t="#"+t.padStart(6,"0"),t}const D=i({url:""}),L=i((()=>[]));function I(e){var t;return new URL("."+e,null==(t=u.recorder)?void 0:t.meta.path).toString()}const P=u.recorder._getHeader();return a((()=>{if(k=!0,t.hash&&t.hash.startsWith("#/")?x.value=t.hash.slice(1):r.push({path:`/recorder/${t.params.id}/files`,hash:"#/"}),x.value.endsWith("/")&&r.push({path:`/recorder/${t.params.id}/files`,hash:t.hash}),x.value.endsWith(".flv")||r.push({path:`/recorder/${t.params.id}/files`,hash:"#/"}),null==u.recorder)return void console.error("recorder not ready");const e=x.value.split("/"),i=e.pop(),a=e.join("/"),n=i.replace(/\.flv$/g,".xml");u.recorder.getFileList(a).then((e=>{if(!k)return;if(!e.exist)return;T.value=e.files.find((e=>e.name===i&&!e.isFolder));const a=e.files.find((e=>e.name===n&&!e.isFolder));if(!T.value)return r.push({path:`/recorder/${t.params.id}/files`,hash:"#/"});D.value={title:T.value.name,url:I(T.value.url),pip:!0,setting:!0,playbackRate:!0,aspectRatio:!0,flip:!0,autoSize:!0,autoMini:!0,mutex:!0,miniProgressBar:!0,backdrop:!1,fullscreen:!0,fullscreenWeb:!0,lang:"zh-cn"},L.value=async()=>{const e=await(await fetch(I(a.url),{headers:P})).text();try{const t=[],r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.getElementsByTagName("d")).forEach((e=>{const r=e.textContent,i=e.getAttribute("p").split(",");t.push({text:r,color:R(Number(i[3])),time:Number(i[0]),mode:0})})),t}catch(t){console.error(t)}return[]},A.value=!0}))})),n((()=>{k=!1})),(e,i)=>(s(),o("div",B,[h("div",j,[p(m(E),null,{default:f((()=>[(s(!0),o(v,null,y(C.value,(e=>(s(),_(m(w),{key:e.path,onClick:i=>{return a=e.path,void r.push({path:`/recorder/${t.params.id}/files`,hash:`#${a}`});var a}},{default:f((()=>[b(S(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})]),h("div",F,[A.value?(s(),_(O,{key:0,option:D.value,danmuku:L.value,headers:m(P)},null,8,["option","danmuku","headers"])):g("",!0)]),N]))}}),[["__scopeId","data-v-99183122"]]);export{U as default};
